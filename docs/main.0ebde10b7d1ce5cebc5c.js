(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/psV":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,s=n("jebL"),o=n("88ZB"),a=n("kOjh"),u=n("2D0q"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.ErrorFactory("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),m=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=s.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=d);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(o.contains(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&o&&u.push("and"),o&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}c(new a.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!o.contains(e,t=t||d))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var d=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&o.deepExtend(d,a.serviceProps),r[h]=d,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var f=s.__values(Object.keys(e)),m=f.next();!m.done;m=f.next())e[m.value]._addComponent(a)}catch(g){u={error:g}}finally{try{m&&!m.done&&(c=f.return)&&c.call(f)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(m);return e.INTERNAL=s.__assign(s.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){o.deepExtend(e,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(o.isBrowser()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var w=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),w.apply(void 0,t)};var _=g;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.6.11",void 0),t.registerVersion("fire-js","")}(_),e.default=_,e.firebase=_},0:function(t,e,n){t.exports=n("zUnb")},"2D0q":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return d})),n.d(e,"setUserLogHandler",(function(){return f}));var s=[],o=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function d(t){s.forEach((function(e){e.setLogLevel(t)}))}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},"88ZB":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("jebL"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}var p=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(e,t),e}(Error),m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?g(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new p(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function g(t,e){return t.replace(y,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;function v(t){return JSON.parse(t)}var w=function(t){var e={},n={},r={},i="";try{var s=t.split(".");e=v(c(s[0])||""),n=v(c(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(o){}return{header:e,claims:n,data:r,signature:i}},_=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),s=1518500249):(i=a^u^c,s=1859775393):r<60?(i=a&u|c&(a|u),s=2400959708):(i=a^u^c,s=3395469782);var h=(o<<5|o>>>27)+i+l+s+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),b=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function E(){}function S(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}var T=144e5;e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=m,e.FirebaseError=p,e.MAX_VALUE_MILLIS=T,e.RANDOM_FACTOR=.5,e.Sha1=_,e.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},e.assert=s,e.assertionError=o,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=a(t);return u.encodeByteArray(e,!0)},e.calculateBackoffMillis=function(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(T,r+i)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new b(t,e);return n.subscribe.bind(n)},e.decode=w,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=S,e.getUA=d,e.isAdmin=function(t){var e=w(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return d().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},e.isNode=f,e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return d().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=w(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=w(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=w(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=v,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var s=i[r];n(s[0],s[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,s(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(S(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(S(t,e,r)+"must be a valid context object.")},e.validateIndexedDBOpenable=function(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(s){e(s)}}))},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(S(t,e,r)+"must be a valid firebase namespace.")}},CCl1:function(t,e,n){"use strict";n.r(e),n.d(e,"AbstractUserDataWriter",(function(){return qf})),n.d(e,"Bytes",(function(){return Fd})),n.d(e,"CACHE_SIZE_UNLIMITED",(function(){return yd})),n.d(e,"CollectionReference",(function(){return ud})),n.d(e,"DocumentReference",(function(){return od})),n.d(e,"DocumentSnapshot",(function(){return gf})),n.d(e,"FieldPath",(function(){return Pd})),n.d(e,"FieldValue",(function(){return Md})),n.d(e,"Firestore",(function(){return vd})),n.d(e,"FirestoreError",(function(){return Jr})),n.d(e,"GeoPoint",(function(){return Vd})),n.d(e,"LoadBundleTask",(function(){return gd})),n.d(e,"Query",(function(){return ad})),n.d(e,"QueryConstraint",(function(){return Ef})),n.d(e,"QueryDocumentSnapshot",(function(){return yf})),n.d(e,"QuerySnapshot",(function(){return vf})),n.d(e,"SnapshotMetadata",(function(){return mf})),n.d(e,"Timestamp",(function(){return mi})),n.d(e,"Transaction",(function(){return ap})),n.d(e,"WriteBatch",(function(){return Hf})),n.d(e,"_DatabaseId",(function(){return Kh})),n.d(e,"_DocumentKey",(function(){return Fi})),n.d(e,"_EmptyAppCheckTokenProvider",(function(){return ui})),n.d(e,"_EmptyAuthCredentialsProvider",(function(){return ei})),n.d(e,"_FieldPath",(function(){return Si})),n.d(e,"_cast",(function(){return ed})),n.d(e,"_debugAssert",(function(){return Qr})),n.d(e,"_isBase64Available",(function(){return Ii})),n.d(e,"_logWarn",(function(){return Gr})),n.d(e,"_validateIsNotUsedTogether",(function(){return Xh})),n.d(e,"addDoc",(function(){return np})),n.d(e,"arrayRemove",(function(){return dp})),n.d(e,"arrayUnion",(function(){return hp})),n.d(e,"clearIndexedDbPersistence",(function(){return Cd})),n.d(e,"collection",(function(){return cd})),n.d(e,"collectionGroup",(function(){return ld})),n.d(e,"connectFirestoreEmulator",(function(){return sd})),n.d(e,"deleteDoc",(function(){return ep})),n.d(e,"deleteField",(function(){return cp})),n.d(e,"disableNetwork",(function(){return kd})),n.d(e,"doc",(function(){return hd})),n.d(e,"documentId",(function(){return Ld})),n.d(e,"enableIndexedDbPersistence",(function(){return Sd})),n.d(e,"enableMultiTabIndexedDbPersistence",(function(){return Td})),n.d(e,"enableNetwork",(function(){return xd})),n.d(e,"endAt",(function(){return Ff})),n.d(e,"endBefore",(function(){return Lf})),n.d(e,"ensureFirestoreConfigured",(function(){return bd})),n.d(e,"executeWrite",(function(){return sp})),n.d(e,"getDoc",(function(){return $f})),n.d(e,"getDocFromCache",(function(){return Kf})),n.d(e,"getDocFromServer",(function(){return Qf})),n.d(e,"getDocs",(function(){return Yf})),n.d(e,"getDocsFromCache",(function(){return Xf})),n.d(e,"getDocsFromServer",(function(){return Jf})),n.d(e,"getFirestore",(function(){return _d})),n.d(e,"increment",(function(){return fp})),n.d(e,"initializeFirestore",(function(){return wd})),n.d(e,"limit",(function(){return kf})),n.d(e,"limitToLast",(function(){return Df})),n.d(e,"loadBundle",(function(){return Nd})),n.d(e,"namedQuery",(function(){return Rd})),n.d(e,"onSnapshot",(function(){return rp})),n.d(e,"onSnapshotsInSync",(function(){return ip})),n.d(e,"orderBy",(function(){return Af})),n.d(e,"query",(function(){return Sf})),n.d(e,"queryEqual",(function(){return fd})),n.d(e,"refEqual",(function(){return dd})),n.d(e,"runTransaction",(function(){return up})),n.d(e,"serverTimestamp",(function(){return lp})),n.d(e,"setDoc",(function(){return Zf})),n.d(e,"setLogLevel",(function(){return Br})),n.d(e,"snapshotEqual",(function(){return _f})),n.d(e,"startAfter",(function(){return Of})),n.d(e,"startAt",(function(){return Rf})),n.d(e,"terminate",(function(){return Dd})),n.d(e,"updateDoc",(function(){return tp})),n.d(e,"waitForPendingWrites",(function(){return Ad})),n.d(e,"where",(function(){return If})),n.d(e,"writeBatch",(function(){return pp}));const r=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const e=t[i],s=i+1<t.length,o=s?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0;let c=(15&o)<<2|u>>6,l=63&u;a||(l=64,s||(c=64)),r.push(n[e>>2],n[(3&e)<<4|o>>4],n[c],n[l])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const e=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const o=i<t.length?n[t.charAt(i)]:64;++i;const a=i<t.length?n[t.charAt(i)]:64;if(++i,null==e||null==s||null==o||null==a)throw Error();r.push(e<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},s=function(t){return function(t){const e=r(t);return i.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function o(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class a extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,u.prototype.create)}}class u{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(c,(t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new a(r,`${this.serviceName}: ${s} (${r}).`,n)}}const c=/\{\$([^}]+)}/g;function l(t){return null!==t&&"object"==typeof t}function h(t){return t&&t._delegate?t._delegate:t}class d{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const f=[];var p;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(p||(p={}));const m={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},g=p.INFO,y={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},v=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=y[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class w{constructor(t){this.name=t,this._logLevel=g,this._logHandler=v,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in p))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?m[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...t),this._logHandler(this,p.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...t),this._logHandler(this,p.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,p.INFO,...t),this._logHandler(this,p.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,p.WARN,...t),this._logHandler(this,p.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...t),this._logHandler(this,p.ERROR,...t)}}class _{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null}).filter(t=>t).join(" ")}}const b="@firebase/app",E="0.7.11",S=new w("@firebase/app"),T={[b]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},I=new Map,C=new Map;function A(t,e){try{t.container.addComponent(e)}catch(n){S.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function x(t){const e=t.name;if(C.has(e))return S.debug(`There were multiple attempts to register component ${e}.`),!1;C.set(e,t);for(const n of I.values())A(n,t);return!0}function k(t,e){return t.container.getProvider(e)}const D=new u("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});function N(t,e,n){var r;let i=null!==(r=T[t])&&void 0!==r?r:t;n&&(i+="-"+n);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${i}" with version "${e}":`];return s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void S.warn(t.join(" "))}x(new d(i+"-version",()=>({library:i,version:e}),"VERSION"))}x(new d("platform-logger",t=>new _(t),"PRIVATE")),N(b,E,""),N(b,E,"esm2017"),N("fire-js","");var R,O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},P={},L=L||{},F=O||self;function M(){}function V(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function j(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var U="closure_uid_"+(1e9*Math.random()>>>0),q=0;function B(t,e,n){return t.call.apply(t.bind,arguments)}function z(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function H(t,e,n){return(H=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?B:z).apply(null,arguments)}function G(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function $(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function W(){this.s=this.s,this.o=this.o}var K={};W.prototype.s=!1,W.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,U)&&t[U]||(t[U]=++q)}(this);delete K[t]}},W.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Y=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function X(t){return Array.prototype.concat.apply([],arguments)}function J(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Z(t){return/^[\s\xa0]*$/.test(t)}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function nt(t,e){return-1!=t.indexOf(e)}function rt(t,e){return t<e?-1:t>e?1:0}t:{var it=F.navigator;if(it){var st=it.userAgent;if(st){tt=st;break t}}tt=""}function ot(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function at(t){const e={};for(const n in t)e[n]=t[n];return e}var ut="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ct(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let e=0;e<ut.length;e++)n=ut[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function lt(t){return lt[" "](t),t}lt[" "]=M;var ht,dt,ft=nt(tt,"Opera"),pt=nt(tt,"Trident")||nt(tt,"MSIE"),mt=nt(tt,"Edge"),gt=mt||pt,yt=nt(tt,"Gecko")&&!(nt(tt.toLowerCase(),"webkit")&&!nt(tt,"Edge"))&&!(nt(tt,"Trident")||nt(tt,"MSIE"))&&!nt(tt,"Edge"),vt=nt(tt.toLowerCase(),"webkit")&&!nt(tt,"Edge");function wt(){var t=F.document;return t?t.documentMode:void 0}t:{var _t="",bt=(dt=tt,yt?/rv:([^\);]+)(\)|;)/.exec(dt):mt?/Edge\/([\d\.]+)/.exec(dt):pt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(dt):vt?/WebKit\/(\S+)/.exec(dt):ft?/(?:Version)[ \/]?(\S+)/.exec(dt):void 0);if(bt&&(_t=bt?bt[1]:""),pt){var Et=wt();if(null!=Et&&Et>parseFloat(_t)){ht=String(Et);break t}}ht=_t}var St={};var Tt=F.document&&pt&&(wt()||parseInt(ht,10))||void 0,It=function(){if(!F.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{F.addEventListener("test",M,e),F.removeEventListener("test",M,e)}catch(n){}return t}();function Ct(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function At(t,e){if(Ct.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(yt){t:{try{lt(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:xt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&At.Z.h.call(this)}}Ct.prototype.h=function(){this.defaultPrevented=!0},$(At,Ct);var xt={2:"touch",3:"pen",4:"mouse"};At.prototype.h=function(){At.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var kt="closure_listenable_"+(1e6*Math.random()|0),Dt=0;function Nt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Dt,this.ca=this.fa=!1}function Rt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ot(t){this.src=t,this.g={},this.h=0}function Pt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Q(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Rt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Lt(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}Ot.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Lt(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Nt(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var Ft="closure_lm_"+(1e6*Math.random()|0),Mt={};function Vt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,s){if(Array.isArray(n)){for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);return null}return r=Gt(r),e&&e[kt]?e.O(n,r,j(i)?!!i.capture:!!i,s):jt(e,n,r,!0,i,s)}(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Vt(t,e[s],n,r,i);return null}return n=Gt(n),t&&t[kt]?t.N(e,n,j(r)?!!r.capture:!!r,i):jt(t,e,n,!1,r,i)}function jt(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=j(i)?!!i.capture:!!i,a=zt(t);if(a||(t[Ft]=a=new Ot(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=Bt;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)It||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(qt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ut(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[kt])Pt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(qt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=zt(e))?(Pt(n,t),0==n.h&&(n.src=null,e[Ft]=null)):Rt(t)}}}function qt(t){return t in Mt?Mt[t]:Mt[t]="on"+t}function Bt(t,e){if(t.ca)t=!0;else{e=new At(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Ut(t),t=n.call(r,e)}return t}function zt(t){return(t=t[Ft])instanceof Ot?t:null}var Ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gt(t){return"function"==typeof t?t:(t[Ht]||(t[Ht]=function(e){return t.handleEvent(e)}),t[Ht])}function $t(){W.call(this),this.i=new Ot(this),this.P=this,this.I=null}function Wt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Ct(e,t);else if(e instanceof Ct)e.target=e.target||t;else{var i=e;ct(e=new Ct(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Kt(o,r,!0,e)&&i}if(i=Kt(o=e.g=t,r,!0,e)&&i,i=Kt(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Kt(o=e.g=n[s],r,!1,e)&&i}function Kt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Pt(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}$($t,W),$t.prototype[kt]=!0,$t.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,s){if(Array.isArray(n))for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);else i=j(i)?!!i.capture:!!i,r=Gt(r),e&&e[kt]?(e=e.i,(n=String(n).toString())in e.g&&-1<(r=Lt(o=e.g[n],r,i,s))&&(Rt(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete e.g[n],e.h--))):e&&(e=zt(e))&&(n=e.g[n.toString()],e=-1,n&&(e=Lt(n,r,i,s)),(r=-1<e?n[e]:null)&&Ut(r))}(this,t,e,n,r)},$t.prototype.M=function(){if($t.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Rt(n[r]);delete e.g[t],e.h--}}this.I=null},$t.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},$t.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Qt=F.JSON.stringify;function Yt(){var t=re;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Xt,Jt=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Zt,t=>t.reset());class Zt{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function te(t){F.setTimeout(()=>{throw t},0)}function ee(t,e){Xt||function(){var t=F.Promise.resolve(void 0);Xt=function(){t.then(ie)}}(),ne||(Xt(),ne=!0),re.add(t,e)}var ne=!1,re=new class{constructor(){this.h=this.g=null}add(t,e){const n=Jt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function ie(){for(var t;t=Yt();){try{t.h.call(t.g)}catch(n){te(n)}var e=Jt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ne=!1}function se(t,e){$t.call(this),this.h=t||1,this.g=e||F,this.j=H(this.kb,this),this.l=Date.now()}function oe(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function ae(t,e,n){if("function"==typeof t)n&&(t=H(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=H(t.handleEvent,t)}return 2147483647<Number(e)?-1:F.setTimeout(t,e||0)}$(se,$t),(R=se.prototype).da=!1,R.S=null,R.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wt(this,"tick"),this.da&&(oe(this),this.start()))}},R.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},R.M=function(){se.Z.M.call(this),oe(this),delete this.g};class ue extends W{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:function t(e){e.g=ae(()=>{e.g=null,e.i&&(e.i=!1,t(e))},e.j);const n=e.h;e.h=null,e.m.apply(null,n)}(this)}M(){super.M(),this.g&&(F.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(t){W.call(this),this.h=t,this.g={}}$(ce,W);var le=[];function he(t,e,n,r){Array.isArray(n)||(n&&(le[0]=n.toString()),n=le);for(var i=0;i<n.length;i++){var s=Vt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function de(t){ot(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Ut(t)}),t),t.g={}}function fe(){this.g=!0}function pe(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Qt(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}ce.prototype.M=function(){ce.Z.M.call(this),de(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fe.prototype.Aa=function(){this.g=!1},fe.prototype.info=function(){};var me={},ge=null;function ye(){return ge=ge||new $t}function ve(t){Ct.call(this,me.Ma,t)}function we(t){const e=ye();Wt(e,new ve(e,t))}function _e(t,e){Ct.call(this,me.STAT_EVENT,t),this.stat=e}function be(t){const e=ye();Wt(e,new _e(e,t))}function Ee(t,e){Ct.call(this,me.Na,t),this.size=e}function Se(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return F.setTimeout((function(){t()}),e)}me.Ma="serverreachability",$(ve,Ct),me.STAT_EVENT="statevent",$(_e,Ct),me.Na="timingevent",$(Ee,Ct);var Te={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ie={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ce(){}function Ae(){}Ce.prototype.h=null;var xe,ke={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function De(){Ct.call(this,"d")}function Ne(){Ct.call(this,"c")}function Re(){}function Oe(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new ce(this),this.P=Le,this.W=new se(t=gt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}$(De,Ct),$(Ne,Ct),$(Re,Ce),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},xe=new Re;var Le=45e3,Fe={},Me={};function Ve(t,e,n){t.K=1,t.v=un(en(e)),t.s=n,t.U=!0,je(t,null)}function je(t,e){t.F=Date.now(),ze(t),t.A=en(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),bn(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Pe,t.g=br(t.l,n?e:null,!t.s),0<t.O&&(t.L=new ue(H(t.Ia,t,t.g),t.O)),he(t.V,t.g,"readystatechange",t.gb),e=t.H?at(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),we(1),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Ue(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function qe(t,e,n){let r,i=!0;for(;!t.I&&t.C<n.length;){if(r=Be(t,n),r==Me){4==e&&(t.o=4,be(14),i=!1),pe(t.j,t.m,null,"[Incomplete Response]");break}if(r==Fe){t.o=4,be(15),pe(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}pe(t.j,t.m,r,null),Ke(t,r)}Ue(t)&&r!=Me&&r!=Fe&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,be(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),fr(e),e.L=!0,be(11))):(pe(t.j,t.m,n,"[Invalid Chunked Response]"),We(t),$e(t))}function Be(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Me:(n=Number(e.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>e.length?Me:(e=e.substr(r,n),t.C=r+n,e))}function ze(t){t.Y=Date.now()+t.P,He(t,t.P)}function He(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Se(H(t.eb,t),e)}function Ge(t){t.B&&(F.clearTimeout(t.B),t.B=null)}function $e(t){0==t.l.G||t.I||gr(t.l,t)}function We(t){Ge(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,oe(t.W),de(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ke(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||An(n.i,t)))if(n.I=t.N,!t.J&&An(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;mr(n),ir(n)}dr(n),be(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Se(H(n.ab,n),6e3));if(1>=Cn(n.i)&&n.ka){try{n.ka()}catch(c){}n.ka=void 0}}else vr(n,11)}else if((t.J||n.g==t)&&mr(n),!Z(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const e=c[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const i=c[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=c[5];null!=l&&"number"==typeof l&&0<l&&(n.K=r=1.5*l,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;!s.g&&(nt(t,"spdy")||nt(t,"quic")||nt(t,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(xn(s,s.h),s.h=null))}if(r.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.sa=t,an(r.F,r.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((r=n).oa=_r(r,r.H?r.la:null,r.W),o.J){kn(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(Ge(a),ze(a)),r.g=o}else hr(r);0<n.l.length&&ar(n)}else"stop"!=c[0]&&"close"!=c[0]||vr(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?vr(n,7):rr(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}we(4)}catch(c){}}function Qe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(V(t)||"string"==typeof t)Y(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(V(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(V(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Ye(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ye)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Xe(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Je(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Je(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Je(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(R=Oe.prototype).setTimeout=function(t){this.P=t},R.gb=function(t){t=t.target;const e=this.L;e&&3==Jn(t)?e.l():this.Ia(t)},R.Ia=function(t){try{if(t==this.g)t:{const l=Jn(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||gt||this.g&&(this.h.h||this.g.ga()||Zn(this.g)))){this.I||4!=l||7==e||we(8==e||0>=h?3:2),Ge(this);var n=this.g.ba();this.N=n;e:if(Ue(this)){var r=Zn(this.g);t="";var i=r.length,s=4==Jn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){We(this),$e(this);var o="";break e}this.h.i=new F.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.o=3,be(12),We(this),$e(this);break t}pe(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ke(this,n)}this.U?(qe(this,l,o),gt&&this.i&&3==l&&(he(this.V,this.W,"tick",this.fb),this.W.start())):(pe(this.j,this.m,o,null),Ke(this,o)),4==l&&We(this),this.i&&!this.I&&(4==l?gr(this.l,this):(this.i=!1,ze(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,be(12)):(this.o=0,be(13)),We(this),$e(this)}}}catch(l){}},R.fb=function(){if(this.g){var t=Jn(this.g),e=this.g.ga();this.C<e.length&&(Ge(this),qe(this,t,e),this.i&&4!=t&&ze(this))}},R.cancel=function(){this.I=!0,We(this)},R.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(we(3),be(17)),We(this),this.o=2,$e(this)):He(this,this.Y-t)},(R=Ye.prototype).R=function(){Xe(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},R.T=function(){return Xe(this),this.g.concat()},R.get=function(t,e){return Je(this.h,t)?this.h[t]:e},R.set=function(t,e){Je(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},R.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var Ze=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tn(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof tn){this.g=void 0!==e?e:t.g,nn(this,t.j),this.s=t.s,rn(this,t.i),sn(this,t.m),this.l=t.l,e=t.h;var n=new yn;n.i=e.i,e.g&&(n.g=new Ye(e.g),n.h=e.h),on(this,n),this.o=t.o}else t&&(n=String(t).match(Ze))?(this.g=!!e,nn(this,n[1]||"",!0),this.s=cn(n[2]||""),rn(this,n[3]||"",!0),sn(this,n[4]),this.l=cn(n[5]||"",!0),on(this,n[6]||"",!0),this.o=cn(n[7]||"")):(this.g=!!e,this.h=new yn(null,this.g))}function en(t){return new tn(t)}function nn(t,e,n){t.j=n?cn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function rn(t,e,n){t.i=n?cn(e,!0):e}function sn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function on(t,e,n){e instanceof yn?(t.h=e,function(t,e){e&&!t.j&&(vn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(wn(this,e),bn(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=ln(e,mn)),t.h=new yn(e,t.g))}function an(t,e,n){t.h.set(e,n)}function un(t){return an(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function cn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ln(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}tn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ln(e,dn,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ln(e,dn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(ln(n,"/"==n.charAt(0)?pn:fn,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ln(n,gn)),t.join("")};var dn=/[#\/\?@]/g,fn=/[#\?:]/g,pn=/[#\?]/g,mn=/[#\?@]/g,gn=/#/g;function yn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function vn(t){t.g||(t.g=new Ye,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function wn(t,e){vn(t),e=En(t,e),Je(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Je((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Xe(t)))}function _n(t,e){return vn(t),e=En(t,e),Je(t.g.h,e)}function bn(t,e,n){wn(t,e),0<n.length&&(t.i=null,t.g.set(En(t,e),J(n)),t.h+=n.length)}function En(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Sn(t){this.l=t||Tn,t=F.PerformanceNavigationTiming?0<(t=F.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(F.g&&F.g.Ea&&F.g.Ea()&&F.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(R=yn.prototype).add=function(t,e){vn(this),this.i=null,t=En(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},R.forEach=function(t,e){vn(this),this.g.forEach((function(n,r){Y(n,(function(n){t.call(e,n,r,this)}),this)}),this)},R.T=function(){vn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},R.R=function(t){vn(this);var e=[];if("string"==typeof t)_n(this,t)&&(e=X(e,this.g.get(En(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},R.set=function(t,e){return vn(this),this.i=null,_n(this,t=En(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},R.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},R.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var Tn=10;function In(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Cn(t){return t.h?1:t.g?t.g.size:0}function An(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function xn(t,e){t.g?t.g.add(e):t.h=e}function kn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Dn(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return J(t.i)}function Nn(){}function Rn(){this.g=new Nn}function On(t,e,n){const r=n||"";try{Qe(t,(function(t,n){let i=t;j(t)&&(i=Qt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Pn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Ln(t){this.l=t.$b||null,this.j=t.ib||!1}function Fn(t,e){$t.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Mn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Sn.prototype.cancel=function(){if(this.i=Dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Nn.prototype.stringify=function(t){return F.JSON.stringify(t,void 0)},Nn.prototype.parse=function(t){return F.JSON.parse(t,void 0)},$(Ln,Ce),Ln.prototype.g=function(){return new Fn(this.l,this.j)},Ln.prototype.i=function(t){return function(){return t}}({}),$(Fn,$t);var Mn=0;function Vn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function jn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Un(t)}function Un(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(R=Fn.prototype).open=function(t,e){if(this.readyState!=Mn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Un(this)},R.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||F).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},R.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jn(this)),this.readyState=Mn},R.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Un(this)),this.g&&(this.readyState=3,Un(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==F.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Vn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},R.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?jn(this):Un(this),3==this.readyState&&Vn(this)}},R.Ua=function(t){this.g&&(this.response=this.responseText=t,jn(this))},R.Ta=function(t){this.g&&(this.response=t,jn(this))},R.ha=function(){this.g&&jn(this)},R.setRequestHeader=function(t,e){this.v.append(t,e)},R.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},R.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Fn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var qn=F.JSON.parse;function Bn(t){$t.call(this),this.headers=new Ye,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zn,this.K=this.L=!1}$(Bn,$t);var zn="",Hn=/^https?$/i,Gn=["POST","PUT"];function $n(t){return"content-type"==t.toLowerCase()}function Wn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Kn(t),Yn(t)}function Kn(t){t.D||(t.D=!0,Wt(t,"complete"),Wt(t,"error"))}function Qn(t){if(t.h&&void 0!==L&&(!t.C[1]||4!=Jn(t)||2!=t.ba()))if(t.v&&4==Jn(t))ae(t.Fa,0,t);else if(Wt(t,"readystatechange"),4==Jn(t)){t.h=!1;try{const u=t.ba();t:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===u){var i=String(t.H).match(Ze)[1]||null;if(!i&&F.self&&F.self.location){var s=F.self.location.protocol;i=s.substr(0,s.length-1)}r=!Hn.test(i?i.toLowerCase():"")}n=r}if(n)Wt(t,"complete"),Wt(t,"success");else{t.m=6;try{var o=2<Jn(t)?t.g.statusText:""}catch(a){o=""}t.j=o+" ["+t.ba()+"]",Kn(t)}}finally{Yn(t)}}}function Yn(t,e){if(t.g){Xn(t);const r=t.g,i=t.C[0]?M:null;t.g=null,t.C=null,e||Wt(t,"ready");try{r.onreadystatechange=i}catch(n){}}}function Xn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(F.clearTimeout(t.A),t.A=null)}function Jn(t){return t.g?t.g.readyState:0}function Zn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case zn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){let e="";return ot(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):an(t,e,n))}function er(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function nr(t){this.za=0,this.l=[],this.h=new fe,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=er("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=er("baseRetryDelayMs",5e3,t),this.$a=er("retryDelaySeedMs",1e4,t),this.Ya=er("forwardChannelMaxRetries",2,t),this.ra=er("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Sn(t&&t.concurrentRequestLimit),this.Ca=new Rn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function rr(t){if(sr(t),3==t.G){var e=t.V++,n=en(t.F);an(n,"SID",t.J),an(n,"RID",e),an(n,"TYPE","terminate"),cr(t,n),(e=new Oe(t,t.h,e,void 0)).K=2,e.v=un(en(n)),n=!1,F.navigator&&F.navigator.sendBeacon&&(n=F.navigator.sendBeacon(e.v.toString(),"")),!n&&F.Image&&((new Image).src=e.v,n=!0),n||(e.g=br(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ze(e)}wr(t)}function ir(t){t.g&&(fr(t),t.g.cancel(),t.g=null)}function sr(t){ir(t),t.u&&(F.clearTimeout(t.u),t.u=null),mr(t),t.i.cancel(),t.m&&("number"==typeof t.m&&F.clearTimeout(t.m),t.m=null)}function or(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&ar(t)}function ar(t){In(t.i)||t.m||(t.m=!0,ee(t.Ha,t),t.C=0)}function ur(t,e){var n;n=e?e.m:t.V++;const r=en(t.F);an(r,"SID",t.J),an(r,"RID",n),an(r,"AID",t.U),cr(t,r),t.o&&t.s&&tr(r,t.o,t.s),n=new Oe(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=lr(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),xn(t.i,n),Ve(n,r,e)}function cr(t,e){t.j&&Qe({},(function(t,n){an(e,n,t)}))}function lr(t,e,n){n=Math.min(t.l.length,n);var r=t.j?H(t.j.Oa,t.j,t):null;t:{var i=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=e,0>n)e=Math.max(0,i[o].h-100),s=!1;else try{On(a,t,"req"+n+"_")}catch(ei){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,r}function hr(t){t.g||t.u||(t.Y=1,ee(t.Ga,t),t.A=0)}function dr(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Se(H(t.Ga,t),yr(t,t.A)),t.A++,0))}function fr(t){null!=t.B&&(F.clearTimeout(t.B),t.B=null)}function pr(t){t.g=new Oe(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=en(t.oa);an(e,"RID","rpc"),an(e,"SID",t.J),an(e,"CI",t.N?"0":"1"),an(e,"AID",t.U),cr(t,e),an(e,"TYPE","xmlhttp"),t.o&&t.s&&tr(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=un(en(e)),n.s=null,n.U=!0,je(n,t)}function mr(t){null!=t.v&&(F.clearTimeout(t.v),t.v=null)}function gr(t,e){var n=null;if(t.g==e){mr(t),fr(t),t.g=null;var r=2}else{if(!An(t.i,e))return;n=e.D,kn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Wt(r=ye(),new Ee(r,n,e,i)),ar(t)}else hr(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Cn(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Se(H(t.Ha,t,e),yr(t,t.C)),t.C++,0)))}(t,e)||2==r&&dr(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:vr(t,5);break;case 4:vr(t,10);break;case 3:vr(t,6);break;default:vr(t,2)}}function yr(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function vr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=H(t.jb,t);n||(n=new tn("//www.google.com/images/cleardot.gif"),F.location&&"http"==F.location.protocol||nn(n,"https"),un(n)),function(t,e){const n=new fe;if(F.Image){const r=new Image;r.onload=G(Pn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=G(Pn,n,r,"TestLoadImage: error",!1,e),r.onabort=G(Pn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=G(Pn,n,r,"TestLoadImage: timeout",!1,e),F.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else be(2);t.G=0,t.j&&t.j.va(e),wr(t),sr(t)}function wr(t){t.G=0,t.I=-1,t.j&&(0==Dn(t.i).length&&0==t.l.length||(t.i.i.length=0,J(t.l),t.l.length=0),t.j.ua())}function _r(t,e,n){let r=function(t){return t instanceof tn?en(t):new tn(t,void 0)}(n);if(""!=r.i)e&&rn(r,e+"."+r.i),sn(r,r.m);else{const t=F.location;r=function(t,e,n,r){var i=new tn(null,void 0);return t&&nn(i,t),e&&rn(i,e),n&&sn(i,n),r&&(i.l=r),i}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&ot(t.aa,(function(t,e){an(r,e,t)})),n=t.sa,(e=t.D)&&n&&an(r,e,n),an(r,"VER",t.ma),cr(t,r),r}function br(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Bn(n&&t.Ba&&!t.qa?new Ln({ib:!0}):t.qa)).L=t.H,e}function Er(){}function Sr(){if(pt&&!(10<=Number(Tt)))throw Error("Environmental error: no available transport.")}function Tr(t,e){$t.call(this),this.g=new nr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Z(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Z(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ar(this)}function Ir(t){De.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Cr(){Ne.call(this),this.status=1}function Ar(t){this.g=t}(R=Bn.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xe.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:xe),this.g.onreadystatechange=H(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void Wn(this,s)}t=n||"";const i=new Ye(this.headers);r&&Qe(r,(function(t,e){i.set(e,t)})),r=function(t){t:{var e=$n;const n=t.length,r="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=F.FormData&&t instanceof F.FormData,!(0<=Q(Gn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xn(this),0<this.B&&((this.K=function(t){return pt&&function(){return t=St,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=et(String(ht)).split("."),n=et("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=rt(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||rt(0==i[2].length,0==s[2].length)||rt(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=H(this.pa,this)):this.A=ae(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Wn(this,s)}},R.pa=function(){void 0!==L&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wt(this,"timeout"),this.abort(8))},R.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Wt(this,"complete"),Wt(this,"abort"),Yn(this))},R.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yn(this,!0)),Bn.Z.M.call(this)},R.Fa=function(){this.s||(this.F||this.v||this.l?Qn(this):this.cb())},R.cb=function(){Qn(this)},R.ba=function(){try{return 2<Jn(this)?this.g.status:-1}catch(dt){return-1}},R.ga=function(){try{return this.g?this.g.responseText:""}catch(dt){return""}},R.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),qn(e)}},R.Da=function(){return this.m},R.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(R=nr.prototype).ma=8,R.G=1,R.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},R.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new Oe(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=at(s),ct(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=lr(this,i,e),an(n=en(this.F),"RID",t),an(n,"CVER",22),this.D&&an(n,"X-HTTP-Session-Id",this.D),cr(this,n),this.o&&s&&tr(n,this.o,s),xn(this.i,i),this.Ra&&an(n,"TYPE","init"),this.ja?(an(n,"$req",e),an(n,"SID","null"),i.$=!0,Ve(i,n,null)):Ve(i,n,e),this.G=2}}else 3==this.G&&(t?ur(this,t):0==this.l.length||In(this.i)||ur(this))},R.Ga=function(){if(this.u=null,pr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Se(H(this.bb,this),t)}},R.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,be(10),ir(this),pr(this))},R.ab=function(){null!=this.v&&(this.v=null,ir(this),dr(this),be(19))},R.jb=function(t){t?(this.h.info("Successfully pinged google.com"),be(2)):(this.h.info("Failed to ping google.com"),be(1))},(R=Er.prototype).xa=function(){},R.wa=function(){},R.va=function(){},R.ua=function(){},R.Oa=function(){},Sr.prototype.g=function(t,e){return new Tr(t,e)},$(Tr,$t),Tr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),ee(H(t.hb,t,e))),be(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=_r(t,null,t.W),ar(t)},Tr.prototype.close=function(){rr(this.g)},Tr.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,or(this.g,e)}else this.v?((e={}).__data__=Qt(t),or(this.g,e)):or(this.g,t)},Tr.prototype.M=function(){this.g.j=null,delete this.j,rr(this.g),delete this.g,Tr.Z.M.call(this)},$(Ir,De),$(Cr,Ne),$(Ar,Er),Ar.prototype.xa=function(){Wt(this.g,"a")},Ar.prototype.wa=function(t){Wt(this.g,new Ir(t))},Ar.prototype.va=function(t){Wt(this.g,new Cr(t))},Ar.prototype.ua=function(){Wt(this.g,"b")},Sr.prototype.createWebChannel=Sr.prototype.g,Tr.prototype.send=Tr.prototype.u,Tr.prototype.open=Tr.prototype.m,Tr.prototype.close=Tr.prototype.close,Te.NO_ERROR=0,Te.TIMEOUT=8,Te.HTTP_ERROR=6,Ie.COMPLETE="complete",Ae.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",$t.prototype.listen=$t.prototype.N,Bn.prototype.listenOnce=Bn.prototype.O,Bn.prototype.getLastError=Bn.prototype.La,Bn.prototype.getLastErrorCode=Bn.prototype.Da,Bn.prototype.getStatus=Bn.prototype.ba,Bn.prototype.getResponseJson=Bn.prototype.Qa,Bn.prototype.getResponseText=Bn.prototype.ga,Bn.prototype.send=Bn.prototype.ea;var xr=P.createWebChannelTransport=function(){return new Sr},kr=P.getStatEventTarget=function(){return ye()},Dr=P.ErrorCode=Te,Nr=P.EventType=Ie,Rr=P.Event=me,Or=P.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Pr=P.FetchXmlHttpFactory=Ln,Lr=P.WebChannel=Ae,Fr=P.XhrIo=Bn;const Mr="@firebase/firestore";class Vr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Vr.UNAUTHENTICATED=new Vr(null),Vr.GOOGLE_CREDENTIALS=new Vr("google-credentials-uid"),Vr.FIRST_PARTY=new Vr("first-party-uid"),Vr.MOCK_USER=new Vr("mock-user");let jr="9.6.1";const Ur=new w("@firebase/firestore");function qr(){return Ur.logLevel}function Br(t){Ur.setLogLevel(t)}function zr(t,...e){if(Ur.logLevel<=p.DEBUG){const n=e.map($r);Ur.debug(`Firestore (${jr}): ${t}`,...n)}}function Hr(t,...e){if(Ur.logLevel<=p.ERROR){const n=e.map($r);Ur.error(`Firestore (${jr}): ${t}`,...n)}}function Gr(t,...e){if(Ur.logLevel<=p.WARN){const n=e.map($r);Ur.warn(`Firestore (${jr}): ${t}`,...n)}}function $r(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function Wr(t="Unexpected state"){const e=`FIRESTORE (${jr}) INTERNAL ASSERTION FAILED: `+t;throw Hr(e),new Error(e)}function Kr(t,e){t||Wr()}function Qr(t,e){t||Wr()}function Yr(t,e){return t}const Xr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jr extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class ti{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer "+t)}}class ei{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Vr.UNAUTHENTICATED))}shutdown(){}}class ni{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class ri{constructor(t){this.t=t,this.currentUser=Vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zr,t.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const e=i;t.enqueueRetryable(async()=>{await e.promise,await r(this.currentUser)})},o=t=>{zr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(t=>o(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(zr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zr)}},0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(zr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Kr("string"==typeof e.accessToken),new ti(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Kr(null===t||"string"==typeof t),new Vr(t)}}class ii{constructor(t,e,n){this.type="FirstParty",this.user=Vr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class si{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new ii(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ai{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null}start(t,e){this.o=n=>{t.enqueueRetryable(()=>(t=>(null!=t.error&&zr("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: "+t.error.message),e(t.token)))(n))};const n=t=>{zr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.g.onInit(t=>n(t)),setTimeout(()=>{if(!this.appCheck){const t=this.g.getImmediate({optional:!0});t?n(t):zr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(t=>t?(Kr("string"==typeof t.token),new oi(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ui{getToken(){return Promise.resolve(new oi(""))}invalidateToken(){}start(t,e){}shutdown(){}}class ci{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.p(t),this.T=t=>e.writeSequenceNumber(t))}p(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function li(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}ci.I=-1;class hi{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=li(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length))}return n}}function di(t,e){return t<e?-1:t>e?1:0}function fi(t,e,n){return t.length===e.length&&t.every((t,r)=>n(t,e[r]))}function pi(t){return t+"\0"}class mi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Jr(Xr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Jr(Xr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Jr(Xr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Jr(Xr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return mi.fromMillis(Date.now())}static fromDate(t){return mi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new mi(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?di(this.nanoseconds,t.nanoseconds):di(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class gi{constructor(t){this.timestamp=t}static fromTimestamp(t){return new gi(t)}static min(){return new gi(new mi(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function yi(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wi(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class _i{constructor(t,e,n){void 0===e?e=0:e>t.length&&Wr(),void 0===n?n=t.length-e:n>t.length-e&&Wr(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===_i.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof _i?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class bi extends _i{construct(t,e,n){return new bi(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Jr(Xr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(t=>t.length>0))}return new bi(e)}static emptyPath(){return new bi([])}}const Ei=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Si extends _i{construct(t,e,n){return new Si(t,e,n)}static isValidIdentifier(t){return Ei.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Si.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Si(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Jr(Xr.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new Jr(Xr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Jr(Xr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new Jr(Xr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Si(e)}static emptyPath(){return new Si([])}}class Ti{constructor(t){this.fields=t,t.sort(Si.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return fi(this.fields,t.fields,(t,e)=>t.isEqual(e))}}function Ii(){return"undefined"!=typeof atob}let Ci=(()=>{class t{constructor(t){this.binaryString=t}static fromBase64String(e){const n=atob(e);return new t(n)}static fromUint8Array(e){const n=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e);return new t(n)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return di(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}return t.EMPTY_BYTE_STRING=new t(""),t})();const Ai=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(t){if(Kr(!!t),"string"==typeof t){let e=0;const n=Ai.exec(t);if(Kr(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ki(t.seconds),nanos:ki(t.nanos)}}function ki(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Di(t){return"string"==typeof t?Ci.fromBase64String(t):Ci.fromUint8Array(t)}function Ni(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ri(t){const e=xi(t.mapValue.fields.__local_write_time__.timestampValue);return new mi(e.seconds,e.nanos)}function Oi(t){return null==t}function Pi(t){return 0===t&&1/t==-1/0}function Li(t){return"number"==typeof t&&Number.isInteger(t)&&!Pi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class Fi{constructor(t){this.path=t}static fromPath(t){return new Fi(bi.fromString(t))}static fromName(t){return new Fi(bi.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===bi.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return bi.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Fi(new bi(t.slice()))}}function Mi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ni(t)?4:10:Wr()}function Vi(t,e){const n=Mi(t);if(n!==Mi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ri(t).isEqual(Ri(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=xi(t.timestampValue),r=xi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Di(t.bytesValue).isEqual(Di(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ki(t.geoPointValue.latitude)===ki(e.geoPointValue.latitude)&&ki(t.geoPointValue.longitude)===ki(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ki(t.integerValue)===ki(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=ki(t.doubleValue),r=ki(e.doubleValue);return n===r?Pi(n)===Pi(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return fi(t.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(yi(n)!==yi(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Vi(n[i],r[i])))return!1;return!0}(t,e);default:return Wr()}}function ji(t,e){return void 0!==(t.values||[]).find(t=>Vi(t,e))}function Ui(t,e){const n=Mi(t),r=Mi(e);if(n!==r)return di(n,r);switch(n){case 0:return 0;case 1:return di(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=ki(t.integerValue||t.doubleValue),r=ki(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return qi(t.timestampValue,e.timestampValue);case 4:return qi(Ri(t),Ri(e));case 5:return di(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Di(t),r=Di(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let i=0;i<n.length&&i<r.length;i++){const t=di(n[i],r[i]);if(0!==t)return t}return di(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=di(ki(t.latitude),ki(e.latitude));return 0!==n?n:di(ki(t.longitude),ki(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const t=Ui(n[i],r[i]);if(t)return t}return di(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const t=di(r[o],s[o]);if(0!==t)return t;const e=Ui(n[r[o]],i[s[o]]);if(0!==e)return e}return di(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Wr()}}function qi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return di(t,e);const n=xi(t),r=xi(e),i=di(n.seconds,r.seconds);return 0!==i?i:di(n.nanos,r.nanos)}function Bi(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){const e=xi(t);return`time(${e.seconds},${e.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Di(e.bytesValue).toBase64():"referenceValue"in e?Fi.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(n=e.geoPointValue).latitude},${n.longitude})`:"arrayValue"in e?function(e){let n="[",r=!0;for(const i of e.values||[])r?r=!1:n+=",",n+=t(i);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){const n=Object.keys(e.fields||{}).sort();let r="{",i=!0;for(const s of n)i?i=!1:r+=",",r+=`${s}:${t(e.fields[s])}`;return r+"}"}(e.mapValue):Wr();var n}(t)}function zi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hi(t){return!!t&&"integerValue"in t}function Gi(t){return!!t&&"arrayValue"in t}function $i(t){return!!t&&"nullValue"in t}function Wi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ki(t){return!!t&&"mapValue"in t}function Qi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vi(t.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Qi(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qi(t.arrayValue.values[n]);return e}return Object.assign({},t)}class Yi{constructor(t){this.value=t}static empty(){return new Yi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Ki(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Qi(e)}setAll(t){let e=Si.emptyPath(),n={},r=[];t.forEach((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=Qi(t):r.push(i.lastSegment())});const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());Ki(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Vi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Ki(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){vi(e,(e,n)=>t[e]=n);for(const r of n)delete t[r]}clone(){return new Yi(Qi(this.value))}}function Xi(t){const e=[];return vi(t.fields,(t,n)=>{const r=new Si([t]);if(Ki(n)){const t=Xi(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)}),new Ti(e)}class Ji{constructor(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(t){return new Ji(t,0,gi.min(),Yi.empty(),0)}static newFoundDocument(t,e,n){return new Ji(t,1,e,n,0)}static newNoDocument(t,e){return new Ji(t,2,e,Yi.empty(),0)}static newUnknownDocument(t,e){return new Ji(t,3,e,Yi.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Yi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ji&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new Ji(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zi{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.R=null}}function ts(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Zi(t,e,n,r,i,s,o)}function es(t){const e=Yr(t);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(t=>function(t){return t.field.canonicalString()+t.op.toString()+Bi(t.value)}(t)).join(","),t+="|ob:",t+=e.orderBy.map(t=>function(t){return t.field.canonicalString()+t.dir}(t)).join(","),Oi(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=ps(e.startAt)),e.endAt&&(t+="|ub:",t+=ps(e.endAt)),e.R=t}return e.R}function ns(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!gs(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if((n=t.filters[i]).op!==(r=e.filters[i]).op||!n.field.isEqual(r.field)||!Vi(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vs(t.startAt,e.startAt)&&vs(t.endAt,e.endAt)}function rs(t){return Fi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class is extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.P(t,e,n):new ss(t,e,n):"array-contains"===e?new cs(t,n):"in"===e?new ls(t,n):"not-in"===e?new hs(t,n):"array-contains-any"===e?new ds(t,n):new is(t,e,n)}static P(t,e,n){return"in"===e?new os(t,n):new as(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(Ui(e,this.value)):null!==e&&Mi(this.value)===Mi(e)&&this.v(Ui(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Wr()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ss extends is{constructor(t,e,n){super(t,e,n),this.key=Fi.fromName(n.referenceValue)}matches(t){const e=Fi.comparator(t.key,this.key);return this.v(e)}}class os extends is{constructor(t,e){super(t,"in",e),this.keys=us(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class as extends is{constructor(t,e){super(t,"not-in",e),this.keys=us(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function us(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(t=>Fi.fromName(t.referenceValue))}class cs extends is{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Gi(e)&&ji(e.arrayValue,this.value)}}class ls extends is{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&ji(this.value.arrayValue,e)}}class hs extends is{constructor(t,e){super(t,"not-in",e)}matches(t){if(ji(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!ji(this.value.arrayValue,e)}}class ds extends is{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Gi(e)||!e.arrayValue.values)&&e.arrayValue.values.some(t=>ji(this.value.arrayValue,t))}}class fs{constructor(t,e){this.position=t,this.before=e}}function ps(t){return`${t.before?"b":"a"}:${t.position.map(t=>Bi(t)).join(",")}`}class ms{constructor(t,e="asc"){this.field=t,this.dir=e}}function gs(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ys(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Fi.comparator(Fi.fromName(o.referenceValue),n.key):Ui(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function vs(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vi(t.position[n],e.position[n]))return!1;return!0}class ws{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.S=null,this.D=null}}function _s(t,e,n,r,i,s,o,a){return new ws(t,e,n,r,i,s,o,a)}function bs(t){return new ws(t)}function Es(t){return!Oi(t.limit)&&"F"===t.limitType}function Ss(t){return!Oi(t.limit)&&"L"===t.limitType}function Ts(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Is(t){for(const e of t.filters)if(e.V())return e.field;return null}function Cs(t){return null!==t.collectionGroup}function As(t){const e=Yr(t);if(null===e.S){e.S=[];const t=Is(e),n=Ts(e);if(null!==t&&null===n)t.isKeyField()||e.S.push(new ms(t)),e.S.push(new ms(Si.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.S.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new ms(Si.keyField(),t))}}}return e.S}function xs(t){const e=Yr(t);if(!e.D)if("F"===e.limitType)e.D=ts(e.path,e.collectionGroup,As(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const i of As(e))t.push(new ms(i.field,"desc"===i.dir?"asc":"desc"));const n=e.endAt?new fs(e.endAt.position,!e.endAt.before):null,r=e.startAt?new fs(e.startAt.position,!e.startAt.before):null;e.D=ts(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e.D}function ks(t,e,n){return new ws(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ds(t,e){return ns(xs(t),xs(e))&&t.limitType===e.limitType}function Ns(t){return`${es(xs(t))}|lt:${t.limitType}`}function Rs(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(t=>{return`${(e=t).field.canonicalString()} ${e.op} ${Bi(e.value)}`;var e}).join(", ")}]`),Oi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t)).join(", ")}]`),t.startAt&&(e+=", startAt: "+ps(t.startAt)),t.endAt&&(e+=", endAt: "+ps(t.endAt)),`Target(${e})`}(xs(t))}; limitType=${t.limitType})`}function Os(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Fi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ys(t.startAt,As(t),e)||t.endAt&&ys(t.endAt,As(t),e))}(t,e)}function Ps(t){return(e,n)=>{let r=!1;for(const i of As(t)){const t=Ls(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function Ls(t,e,n){const r=t.field.isKeyField()?Fi.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ui(r,i):Wr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Wr()}}function Fs(t,e){if(t.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pi(e)?"-0":e}}function Ms(t){return{integerValue:""+t}}function Vs(t,e){return Li(e)?Ms(e):Fs(t,e)}class js{constructor(){this._=void 0}}function Us(t,e,n){return t instanceof zs?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Hs?Gs(t,e):t instanceof $s?Ws(t,e):function(t,e){const n=Bs(t,e),r=Qs(n)+Qs(t.N);return Hi(n)&&Hi(t.N)?Ms(r):Fs(t.k,r)}(t,e)}function qs(t,e,n){return t instanceof Hs?Gs(t,e):t instanceof $s?Ws(t,e):n}function Bs(t,e){return t instanceof Ks?Hi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class zs extends js{}class Hs extends js{constructor(t){super(),this.elements=t}}function Gs(t,e){const n=Ys(e);for(const r of t.elements)n.some(t=>Vi(t,r))||n.push(r);return{arrayValue:{values:n}}}class $s extends js{constructor(t){super(),this.elements=t}}function Ws(t,e){let n=Ys(e);for(const r of t.elements)n=n.filter(t=>!Vi(t,r));return{arrayValue:{values:n}}}class Ks extends js{constructor(t,e){super(),this.k=t,this.N=e}}function Qs(t){return ki(t.integerValue||t.doubleValue)}function Ys(t){return Gi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Xs{constructor(t,e){this.field=t,this.transform=e}}class Js{constructor(t,e){this.version=t,this.transformResults=e}}class Zs{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Zs}static exists(t){return new Zs(void 0,t)}static updateTime(t){return new Zs(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function to(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class eo{}function no(t,e,n){t instanceof ao?function(t,e,n){const r=t.value.clone(),i=lo(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof uo?function(t,e,n){if(!to(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=lo(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(co(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ro(t,e,n){t instanceof ao?function(t,e,n){if(!to(t.precondition,e))return;const r=t.value.clone(),i=ho(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(oo(e),r).setHasLocalMutations()}(t,e,n):t instanceof uo?function(t,e,n){if(!to(t.precondition,e))return;const r=ho(t.fieldTransforms,n,e),i=e.data;i.setAll(co(t)),i.setAll(r),e.convertToFoundDocument(oo(e),i).setHasLocalMutations()}(t,e,n):function(t,e){to(t.precondition,e)&&e.convertToNoDocument(gi.min())}(t,e)}function io(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=Bs(r.transform,t||null);null!=i&&(null==n&&(n=Yi.empty()),n.set(r.field,i))}return n||null}function so(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&fi(t,e,(t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Hs&&e instanceof Hs||t instanceof $s&&e instanceof $s?fi(t.elements,e.elements,Vi):t instanceof Ks&&e instanceof Ks?Vi(t.N,e.N):t instanceof zs&&e instanceof zs}(t.transform,e.transform)}(t,e))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function oo(t){return t.isFoundDocument()?t.version:gi.min()}class ao extends eo{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}}class uo extends eo{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function co(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lo(t,e,n){const r=new Map;Kr(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,qs(o,a,n[i]))}return r}function ho(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,Us(t,s,e))}return r}class fo extends eo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class po extends eo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class mo{constructor(t){this.count=t}}var go,yo;function vo(t){switch(t){default:return Wr();case Xr.CANCELLED:case Xr.UNKNOWN:case Xr.DEADLINE_EXCEEDED:case Xr.RESOURCE_EXHAUSTED:case Xr.INTERNAL:case Xr.UNAVAILABLE:case Xr.UNAUTHENTICATED:return!1;case Xr.INVALID_ARGUMENT:case Xr.NOT_FOUND:case Xr.ALREADY_EXISTS:case Xr.PERMISSION_DENIED:case Xr.FAILED_PRECONDITION:case Xr.ABORTED:case Xr.OUT_OF_RANGE:case Xr.UNIMPLEMENTED:case Xr.DATA_LOSS:return!0}}function wo(t){if(void 0===t)return Hr("GRPC error has no .code"),Xr.UNKNOWN;switch(t){case go.OK:return Xr.OK;case go.CANCELLED:return Xr.CANCELLED;case go.UNKNOWN:return Xr.UNKNOWN;case go.DEADLINE_EXCEEDED:return Xr.DEADLINE_EXCEEDED;case go.RESOURCE_EXHAUSTED:return Xr.RESOURCE_EXHAUSTED;case go.INTERNAL:return Xr.INTERNAL;case go.UNAVAILABLE:return Xr.UNAVAILABLE;case go.UNAUTHENTICATED:return Xr.UNAUTHENTICATED;case go.INVALID_ARGUMENT:return Xr.INVALID_ARGUMENT;case go.NOT_FOUND:return Xr.NOT_FOUND;case go.ALREADY_EXISTS:return Xr.ALREADY_EXISTS;case go.PERMISSION_DENIED:return Xr.PERMISSION_DENIED;case go.FAILED_PRECONDITION:return Xr.FAILED_PRECONDITION;case go.ABORTED:return Xr.ABORTED;case go.OUT_OF_RANGE:return Xr.OUT_OF_RANGE;case go.UNIMPLEMENTED:return Xr.UNIMPLEMENTED;case go.DATA_LOSS:return Xr.DATA_LOSS;default:return Wr()}}(yo=go||(go={}))[yo.OK=0]="OK",yo[yo.CANCELLED=1]="CANCELLED",yo[yo.UNKNOWN=2]="UNKNOWN",yo[yo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yo[yo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yo[yo.NOT_FOUND=5]="NOT_FOUND",yo[yo.ALREADY_EXISTS=6]="ALREADY_EXISTS",yo[yo.PERMISSION_DENIED=7]="PERMISSION_DENIED",yo[yo.UNAUTHENTICATED=16]="UNAUTHENTICATED",yo[yo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yo[yo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yo[yo.ABORTED=10]="ABORTED",yo[yo.OUT_OF_RANGE=11]="OUT_OF_RANGE",yo[yo.UNIMPLEMENTED=12]="UNIMPLEMENTED",yo[yo.INTERNAL=13]="INTERNAL",yo[yo.UNAVAILABLE=14]="UNAVAILABLE",yo[yo.DATA_LOSS=15]="DATA_LOSS";class _o{constructor(t,e){this.comparator=t,this.root=e||Eo.EMPTY}insert(t,e){return new _o(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Eo.BLACK,null,null))}remove(t){return new _o(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Eo.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bo(this.root,t,this.comparator,!1)}getReverseIterator(){return new bo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bo(this.root,t,this.comparator,!0)}}class bo{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Eo{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Eo.RED,this.left=null!=r?r:Eo.EMPTY,this.right=null!=i?i:Eo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new Eo(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Eo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Eo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Eo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Eo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wr();if(this.right.isRed())throw Wr();const t=this.left.check();if(t!==this.right.check())throw Wr();return t+(this.isRed()?0:1)}}Eo.EMPTY=null,Eo.RED=!0,Eo.BLACK=!1,Eo.EMPTY=new class{constructor(){this.size=0}get key(){throw Wr()}get value(){throw Wr()}get color(){throw Wr()}get left(){throw Wr()}get right(){throw Wr()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Eo(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class So{constructor(t){this.comparator=t,this.data=new _o(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new To(this.data.getIterator())}getIteratorFrom(t){return new To(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof So))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new So(this.comparator);return e.data=t,e}}class To{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Io=new _o(Fi.comparator);function Co(){return Io}const Ao=new _o(Fi.comparator);function xo(){return Ao}const ko=new _o(Fi.comparator);function Do(){return ko}const No=new So(Fi.comparator);function Ro(...t){let e=No;for(const n of t)e=e.add(n);return e}const Oo=new So(di);function Po(){return Oo}class Lo{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,Fo.createSynthesizedTargetChangeForCurrentChange(t,e)),new Lo(gi.min(),n,Po(),Co(),Ro())}}class Fo{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Fo(Ci.EMPTY_BYTE_STRING,e,Ro(),Ro(),Ro())}}class Mo{constructor(t,e,n,r){this.$=t,this.removedTargetIds=e,this.key=n,this.F=r}}class Vo{constructor(t,e){this.targetId=t,this.O=e}}class jo{constructor(t,e,n=Ci.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class Uo{constructor(){this.M=0,this.L=zo(),this.B=Ci.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(t){t.approximateByteSize()>0&&(this.q=!0,this.B=t)}G(){let t=Ro(),e=Ro(),n=Ro();return this.L.forEach((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Wr()}}),new Fo(this.B,this.U,t,e,n)}H(){this.q=!1,this.L=zo()}J(t,e){this.q=!0,this.L=this.L.insert(t,e)}Y(t){this.q=!0,this.L=this.L.remove(t)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class qo{constructor(t){this.et=t,this.nt=new Map,this.st=Co(),this.it=Bo(),this.rt=new So(di)}ot(t){for(const e of t.$)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ut(t){this.forEachTarget(t,e=>{const n=this.ht(e);switch(t.state){case 0:this.lt(e)&&n.W(t.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(t.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(e);break;case 3:this.lt(e)&&(n.tt(),n.W(t.resumeToken));break;case 4:this.lt(e)&&(this.ft(e),n.W(t.resumeToken));break;default:Wr()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.nt.forEach((t,n)=>{this.lt(n)&&e(n)})}dt(t){const e=t.targetId,n=t.O.count,r=this.wt(e);if(r){const t=r.target;if(rs(t))if(0===n){const n=new Fi(t.path);this.ct(e,n,Ji.newNoDocument(n,gi.min()))}else Kr(1===n);else this._t(e)!==n&&(this.ft(e),this.rt=this.rt.add(e))}}gt(t){const e=new Map;this.nt.forEach((n,r)=>{const i=this.wt(r);if(i){if(n.current&&rs(i.target)){const e=new Fi(i.target.path);null!==this.st.get(e)||this.yt(r,e)||this.ct(r,e,Ji.newNoDocument(e,t))}n.j&&(e.set(r,n.G()),n.H())}});let n=Ro();this.it.forEach((t,e)=>{let r=!0;e.forEachWhile(t=>{const e=this.wt(t);return!e||2===e.purpose||(r=!1,!1)}),r&&(n=n.add(t))});const r=new Lo(t,e,this.rt,this.st,n);return this.st=Co(),this.it=Bo(),this.rt=new So(di),r}at(t,e){if(!this.lt(t))return;const n=this.yt(t,e.key)?2:0;this.ht(t).J(e.key,n),this.st=this.st.insert(e.key,e),this.it=this.it.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,n){if(!this.lt(t))return;const r=this.ht(t);this.yt(t,e)?r.J(e,1):r.Y(e),this.it=this.it.insert(e,this.Tt(e).delete(t)),n&&(this.st=this.st.insert(e,n))}removeTarget(t){this.nt.delete(t)}_t(t){const e=this.ht(t).G();return this.et.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}X(t){this.ht(t).X()}ht(t){let e=this.nt.get(t);return e||(e=new Uo,this.nt.set(t,e)),e}Tt(t){let e=this.it.get(t);return e||(e=new So(di),this.it=this.it.insert(t,e)),e}lt(t){const e=null!==this.wt(t);return e||zr("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.nt.get(t);return e&&e.K?null:this.et.Et(t)}ft(t){this.nt.set(t,new Uo),this.et.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}yt(t,e){return this.et.getRemoteKeysForTarget(t).has(e)}}function Bo(){return new _o(Fi.comparator)}function zo(){return new _o(Fi.comparator)}const Ho={asc:"ASCENDING",desc:"DESCENDING"},Go={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class $o{constructor(t,e){this.databaseId=t,this.C=e}}function Wo(t,e){return t.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ko(t,e){return t.C?e.toBase64():e.toUint8Array()}function Qo(t,e){return Wo(t,e.toTimestamp())}function Yo(t){return Kr(!!t),gi.fromTimestamp(function(t){const e=xi(t);return new mi(e.seconds,e.nanos)}(t))}function Xo(t,e){return function(t){return new bi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Jo(t){const e=bi.fromString(t);return Kr(ba(e)),e}function Zo(t,e){return Xo(t.databaseId,e.path)}function ta(t,e){const n=Jo(e);if(n.get(1)!==t.databaseId.projectId)throw new Jr(Xr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Jr(Xr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Fi(ia(n))}function ea(t,e){return Xo(t.databaseId,e)}function na(t){const e=Jo(t);return 4===e.length?bi.emptyPath():ia(e)}function ra(t){return new bi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ia(t){return Kr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function sa(t,e,n){return{name:Zo(t,e),fields:n.value.mapValue.fields}}function oa(t,e,n){const r=ta(t,e.name),i=Yo(e.updateTime),s=new Yi({mapValue:{fields:e.fields}}),o=Ji.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function aa(t,e){let n;if(e instanceof ao)n={update:sa(t,e.key,e.value)};else if(e instanceof fo)n={delete:Zo(t,e.key)};else if(e instanceof uo)n={update:sa(t,e.key,e.data),updateMask:_a(e.fieldMask)};else{if(!(e instanceof po))return Wr();n={verify:Zo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(t=>function(t,e){const n=e.transform;if(n instanceof zs)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hs)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $s)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ks)return{fieldPath:e.field.canonicalString(),increment:n.N};throw Wr()}(0,t))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Qo(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Wr()}(t,e.precondition)),n}function ua(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?Zs.updateTime(Yo(t.updateTime)):void 0!==t.exists?Zs.exists(t.exists):Zs.none()}(e.currentDocument):Zs.none(),r=e.updateTransforms?e.updateTransforms.map(e=>function(t,e){let n=null;"setToServerValue"in e?(Kr("REQUEST_TIME"===e.setToServerValue),n=new zs):"appendMissingElements"in e?n=new Hs(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new $s(e.removeAllFromArray.values||[]):"increment"in e?n=new Ks(t,e.increment):Wr();const r=Si.fromServerFormat(e.fieldPath);return new Xs(r,n)}(t,e)):[];if(e.update){const i=ta(t,e.update.name),s=new Yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){return new Ti((t.fieldPaths||[]).map(t=>Si.fromServerFormat(t)))}(e.updateMask);return new uo(i,s,t,n,r)}return new ao(i,s,n,r)}if(e.delete){const r=ta(t,e.delete);return new fo(r,n)}if(e.verify){const r=ta(t,e.verify);return new po(r,n)}return Wr()}function ca(t,e){return{documents:[ea(t,e.path)]}}function la(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ea(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ea(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0===t.length)return;const e=t.map(t=>function(t){if("=="===t.op){if(Wi(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NAN"}};if($i(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Wi(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NOT_NAN"}};if($i(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ga(t.field),op:ma(t.op),value:t.value}}}(t));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map(t=>function(t){return{field:ga(t.field),direction:pa(t.dir)}}(t))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.C||Oi(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=da(e.startAt)),e.endAt&&(n.structuredQuery.endAt=da(e.endAt)),n}function ha(t){let e=na(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Kr(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[wa(e)]:void 0!==e.fieldFilter?[va(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>t(e)).reduce((t,e)=>t.concat(e)):Wr():[]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(t=>function(t){return new ms(ya(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Oi(e)?null:e}(n.limit));let u=null;n.startAt&&(u=fa(n.startAt));let c=null;return n.endAt&&(c=fa(n.endAt)),_s(e,i,o,s,a,"F",u,c)}function da(t){return{before:t.before,values:t.position}}function fa(t){return new fs(t.values||[],!!t.before)}function pa(t){return Ho[t]}function ma(t){return Go[t]}function ga(t){return{fieldPath:t.canonicalString()}}function ya(t){return Si.fromServerFormat(t.fieldPath)}function va(t){return is.create(ya(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wr()}}(t.fieldFilter.op),t.fieldFilter.value)}function wa(t){switch(t.unaryFilter.op){case"IS_NAN":const e=ya(t.unaryFilter.field);return is.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=ya(t.unaryFilter.field);return is.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ya(t.unaryFilter.field);return is.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ya(t.unaryFilter.field);return is.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Wr()}}function _a(t){const e=[];return t.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ba(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ea(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ta(e)),e=Sa(t.get(n),e);return Ta(e)}function Sa(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const e=t.charAt(i);switch(e){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=e}}return n}function Ta(t){return t+"\x01\x01"}function Ia(t){const e=t.length;if(Kr(e>=2),2===e)return Kr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),bi.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const e=t.indexOf("\x01",s);switch((e<0||e>n)&&Wr(),t.charAt(e+1)){case"\x01":const n=t.substring(s,e);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=t.substring(s,e),i+="\0";break;case"\x11":i+=t.substring(s,e+1);break;default:Wr()}s=e+2}return new bi(r)}class Ca{constructor(t,e){this.seconds=t,this.nanoseconds=e}}let Aa=(()=>{class t{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}return t.store="owner",t.key="owner",t})(),xa=(()=>{class t{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}return t.store="mutationQueues",t.keyPath="userId",t})();class ka{constructor(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}ka.store="mutations",ka.keyPath="batchId",ka.userMutationsIndex="userMutationsIndex",ka.userMutationsKeyPath=["userId","batchId"];let Da=(()=>{class t{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,Ea(e)]}static key(t,e,n){return[t,Ea(e),n]}}return t.store="documentMutations",t.PLACEHOLDER=new t,t})();class Na{constructor(t,e){this.path=t,this.readTime=e}}class Ra{constructor(t,e){this.path=t,this.version=e}}class Oa{constructor(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}Oa.store="remoteDocuments",Oa.readTimeIndex="readTimeIndex",Oa.readTimeIndexPath="readTime",Oa.collectionReadTimeIndex="collectionReadTimeIndex",Oa.collectionReadTimeIndexPath=["parentPath","readTime"];let Pa=(()=>{class t{constructor(t){this.byteSize=t}}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t})();class La{constructor(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}La.store="targets",La.keyPath="targetId",La.queryTargetsIndexName="queryTargetsIndex",La.queryTargetsKeyPath=["canonicalId","targetId"];class Fa{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}Fa.store="targetDocuments",Fa.keyPath=["targetId","path"],Fa.documentTargetsIndex="documentTargetsIndex",Fa.documentTargetsKeyPath=["path","targetId"];let Ma=(()=>{class t{constructor(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}return t.key="targetGlobalKey",t.store="targetGlobal",t})(),Va=(()=>{class t{constructor(t,e){this.collectionId=t,this.parent=e}}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t})(),ja=(()=>{class t{constructor(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}}return t.store="clientMetadata",t.keyPath="clientId",t})(),Ua=(()=>{class t{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}return t.store="bundles",t.keyPath="bundleId",t})(),qa=(()=>{class t{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}return t.store="namedQueries",t.keyPath="name",t})();const Ba=[xa.store,ka.store,Da.store,Oa.store,La.store,Aa.store,Ma.store,Fa.store,ja.store,Pa.store,Va.store,Ua.store,qa.store],za="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ha{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class Ga{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Wr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ga((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Ga?e:Ga.resolve(e)}catch(t){return Ga.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Ga.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Ga.reject(e)}static resolve(t){return new Ga((e,n)=>{e(t)})}static reject(t){return new Ga((e,n)=>{n(t)})}static waitFor(t){return new Ga((e,n)=>{let r=0,i=0,s=!1;t.forEach(t=>{++r,t.next(()=>{++i,s&&i===r&&e()},t=>n(t))}),s=!0,i===r&&e()})}static or(t){let e=Ga.resolve(!1);for(const n of t)e=e.next(t=>t?Ga.resolve(t):n());return e}static forEach(t,e){const n=[];return t.forEach((t,r)=>{n.push(e.call(this,t,r))}),this.waitFor(n)}}class $a{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.It=new Zr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{e.error?this.It.reject(new Qa(t,e.error)):this.It.resolve()},this.transaction.onerror=e=>{const n=tu(e.target.error);this.It.reject(new Qa(t,n))}}static open(t,e,n,r){try{return new $a(e,t.transaction(r,n))}catch(t){throw new Qa(e,t)}}get At(){return this.It.promise}abort(t){t&&this.It.reject(t),this.aborted||(zr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(t){const e=this.transaction.objectStore(t);return new Xa(e)}}class Wa{constructor(t,e,n){this.name=t,this.version=e,this.Rt=n,12.2===Wa.Pt(o())&&Hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return zr("SimpleDb","Removing database:",t),Ja(window.indexedDB.deleteDatabase(t)).toPromise()}static bt(){if("object"!=typeof indexedDB)return!1;if(Wa.vt())return!0;const t=o(),e=Wa.Pt(t),n=0<e&&e<10,r=Wa.Vt(t),i=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||i)}static vt(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.St)}static Dt(t,e){return t.store(e)}static Pt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Vt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Ct(t){return this.db||(zr("SimpleDb","Opening database:",this.name),this.db=await new Promise((e,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=t=>{e(t.target.result)},r.onblocked=()=>{n(new Qa(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=e=>{const r=e.target.error;n("VersionError"===r.name?new Jr(Xr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===r.name?new Jr(Xr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r):new Qa(t,r))},r.onupgradeneeded=t=>{zr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion),this.Rt.Nt(t.target.result,r.transaction,t.oldVersion,this.version).next(()=>{zr("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.kt&&(this.db.onversionchange=t=>this.kt(t)),this.db}xt(t){this.kt=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,r){const i="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.Ct(t);const e=$a.open(this.db,t,i?"readonly":"readwrite",n),s=r(e).catch(t=>(e.abort(t),Ga.reject(t))).toPromise();return s.catch(()=>{}),await e.At,s}catch(t){const e="FirebaseError"!==t.name&&s<3;if(zr("SimpleDb","Transaction failed with error:",t.message,"Retrying:",e),this.close(),!e)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Ka{constructor(t){this.$t=t,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(t){this.$t=t}done(){this.Ft=!0}Lt(t){this.Ot=t}delete(){return Ja(this.$t.delete())}}class Qa extends Jr{constructor(t,e){super(Xr.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Ya(t){return"IndexedDbTransactionError"===t.name}class Xa{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(zr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(zr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ja(n)}add(t){return zr("SimpleDb","ADD",this.store.name,t,t),Ja(this.store.add(t))}get(t){return Ja(this.store.get(t)).next(e=>(void 0===e&&(e=null),zr("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return zr("SimpleDb","DELETE",this.store.name,t),Ja(this.store.delete(t))}count(){return zr("SimpleDb","COUNT",this.store.name),Ja(this.store.count())}Bt(t,e){const n=this.cursor(this.options(t,e)),r=[];return this.Ut(n,(t,e)=>{r.push(e)}).next(()=>r)}qt(t,e){zr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.Kt=!1;const r=this.cursor(n);return this.Ut(r,(t,e,n)=>n.delete())}jt(t,e){let n;e?n=t:(n={},e=t);const r=this.cursor(n);return this.Ut(r,e)}Qt(t){const e=this.cursor({});return new Ga((n,r)=>{e.onerror=t=>{const e=tu(t.target.error);r(e)},e.onsuccess=e=>{const r=e.target.result;r?t(r.primaryKey,r.value).next(t=>{t?r.continue():n()}):n()}})}Ut(t,e){const n=[];return new Ga((r,i)=>{t.onerror=t=>{i(t.target.error)},t.onsuccess=t=>{const i=t.target.result;if(!i)return void r();const s=new Ka(i),o=e(i.primaryKey,i.value,s);if(o instanceof Ga){const t=o.catch(t=>(s.done(),Ga.reject(t)));n.push(t)}s.isDone?r():null===s.Mt?i.continue():i.continue(s.Mt)}}).next(()=>Ga.waitFor(n))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.Kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Ja(t){return new Ga((e,n)=>{t.onsuccess=t=>{e(t.target.result)},t.onerror=t=>{const e=tu(t.target.error);n(e)}})}let Za=!1;function tu(t){const e=Wa.Pt(o());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new Jr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Za||(Za=!0,setTimeout(()=>{throw t},0)),t}}return t}class eu extends Ha{constructor(t,e){super(),this.Wt=t,this.currentSequenceNumber=e}}function nu(t,e){const n=Yr(t);return Wa.Dt(n.Wt,e)}class ru{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const e=this.mutations[r];e.key.isEqual(t.key)&&no(e,t,n[r])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&ro(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&ro(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const n=t.get(e.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(gi.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ro())}isEqual(t){return this.batchId===t.batchId&&fi(this.mutations,t.mutations,(t,e)=>so(t,e))&&fi(this.baseMutations,t.baseMutations,(t,e)=>so(t,e))}}class iu{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Kr(t.mutations.length===n.length);let r=Do();const i=t.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new iu(t,e,n,r)}}class su{constructor(t,e,n,r,i=gi.min(),s=gi.min(),o=Ci.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new su(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new su(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new su(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class ou{constructor(t){this.Gt=t}}function au(t,e){if(e.document)return oa(t.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Fi.fromSegments(e.noDocument.path),n=du(e.noDocument.readTime),r=Ji.newNoDocument(t,n);return e.hasCommittedMutations?r.setHasCommittedMutations():r}if(e.unknownDocument){const t=Fi.fromSegments(e.unknownDocument.path),n=du(e.unknownDocument.version);return Ji.newUnknownDocument(t,n)}return Wr()}function uu(t,e,n){const r=cu(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const n=function(t,e){return{name:Zo(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Wo(t,e.version.toTimestamp())}}(t.Gt,e);return new Oa(null,null,n,e.hasCommittedMutations,r,i)}if(e.isNoDocument()){const t=e.key.path.toArray(),n=hu(e.version),s=e.hasCommittedMutations;return new Oa(null,new Na(t,n),null,s,r,i)}if(e.isUnknownDocument()){const t=e.key.path.toArray(),n=hu(e.version);return new Oa(new Ra(t,n),null,null,!0,r,i)}return Wr()}function cu(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function lu(t){const e=new mi(t[0],t[1]);return gi.fromTimestamp(e)}function hu(t){const e=t.toTimestamp();return new Ca(e.seconds,e.nanoseconds)}function du(t){const e=new mi(t.seconds,t.nanoseconds);return gi.fromTimestamp(e)}function fu(t,e){const n=(e.baseMutations||[]).map(e=>ua(t.Gt,e));for(let s=0;s<e.mutations.length-1;++s){const t=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(t.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(e=>ua(t.Gt,e)),i=mi.fromMillis(e.localWriteTimeMs);return new ru(e.batchId,i,n,r)}function pu(t){const e=du(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?du(t.lastLimboFreeSnapshotVersion):gi.min();let r;var i;return void 0!==t.query.documents?(Kr(1===(i=t.query).documents.length),r=xs(bs(na(i.documents[0])))):r=function(t){return xs(ha(t))}(t.query),new su(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Ci.fromBase64String(t.resumeToken))}function mu(t,e){const n=hu(e.snapshotVersion),r=hu(e.lastLimboFreeSnapshotVersion);let i;i=rs(e.target)?ca(t.Gt,e.target):la(t.Gt,e.target);const s=e.resumeToken.toBase64();return new La(e.targetId,es(e.target),n,s,e.sequenceNumber,r,i)}function gu(t){const e=ha({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ks(e,e.limit,"L"):e}class yu{getBundleMetadata(t,e){return vu(t).get(e).next(t=>{if(t)return{id:(e=t).bundleId,createTime:du(e.createTime),version:e.version};var e})}saveBundleMetadata(t,e){return vu(t).put({bundleId:(n=e).id,createTime:hu(Yo(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return wu(t).get(e).next(t=>{if(t)return{name:(e=t).name,query:gu(e.bundledQuery),readTime:du(e.readTime)};var e})}saveNamedQuery(t,e){return wu(t).put(function(t){return{name:t.name,readTime:hu(Yo(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function vu(t){return nu(t,Ua.store)}function wu(t){return nu(t,qa.store)}class _u{constructor(){this.zt=new bu}addToCollectionParentIndex(t,e){return this.zt.add(e),Ga.resolve()}getCollectionParents(t,e){return Ga.resolve(this.zt.getEntries(e))}}class bu{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new So(bi.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new So(bi.comparator)).toArray()}}class Eu{constructor(){this.Ht=new bu}addToCollectionParentIndex(t,e){if(!this.Ht.has(e)){const n=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Ht.add(e)});const i={collectionId:n,parent:Ea(r)};return Su(t).put(i)}return Ga.resolve()}getCollectionParents(t,e){const n=[],r=IDBKeyRange.bound([e,""],[pi(e),""],!1,!0);return Su(t).Bt(r).next(t=>{for(const r of t){if(r.collectionId!==e)break;n.push(Ia(r.parent))}return n})}}function Su(t){return nu(t,Va.store)}const Tu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Iu{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Iu(t,Iu.DEFAULT_COLLECTION_PERCENTILE,Iu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Cu(t,e,n){const r=t.store(ka.store),i=t.store(Da.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.jt({range:o},(t,e,n)=>(a++,n.delete()));s.push(u.next(()=>{Kr(1===a)}));const c=[];for(const l of n.mutations){const t=Da.key(e,l.key.path,n.batchId);s.push(i.delete(t)),c.push(l.key)}return Ga.waitFor(s).next(()=>c)}function Au(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Wr();e=t.noDocument}return JSON.stringify(e).length}Iu.DEFAULT_COLLECTION_PERCENTILE=10,Iu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Iu.DEFAULT=new Iu(41943040,Iu.DEFAULT_COLLECTION_PERCENTILE,Iu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Iu.DISABLED=new Iu(-1,0,0);class xu{constructor(t,e,n,r){this.userId=t,this.k=e,this.Jt=n,this.referenceDelegate=r,this.Yt={}}static Xt(t,e,n,r){Kr(""!==t.uid);const i=t.isAuthenticated()?t.uid:"";return new xu(i,e,n,r)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Du(t).jt({index:ka.userMutationsIndex,range:n},(t,n,r)=>{e=!1,r.done()}).next(()=>e)}addMutationBatch(t,e,n,r){const i=Nu(t),s=Du(t);return s.add({}).next(o=>{Kr("number"==typeof o);const a=new ru(o,e,n,r),u=function(t,e,n){const r=n.baseMutations.map(e=>aa(t.Gt,e)),i=n.mutations.map(e=>aa(t.Gt,e));return new ka(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.k,this.userId,a),c=[];let l=new So((t,e)=>di(t.canonicalString(),e.canonicalString()));for(const t of r){const e=Da.key(this.userId,t.key.path,o);l=l.add(t.key.path.popLast()),c.push(s.put(u)),c.push(i.put(e,Da.PLACEHOLDER))}return l.forEach(e=>{c.push(this.Jt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(()=>{this.Yt[o]=a.keys()}),Ga.waitFor(c).next(()=>a)})}lookupMutationBatch(t,e){return Du(t).get(e).next(t=>t?(Kr(t.userId===this.userId),fu(this.k,t)):null)}Zt(t,e){return this.Yt[e]?Ga.resolve(this.Yt[e]):this.lookupMutationBatch(t,e).next(t=>{if(t){const n=t.keys();return this.Yt[e]=n,n}return null})}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Du(t).jt({index:ka.userMutationsIndex,range:r},(t,e,r)=>{e.userId===this.userId&&(Kr(e.batchId>=n),i=fu(this.k,e)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Du(t).jt({index:ka.userMutationsIndex,range:e,reverse:!0},(t,e,r)=>{n=e.batchId,r.done()}).next(()=>n)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Du(t).Bt(ka.userMutationsIndex,e).next(t=>t.map(t=>fu(this.k,t)))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=Da.prefixForPath(this.userId,e.path),r=IDBKeyRange.lowerBound(n),i=[];return Nu(t).jt({range:r},(n,r,s)=>{const[o,a,u]=n,c=Ia(a);if(o===this.userId&&e.path.isEqual(c))return Du(t).get(u).next(t=>{if(!t)throw Wr();Kr(t.userId===this.userId),i.push(fu(this.k,t))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new So(di);const r=[];return e.forEach(e=>{const i=Da.prefixForPath(this.userId,e.path),s=IDBKeyRange.lowerBound(i),o=Nu(t).jt({range:s},(t,r,i)=>{const[s,o,a]=t,u=Ia(o);s===this.userId&&e.path.isEqual(u)?n=n.add(a):i.done()});r.push(o)}),Ga.waitFor(r).next(()=>this.te(t,n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1,i=Da.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new So(di);return Nu(t).jt({range:s},(t,e,i)=>{const[s,a,u]=t,c=Ia(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(u)):i.done()}).next(()=>this.te(t,o))}te(t,e){const n=[],r=[];return e.forEach(e=>{r.push(Du(t).get(e).next(t=>{if(null===t)throw Wr();Kr(t.userId===this.userId),n.push(fu(this.k,t))}))}),Ga.waitFor(r).next(()=>n)}removeMutationBatch(t,e){return Cu(t.Wt,this.userId,e).next(n=>(t.addOnCommittedListener(()=>{this.ee(e.batchId)}),Ga.forEach(n,e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))}ee(t){delete this.Yt[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Ga.resolve();const n=IDBKeyRange.lowerBound(Da.prefixForUser(this.userId)),r=[];return Nu(t).jt({range:n},(t,e,n)=>{if(t[0]===this.userId){const e=Ia(t[1]);r.push(e)}else n.done()}).next(()=>{Kr(0===r.length)})})}containsKey(t,e){return ku(t,this.userId,e)}ne(t){return Ru(t).get(this.userId).next(t=>t||new xa(this.userId,-1,""))}}function ku(t,e,n){const r=Da.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Nu(t).jt({range:s,Kt:!0},(t,n,r)=>{const[s,a,u]=t;s===e&&a===i&&(o=!0),r.done()}).next(()=>o)}function Du(t){return nu(t,ka.store)}function Nu(t){return nu(t,Da.store)}function Ru(t){return nu(t,xa.store)}class Ou{constructor(t){this.se=t}next(){return this.se+=2,this.se}static ie(){return new Ou(0)}static re(){return new Ou(-1)}}class Pu{constructor(t,e){this.referenceDelegate=t,this.k=e}allocateTargetId(t){return this.oe(t).next(e=>{const n=new Ou(e.highestTargetId);return e.highestTargetId=n.next(),this.ae(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.oe(t).next(t=>gi.fromTimestamp(new mi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.oe(t).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(t,e,n){return this.oe(t).next(r=>(r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.ae(t,r)))}addTargetData(t,e){return this.ce(t,e).next(()=>this.oe(t).next(n=>(n.targetCount+=1,this.ue(e,n),this.ae(t,n))))}updateTargetData(t,e){return this.ce(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Lu(t).delete(e.targetId)).next(()=>this.oe(t)).next(e=>(Kr(e.targetCount>0),e.targetCount-=1,this.ae(t,e)))}removeTargets(t,e,n){let r=0;const i=[];return Lu(t).jt((s,o)=>{const a=pu(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(t,a)))}).next(()=>Ga.waitFor(i)).next(()=>r)}forEachTarget(t,e){return Lu(t).jt((t,n)=>{const r=pu(n);e(r)})}oe(t){return Fu(t).get(Ma.key).next(t=>(Kr(null!==t),t))}ae(t,e){return Fu(t).put(Ma.key,e)}ce(t,e){return Lu(t).put(mu(this.k,e))}ue(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.oe(t).next(t=>t.targetCount)}getTargetData(t,e){const n=es(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Lu(t).jt({range:r,index:La.queryTargetsIndexName},(t,n,r)=>{const s=pu(n);ns(e,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(t,e,n){const r=[],i=Mu(t);return e.forEach(e=>{const s=Ea(e.path);r.push(i.put(new Fa(n,s))),r.push(this.referenceDelegate.addReference(t,n,e))}),Ga.waitFor(r)}removeMatchingKeys(t,e,n){const r=Mu(t);return Ga.forEach(e,e=>{const i=Ea(e.path);return Ga.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(t,n,e)])})}removeMatchingKeysForTargetId(t,e){const n=Mu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Mu(t);let i=Ro();return r.jt({range:n,Kt:!0},(t,e,n)=>{const r=Ia(t[1]),s=new Fi(r);i=i.add(s)}).next(()=>i)}containsKey(t,e){const n=Ea(e.path),r=IDBKeyRange.bound([n],[pi(n)],!1,!0);let i=0;return Mu(t).jt({index:Fa.documentTargetsIndex,Kt:!0,range:r},([t,e],n,r)=>{0!==t&&(i++,r.done())}).next(()=>i>0)}Et(t,e){return Lu(t).get(e).next(t=>t?pu(t):null)}}function Lu(t){return nu(t,La.store)}function Fu(t){return nu(t,Ma.store)}function Mu(t){return nu(t,Fa.store)}async function Vu(t){if(t.code!==Xr.FAILED_PRECONDITION||t.message!==za)throw t;zr("LocalStore","Unexpectedly lost primary lease")}function ju([t,e],[n,r]){const i=di(t,n);return 0===i?di(e,r):i}class Uu{constructor(t){this.he=t,this.buffer=new So(ju),this.le=0}fe(){return++this.le}de(t){const e=[t,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();ju(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class qu{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.we=!1,this._e=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(t)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(t){const e=this.we?3e5:6e4;zr("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this._e=null,this.we=!0;try{await t.collectGarbage(this.garbageCollector)}catch(t){Ya(t)?zr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Vu(t)}await this.me(t)})}}class Bu{constructor(t,e){this.ge=t,this.params=e}calculateTargetCount(t,e){return this.ge.ye(t).next(t=>Math.floor(e/100*t))}nthSequenceNumber(t,e){if(0===e)return Ga.resolve(ci.I);const n=new Uu(e);return this.ge.forEachTarget(t,t=>n.de(t.sequenceNumber)).next(()=>this.ge.pe(t,t=>n.de(t))).next(()=>n.maxValue)}removeTargets(t,e,n){return this.ge.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.ge.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(zr("LruGarbageCollector","Garbage collection skipped; disabled"),Ga.resolve(Tu)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(zr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tu):this.Te(t,e))}getCacheSize(t){return this.ge.getCacheSize(t)}Te(t,e){let n,r,i,s,o,a,u;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(e=>(e>this.params.maximumSequenceNumbersToCollect?(zr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),r=this.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),this.nthSequenceNumber(t,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(t,n,e))).next(e=>(i=e,a=Date.now(),this.removeOrphanedDocuments(t,n))).next(t=>(u=Date.now(),qr()<=p.DEBUG&&zr("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${t} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-c}ms`),Ga.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})))}}class zu{constructor(t,e){this.db=t,this.garbageCollector=function(t,e){return new Bu(t,e)}(this,e)}ye(t){const e=this.Ee(t);return this.db.getTargetCache().getTargetCount(t).next(t=>e.next(e=>t+e))}Ee(t){let e=0;return this.pe(t,t=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pe(t,e){return this.Ie(t,(t,n)=>e(n))}addReference(t,e,n){return Hu(t,n)}removeReference(t,e,n){return Hu(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return Hu(t,e)}Ae(t,e){return function(t,e){let n=!1;return Ru(t).Qt(r=>ku(t,r,e).next(t=>(t&&(n=!0),Ga.resolve(!t)))).next(()=>n)}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Ie(t,(s,o)=>{if(o<=e){const e=this.Ae(t,s).next(e=>{if(!e)return i++,n.getEntry(t,s).next(()=>(n.removeEntry(s),Mu(t).delete([0,Ea(s.path)])))});r.push(e)}}).next(()=>Ga.waitFor(r)).next(()=>n.apply(t)).next(()=>i)}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return Hu(t,e)}Ie(t,e){const n=Mu(t);let r,i=ci.I;return n.jt({index:Fa.documentTargetsIndex},([t,n],{path:s,sequenceNumber:o})=>{0===t?(i!==ci.I&&e(new Fi(Ia(r)),i),i=o,r=s):i=ci.I}).next(()=>{i!==ci.I&&e(new Fi(Ia(r)),i)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Hu(t,e){return Mu(t).put(function(t,e){return new Fa(0,Ea(t.path),e)}(e,t.currentSequenceNumber))}class Gu{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1}forEach(t){vi(this.inner,(e,n)=>{for(const[r,i]of n)t(r,i)})}isEmpty(){return wi(this.inner)}}class $u{constructor(){this.changes=new Gu(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:gi.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:Ji.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Ga.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Wu{constructor(t,e){this.k=t,this.Jt=e}addEntry(t,e,n){return Yu(t).put(Xu(e),n)}removeEntry(t,e){const n=Yu(t),r=Xu(e);return n.delete(r)}updateMetadata(t,e){return this.getMetadata(t).next(n=>(n.byteSize+=e,this.Re(t,n)))}getEntry(t,e){return Yu(t).get(Xu(e)).next(t=>this.Pe(e,t))}be(t,e){return Yu(t).get(Xu(e)).next(t=>({document:this.Pe(e,t),size:Au(t)}))}getEntries(t,e){let n=Co();return this.ve(t,e,(t,e)=>{const r=this.Pe(t,e);n=n.insert(t,r)}).next(()=>n)}Ve(t,e){let n=Co(),r=new _o(Fi.comparator);return this.ve(t,e,(t,e)=>{const i=this.Pe(t,e);n=n.insert(t,i),r=r.insert(t,Au(e))}).next(()=>({documents:n,Se:r}))}ve(t,e,n){if(e.isEmpty())return Ga.resolve();const r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator();let s=i.getNext();return Yu(t).jt({range:r},(t,e,r)=>{const o=Fi.fromSegments(t);for(;s&&Fi.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Lt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(t,e,n){let r=Co();const i=e.path.length+1,s={};if(n.isEqual(gi.min())){const t=e.path.toArray();s.range=IDBKeyRange.lowerBound(t)}else{const t=e.path.toArray(),r=cu(n);s.range=IDBKeyRange.lowerBound([t,r],!0),s.index=Oa.collectionReadTimeIndex}return Yu(t).jt(s,(t,n,s)=>{if(t.length!==i)return;const o=au(this.k,n);e.path.isPrefixOf(o.key.path)?Os(e,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(t){return new Ku(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(t=>t.byteSize)}getMetadata(t){return Qu(t).get(Pa.key).next(t=>(Kr(!!t),t))}Re(t,e){return Qu(t).put(Pa.key,e)}Pe(t,e){if(e){const t=au(this.k,e);if(!t.isNoDocument()||!t.version.isEqual(gi.min()))return t}return Ji.newInvalidDocument(t)}}class Ku extends $u{constructor(t,e){super(),this.De=t,this.trackRemovals=e,this.Ce=new Gu(t=>t.toString(),(t,e)=>t.isEqual(e))}applyChanges(t){const e=[];let n=0,r=new So((t,e)=>di(t.canonicalString(),e.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.Ce.get(i);if(s.document.isValidDocument()){const a=uu(this.De.k,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const u=Au(a);n+=u-o,e.push(this.De.addEntry(t,i,a))}else if(n-=o,this.trackRemovals){const n=uu(this.De.k,Ji.newNoDocument(i,gi.min()),this.getReadTime(i));e.push(this.De.addEntry(t,i,n))}else e.push(this.De.removeEntry(t,i))}),r.forEach(n=>{e.push(this.De.Jt.addToCollectionParentIndex(t,n))}),e.push(this.De.updateMetadata(t,n)),Ga.waitFor(e)}getFromCache(t,e){return this.De.be(t,e).next(t=>(this.Ce.set(e,t.size),t.document))}getAllFromCache(t,e){return this.De.Ve(t,e).next(({documents:t,Se:e})=>(e.forEach((t,e)=>{this.Ce.set(t,e)}),t))}}function Qu(t){return nu(t,Pa.store)}function Yu(t){return nu(t,Oa.store)}function Xu(t){return t.path.toArray()}class Ju{constructor(t){this.k=t}Nt(t,e,n,r){Kr(n<r&&n>=0&&r<=11);const i=new $a("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Aa.store)}(t),function(t){t.createObjectStore(xa.store,{keyPath:xa.keyPath}),t.createObjectStore(ka.store,{keyPath:ka.keyPath,autoIncrement:!0}).createIndex(ka.userMutationsIndex,ka.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Da.store)}(t),Zu(t),function(t){t.createObjectStore(Oa.store)}(t));let s=Ga.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Fa.store),t.deleteObjectStore(La.store),t.deleteObjectStore(Ma.store)}(t),Zu(t)),s=s.next(()=>function(t){const e=t.store(Ma.store),n=new Ma(0,0,gi.min().toTimestamp(),0);return e.put(Ma.key,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(t,e){return e.store(ka.store).Bt().next(n=>{t.deleteObjectStore(ka.store),t.createObjectStore(ka.store,{keyPath:ka.keyPath,autoIncrement:!0}).createIndex(ka.userMutationsIndex,ka.userMutationsKeyPath,{unique:!0});const r=e.store(ka.store),i=n.map(t=>r.put(t));return Ga.waitFor(i)})}(t,i))),s=s.next(()=>{!function(t){t.createObjectStore(ja.store,{keyPath:ja.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(()=>this.Ne(i))),n<6&&r>=6&&(s=s.next(()=>(function(t){t.createObjectStore(Pa.store)}(t),this.ke(i)))),n<7&&r>=7&&(s=s.next(()=>this.xe(i))),n<8&&r>=8&&(s=s.next(()=>this.$e(t,i))),n<9&&r>=9&&(s=s.next(()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){const e=t.objectStore(Oa.store);e.createIndex(Oa.readTimeIndex,Oa.readTimeIndexPath,{unique:!1}),e.createIndex(Oa.collectionReadTimeIndex,Oa.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(()=>this.Fe(i))),n<11&&r>=11&&(s=s.next(()=>{!function(t){t.createObjectStore(Ua.store,{keyPath:Ua.keyPath})}(t),function(t){t.createObjectStore(qa.store,{keyPath:qa.keyPath})}(t)})),s}ke(t){let e=0;return t.store(Oa.store).jt((t,n)=>{e+=Au(n)}).next(()=>{const n=new Pa(e);return t.store(Pa.store).put(Pa.key,n)})}Ne(t){const e=t.store(xa.store),n=t.store(ka.store);return e.Bt().next(e=>Ga.forEach(e,e=>{const r=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.Bt(ka.userMutationsIndex,r).next(n=>Ga.forEach(n,n=>{Kr(n.userId===e.userId);const r=fu(this.k,n);return Cu(t,e.userId,r).next(()=>{})}))}))}xe(t){const e=t.store(Fa.store),n=t.store(Oa.store);return t.store(Ma.store).get(Ma.key).next(t=>{const r=[];return n.jt((n,i)=>{const s=new bi(n),o=function(t){return[0,Ea(t)]}(s);r.push(e.get(o).next(n=>n?Ga.resolve():(n=>e.put(new Fa(0,Ea(n),t.highestListenSequenceNumber)))(s)))}).next(()=>Ga.waitFor(r))})}$e(t,e){t.createObjectStore(Va.store,{keyPath:Va.keyPath});const n=e.store(Va.store),r=new bu,i=t=>{if(r.add(t)){const e=t.lastSegment(),r=t.popLast();return n.put({collectionId:e,parent:Ea(r)})}};return e.store(Oa.store).jt({Kt:!0},(t,e)=>{const n=new bi(t);return i(n.popLast())}).next(()=>e.store(Da.store).jt({Kt:!0},([t,e,n],r)=>{const s=Ia(e);return i(s.popLast())}))}Fe(t){const e=t.store(La.store);return e.jt((t,n)=>{const r=pu(n),i=mu(this.k,r);return e.put(i)})}}function Zu(t){t.createObjectStore(Fa.store,{keyPath:Fa.keyPath}).createIndex(Fa.documentTargetsIndex,Fa.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(La.store,{keyPath:La.keyPath}).createIndex(La.queryTargetsIndexName,La.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ma.store)}const tc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ec{constructor(t,e,n,r,i,s,o,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Me=u,this.Le=c,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=t=>Promise.resolve(),!ec.bt())throw new Jr(Xr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zu(this,r),this.Ge=e+"main",this.k=new ou(a),this.ze=new Wa(this.Ge,11,new Ju(this.k)),this.He=new Pu(this.referenceDelegate,this.k),this.Jt=new Eu,this.Je=function(t,e){return new Wu(t,e)}(this.k,this.Jt),this.Ye=new yu,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===c&&Hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Jr(Xr.FAILED_PRECONDITION,tc);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.He.getHighestSequenceNumber(t))}).then(t=>{this.Be=new ci(t,this.Me)}).then(()=>{this.Ue=!0}).catch(t=>(this.ze&&this.ze.close(),Promise.reject(t)))}sn(t){return this.We=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.ze.xt(async e=>{null===e.newVersion&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Oe.enqueueAndForget(async()=>{this.started&&await this.Ze()}))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>rc(t).put(new ja(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(t).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(t)).next(e=>this.isPrimary&&!e?this.an(t).next(()=>!1):!!e&&this.cn(t).next(()=>!0))).catch(t=>{if(Ya(t))return zr("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return zr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Oe.enqueueRetryable(()=>this.We(t)),this.isPrimary=t})}rn(t){return nc(t).get(Aa.key).next(t=>Ga.resolve(this.un(t)))}hn(t){return rc(t).delete(this.clientId)}async ln(){if(this.isPrimary&&!this.fn(this.Qe,18e5)){this.Qe=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const e=nu(t,ja.store);return e.Bt().next(t=>{const n=this.dn(t,18e5),r=t.filter(t=>-1===n.indexOf(t));return Ga.forEach(r,t=>e.delete(t.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Xe)for(const e of t)this.Xe.removeItem(this.wn(e.clientId))}}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(t){return!!t&&t.ownerId===this.clientId}on(t){return this.Le?Ga.resolve(!0):nc(t).get(Aa.key).next(e=>{if(null!==e&&this.fn(e.leaseTimestampMs,5e3)&&!this._n(e.ownerId)){if(this.un(e)&&this.networkEnabled)return!0;if(!this.un(e)){if(!e.allowTabSynchronization)throw new Jr(Xr.FAILED_PRECONDITION,tc);return!1}}return!(!this.networkEnabled||!this.inForeground)||rc(t).Bt().next(t=>void 0===this.dn(t,5e3).find(t=>{if(this.clientId!==t.clientId){const e=!this.inForeground&&t.inForeground,n=this.networkEnabled===t.networkEnabled;if(!this.networkEnabled&&t.networkEnabled||e&&n)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&zr("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),await this.ze.runTransaction("shutdown","readwrite",[Aa.store,ja.store],t=>{const e=new eu(t,ci.I);return this.an(e).next(()=>this.hn(e))}),this.ze.close(),this.pn()}dn(t,e){return t.filter(t=>this.fn(t.updateTimeMs,e)&&!this._n(t.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",t=>rc(t).Bt().next(t=>this.dn(t,18e5).map(t=>t.clientId)))}get started(){return this.Ue}getMutationQueue(t){return xu.Xt(t,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(t,e,n){let r;return zr("IndexedDbPersistence","Starting transaction:",t),this.ze.runTransaction(t,"readonly"===e?"readonly":"readwrite",Ba,i=>(r=new eu(i,this.Be?this.Be.next():ci.I),"readwrite-primary"===e?this.rn(r).next(t=>!!t||this.on(r)).next(e=>{if(!e)throw Hr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Jr(Xr.FAILED_PRECONDITION,za);return n(r)}).next(t=>this.cn(r).next(()=>t)):this.En(r).next(()=>n(r)))).then(t=>(r.raiseOnCommittedEvent(),t))}En(t){return nc(t).get(Aa.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Jr(Xr.FAILED_PRECONDITION,tc)})}cn(t){const e=new Aa(this.clientId,this.allowTabSynchronization,Date.now());return nc(t).put(Aa.key,e)}static bt(){return Wa.bt()}an(t){const e=nc(t);return e.get(Aa.key).next(t=>this.un(t)?(zr("IndexedDbPersistence","Releasing primary lease."),e.delete(Aa.key)):Ga.resolve())}fn(t,e){const n=Date.now();return!(t<n-e||t>n&&(Hr(`Detected an update time that is in the future: ${t} > ${n}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.qe=()=>{this.mn(),!function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(t){var e;try{const n=null!==(null===(e=this.Xe)||void 0===e?void 0:e.getItem(this.wn(t)));return zr("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return Hr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(t){Hr("Failed to set zombie client id.",t)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(t){}}wn(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function nc(t){return nu(t,Aa.store)}function rc(t){return nu(t,ja.store)}function ic(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class sc{constructor(t,e){this.progress=t,this.In=e}}class oc{constructor(t,e,n){this.Je=t,this.An=e,this.Jt=n}Rn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKey(t,e).next(n=>this.Pn(t,e,n))}Pn(t,e,n){return this.Je.getEntry(t,e).next(t=>{for(const e of n)e.applyToLocalView(t);return t})}bn(t,e){t.forEach((t,n)=>{for(const r of e)r.applyToLocalView(n)})}vn(t,e){return this.Je.getEntries(t,e).next(e=>this.Vn(t,e).next(()=>e))}Vn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKeys(t,e).next(t=>this.bn(e,t))}getDocumentsMatchingQuery(t,e,n){return function(t){return Fi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Sn(t,e.path):Cs(e)?this.Dn(t,e,n):this.Cn(t,e,n)}Sn(t,e){return this.Rn(t,new Fi(e)).next(t=>{let e=xo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})}Dn(t,e,n){const r=e.collectionGroup;let i=xo();return this.Jt.getCollectionParents(t,r).next(s=>Ga.forEach(s,s=>{const o=function(t,e){return new ws(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(r));return this.Cn(t,o,n).next(t=>{t.forEach((t,e)=>{i=i.insert(t,e)})})}).next(()=>i))}Cn(t,e,n){let r,i;return this.Je.getDocumentsMatchingQuery(t,e,n).next(n=>(r=n,this.An.getAllMutationBatchesAffectingQuery(t,e))).next(e=>(i=e,this.Nn(t,i,r).next(t=>{r=t;for(const e of i)for(const t of e.mutations){const n=t.key;let i=r.get(n);null==i&&(i=Ji.newInvalidDocument(n),r=r.insert(n,i)),ro(t,i,e.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((t,n)=>{Os(e,n)||(r=r.remove(t))}),r))}Nn(t,e,n){let r=Ro();for(const s of e)for(const t of s.mutations)t instanceof uo&&null===n.get(t.key)&&(r=r.add(t.key));let i=n;return this.Je.getEntries(t,r).next(t=>(t.forEach((t,e)=>{e.isFoundDocument()&&(i=i.insert(t,e))}),i))}}class ac{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.kn=n,this.xn=r}static $n(t,e){let n=Ro(),r=Ro();for(const i of e.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ac(t,e.fromCache,n,r)}}class uc{Fn(t){this.On=t}getDocumentsMatchingQuery(t,e,n,r){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(gi.min())?this.Mn(t,e):this.On.vn(t,r).next(i=>{const s=this.Ln(e,i);return(Es(e)||Ss(e))&&this.Bn(e.limitType,s,r,n)?this.Mn(t,e):(qr()<=p.DEBUG&&zr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Rs(e)),this.On.getDocumentsMatchingQuery(t,e,n).next(t=>(s.forEach(e=>{t=t.insert(e.key,e)}),t)))})}Ln(t,e){let n=new So(Ps(t));return e.forEach((e,r)=>{Os(t,r)&&(n=n.add(r))}),n}Bn(t,e,n,r){if(n.size!==e.size)return!0;const i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mn(t,e){return qr()<=p.DEBUG&&zr("QueryEngine","Using full collection scan to execute query:",Rs(e)),this.On.getDocumentsMatchingQuery(t,e,gi.min())}}class cc{constructor(t,e,n,r){this.persistence=t,this.Un=e,this.k=r,this.qn=new _o(di),this.Kn=new Gu(t=>es(t),ns),this.jn=gi.min(),this.An=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new oc(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.qn))}}function lc(t,e,n,r){return new cc(t,e,n,r)}async function hc(t,e){const n=Yr(t);let r=n.An,i=n.Wn;const s=await n.persistence.runTransaction("Handle user change","readonly",t=>{let s;return n.An.getAllMutationBatches(t).next(o=>(s=o,r=n.persistence.getMutationQueue(e),i=new oc(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t))).next(e=>{const n=[],r=[];let o=Ro();for(const t of s){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return i.vn(t,o).next(t=>({Gn:t,removedBatchIds:n,addedBatchIds:r}))})});return n.An=r,n.Wn=i,n.Un.Fn(n.Wn),s}function dc(t){const e=Yr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function fc(t,e,n,r,i){let s=Ro();return n.forEach(t=>s=s.add(t)),e.getEntries(t,s).next(t=>{let s=Co();return n.forEach((n,o)=>{const a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(gi.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):zr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function pc(t,e){const n=Yr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(void 0===e&&(e=-1),n.An.getNextMutationBatchAfterBatchId(t,e)))}function mc(t,e){const n=Yr(t);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let r;return n.He.getTargetData(t,e).next(i=>i?(r=i,Ga.resolve(r)):n.He.allocateTargetId(t).next(i=>(r=new su(e,i,0,t.currentSequenceNumber),n.He.addTargetData(t,r).next(()=>r))))}).then(t=>{const r=n.qn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(t.targetId,t),n.Kn.set(e,t.targetId)),t})}async function gc(t,e,n){const r=Yr(t),i=r.qn.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,t=>r.persistence.referenceDelegate.removeTarget(t,i))}catch(t){if(!Ya(t))throw t;zr("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.qn=r.qn.remove(e),r.Kn.delete(i.target)}function yc(t,e,n){const r=Yr(t);let i=gi.min(),s=Ro();return r.persistence.runTransaction("Execute query","readonly",t=>function(t,e,n){const r=Yr(t),i=r.Kn.get(n);return void 0!==i?Ga.resolve(r.qn.get(i)):r.He.getTargetData(e,n)}(r,t,xs(e)).next(e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(t,e.targetId).next(t=>{s=t})}).next(()=>r.Un.getDocumentsMatchingQuery(t,e,n?i:gi.min(),n?s:Ro())).next(t=>({documents:t,zn:s})))}function vc(t,e){const n=Yr(t),r=Yr(n.He),i=n.qn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",t=>r.Et(t,e).next(t=>t?t.target:null))}function wc(t){const e=Yr(t);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(t,e,n){const r=Yr(t);let i=Co(),s=cu(n);const o=Yu(e),a=IDBKeyRange.lowerBound(s,!0);return o.jt({index:Oa.readTimeIndex,range:a},(t,e)=>{const n=au(r.k,e);i=i.insert(n.key,n),s=e.readTime}).next(()=>({In:i,readTime:lu(s)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:n})=>(e.jn=n,t))}async function _c(t,e,n=Ro()){const r=await mc(t,xs(gu(e.bundledQuery))),i=Yr(t);return i.persistence.runTransaction("Save named query","readwrite",t=>{const s=Yo(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ye.saveNamedQuery(t,e);const o=r.withResumeToken(Ci.EMPTY_BYTE_STRING,s);return i.qn=i.qn.insert(o.targetId,o),i.He.updateTargetData(t,o).next(()=>i.He.removeMatchingKeysForTargetId(t,r.targetId)).next(()=>i.He.addMatchingKeys(t,n,r.targetId)).next(()=>i.Ye.saveNamedQuery(t,e))})}class bc{constructor(t){this.k=t,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(t,e){return Ga.resolve(this.Xn.get(e))}saveBundleMetadata(t,e){var n;return this.Xn.set(e.id,{id:(n=e).id,version:n.version,createTime:Yo(n.createTime)}),Ga.resolve()}getNamedQuery(t,e){return Ga.resolve(this.Zn.get(e))}saveNamedQuery(t,e){return this.Zn.set(e.name,function(t){return{name:t.name,query:gu(t.bundledQuery),readTime:Yo(t.readTime)}}(e)),Ga.resolve()}}class Ec{constructor(){this.ts=new So(Sc.es),this.ns=new So(Sc.ss)}isEmpty(){return this.ts.isEmpty()}addReference(t,e){const n=new Sc(t,e);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(t,e){t.forEach(t=>this.addReference(t,e))}removeReference(t,e){this.os(new Sc(t,e))}cs(t,e){t.forEach(t=>this.removeReference(t,e))}us(t){const e=new Fi(new bi([])),n=new Sc(e,t),r=new Sc(e,t+1),i=[];return this.ns.forEachInRange([n,r],t=>{this.os(t),i.push(t.key)}),i}hs(){this.ts.forEach(t=>this.os(t))}os(t){this.ts=this.ts.delete(t),this.ns=this.ns.delete(t)}ls(t){const e=new Fi(new bi([])),n=new Sc(e,t),r=new Sc(e,t+1);let i=Ro();return this.ns.forEachInRange([n,r],t=>{i=i.add(t.key)}),i}containsKey(t){const e=new Sc(t,0),n=this.ts.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Sc{constructor(t,e){this.key=t,this.fs=e}static es(t,e){return Fi.comparator(t.key,e.key)||di(t.fs,e.fs)}static ss(t,e){return di(t.fs,e.fs)||Fi.comparator(t.key,e.key)}}class Tc{constructor(t,e){this.Jt=t,this.referenceDelegate=e,this.An=[],this.ds=1,this.ws=new So(Sc.es)}checkEmpty(t){return Ga.resolve(0===this.An.length)}addMutationBatch(t,e,n,r){const i=this.ds;this.ds++;const s=new ru(i,e,n,r);this.An.push(s);for(const o of r)this.ws=this.ws.add(new Sc(o.key,i)),this.Jt.addToCollectionParentIndex(t,o.key.path.popLast());return Ga.resolve(s)}lookupMutationBatch(t,e){return Ga.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const n=this.gs(e+1),r=n<0?0:n;return Ga.resolve(this.An.length>r?this.An[r]:null)}getHighestUnacknowledgedBatchId(){return Ga.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(t){return Ga.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Sc(e,0),r=new Sc(e,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,r],t=>{const e=this._s(t.fs);i.push(e)}),Ga.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new So(di);return e.forEach(t=>{const e=new Sc(t,0),r=new Sc(t,Number.POSITIVE_INFINITY);this.ws.forEachInRange([e,r],t=>{n=n.add(t.fs)})}),Ga.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;Fi.isDocumentKey(i)||(i=i.child(""));const s=new Sc(new Fi(i),0);let o=new So(di);return this.ws.forEachWhile(t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.fs)),!0)},s),Ga.resolve(this.ys(o))}ys(t){const e=[];return t.forEach(t=>{const n=this._s(t);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){Kr(0===this.ps(e.batchId,"removed")),this.An.shift();let n=this.ws;return Ga.forEach(e.mutations,r=>{const i=new Sc(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.ws=n})}ee(t){}containsKey(t,e){const n=new Sc(e,0),r=this.ws.firstAfterOrEqual(n);return Ga.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return Ga.resolve()}ps(t,e){return this.gs(t)}gs(t){return 0===this.An.length?0:t-this.An[0].batchId}_s(t){const e=this.gs(t);return e<0||e>=this.An.length?null:this.An[e]}}class Ic{constructor(t,e){this.Jt=t,this.Ts=e,this.docs=new _o(Fi.comparator),this.size=0}addEntry(t,e,n){const r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ts(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Jt.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Ga.resolve(n?n.document.clone():Ji.newInvalidDocument(e))}getEntries(t,e){let n=Co();return e.forEach(t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():Ji.newInvalidDocument(t))}),Ga.resolve(n)}getDocumentsMatchingQuery(t,e,n){let r=Co();const i=new Fi(e.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:t,value:{document:i,readTime:o}}=s.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||Os(e,i)&&(r=r.insert(i.key,i.clone()))}return Ga.resolve(r)}Es(t,e){return Ga.forEach(this.docs,t=>e(t))}newChangeBuffer(t){return new Cc(this)}getSize(t){return Ga.resolve(this.size)}}class Cc extends $u{constructor(t){super(),this.De=t}applyChanges(t){const e=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?e.push(this.De.addEntry(t,r.document,this.getReadTime(n))):this.De.removeEntry(n)}),Ga.waitFor(e)}getFromCache(t,e){return this.De.getEntry(t,e)}getAllFromCache(t,e){return this.De.getEntries(t,e)}}class Ac{constructor(t){this.persistence=t,this.Is=new Gu(t=>es(t),ns),this.lastRemoteSnapshotVersion=gi.min(),this.highestTargetId=0,this.As=0,this.Rs=new Ec,this.targetCount=0,this.Ps=Ou.ie()}forEachTarget(t,e){return this.Is.forEach((t,n)=>e(n)),Ga.resolve()}getLastRemoteSnapshotVersion(t){return Ga.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ga.resolve(this.As)}allocateTargetId(t){return this.highestTargetId=this.Ps.next(),Ga.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.As&&(this.As=e),Ga.resolve()}ce(t){this.Is.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ps=new Ou(e),this.highestTargetId=e),t.sequenceNumber>this.As&&(this.As=t.sequenceNumber)}addTargetData(t,e){return this.ce(e),this.targetCount+=1,Ga.resolve()}updateTargetData(t,e){return this.ce(e),Ga.resolve()}removeTargetData(t,e){return this.Is.delete(e.target),this.Rs.us(e.targetId),this.targetCount-=1,Ga.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Is.forEach((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Is.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)}),Ga.waitFor(i).next(()=>r)}getTargetCount(t){return Ga.resolve(this.targetCount)}getTargetData(t,e){const n=this.Is.get(e)||null;return Ga.resolve(n)}addMatchingKeys(t,e,n){return this.Rs.rs(e,n),Ga.resolve()}removeMatchingKeys(t,e,n){this.Rs.cs(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(e=>{i.push(r.markPotentiallyOrphaned(t,e))}),Ga.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Rs.us(e),Ga.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Rs.ls(e);return Ga.resolve(n)}containsKey(t,e){return Ga.resolve(this.Rs.containsKey(e))}}class xc{constructor(t,e){this.bs={},this.Be=new ci(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new Ac(this),this.Jt=new _u,this.Je=function(t,e){return new Ic(t,e)}(this.Jt,t=>this.referenceDelegate.vs(t)),this.k=new ou(e),this.Ye=new bc(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new Tc(this.Jt,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(t,e,n){zr("MemoryPersistence","Starting transaction:",t);const r=new kc(this.Be.next());return this.referenceDelegate.Vs(),n(r).next(t=>this.referenceDelegate.Ss(r).next(()=>t)).toPromise().then(t=>(r.raiseOnCommittedEvent(),t))}Ds(t,e){return Ga.or(Object.values(this.bs).map(n=>()=>n.containsKey(t,e)))}}class kc extends Ha{constructor(t){super(),this.currentSequenceNumber=t}}class Dc{constructor(t){this.persistence=t,this.Cs=new Ec,this.Ns=null}static ks(t){return new Dc(t)}get xs(){if(this.Ns)return this.Ns;throw Wr()}addReference(t,e,n){return this.Cs.addReference(n,e),this.xs.delete(n.toString()),Ga.resolve()}removeReference(t,e,n){return this.Cs.removeReference(n,e),this.xs.add(n.toString()),Ga.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),Ga.resolve()}removeTarget(t,e){this.Cs.us(e.targetId).forEach(t=>this.xs.add(t.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(t=>{t.forEach(t=>this.xs.add(t.toString()))}).next(()=>n.removeTargetData(t,e))}Vs(){this.Ns=new Set}Ss(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ga.forEach(this.xs,n=>{const r=Fi.fromPath(n);return this.$s(t,r).next(t=>{t||e.removeEntry(r)})}).next(()=>(this.Ns=null,e.apply(t)))}updateLimboDocument(t,e){return this.$s(t,e).next(t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())})}vs(t){return 0}$s(t,e){return Ga.or([()=>Ga.resolve(this.Cs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ds(t,e)])}}function Nc(t,e){return`firestore_clients_${t}_${e}`}function Rc(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Oc(t,e){return`firestore_targets_${t}_${e}`}class Pc{constructor(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}static Fs(t,e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Jr(r.error.code,r.error.message))),s?new Pc(t,e,r.state,i):(Hr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Lc{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static Fs(t,e){const n=JSON.parse(e);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Jr(n.error.code,n.error.message))),i?new Lc(t,n.state,r):(Hr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Fc{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Fs(t,e){const n=JSON.parse(e);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Po();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Li(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Fc(t,i):(Hr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Mc{constructor(t,e){this.clientId=t,this.onlineState=e}static Fs(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Mc(e.clientId,e.onlineState):(Hr("SharedClientState","Failed to parse online state: "+t),null)}}class Vc{constructor(){this.activeTargetIds=Po()}Ms(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ls(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jc{constructor(t,e,n,r,i){this.window=t,this.Oe=e,this.persistenceKey=n,this.Bs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new _o(di),this.started=!1,this.js=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Nc(this.persistenceKey,this.Bs),this.Ws=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new Vc),this.Gs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Js=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ys=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Tn();for(const n of t){if(n===this.Bs)continue;const t=this.getItem(Nc(this.persistenceKey,n));if(t){const e=Fc.Fs(n,t);e&&(this.Ks=this.Ks.insert(e.clientId,e))}}this.Xs();const e=this.storage.getItem(this.Js);if(e){const t=this.Zs(e);t&&this.ti(t)}for(const n of this.js)this.qs(n);this.js=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ws,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(t){let e=!1;return this.Ks.forEach((n,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ni(t,"pending")}updateMutationState(t,e,n){this.ni(t,e,n),this.si(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(Oc(this.persistenceKey,t));if(n){const r=Lc.Fs(t,n);r&&(e=r.state)}}return this.ii.Ms(t),this.Xs(),e}removeLocalQueryTarget(t){this.ii.Ls(t),this.Xs()}isLocalQueryTarget(t){return this.ii.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Oc(this.persistenceKey,t))}updateQueryState(t,e,n){this.ri(t,e,n)}handleUserChange(t,e,n){e.forEach(t=>{this.si(t)}),this.currentUser=t,n.forEach(t=>{this.addPendingMutation(t)})}setOnlineState(t){this.oi(t)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return zr("SharedClientState","READ",t,e),e}setItem(t,e){zr("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){zr("SharedClientState","REMOVE",t),this.storage.removeItem(t)}qs(t){const e=t;if(e.storageArea===this.storage){if(zr("SharedClientState","EVENT",e.key,e.newValue),e.key===this.Qs)return void Hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(async()=>{if(this.started){if(null!==e.key)if(this.Gs.test(e.key)){if(null==e.newValue){const t=this.ci(e.key);return this.ui(t,null)}{const t=this.hi(e.key,e.newValue);if(t)return this.ui(t.clientId,t)}}else if(this.zs.test(e.key)){if(null!==e.newValue){const t=this.li(e.key,e.newValue);if(t)return this.fi(t)}}else if(this.Hs.test(e.key)){if(null!==e.newValue){const t=this.di(e.key,e.newValue);if(t)return this.wi(t)}}else if(e.key===this.Js){if(null!==e.newValue){const t=this.Zs(e.newValue);if(t)return this.ti(t)}}else if(e.key===this.Ws){const t=function(t){let e=ci.I;if(null!=t)try{const n=JSON.parse(t);Kr("number"==typeof n),e=n}catch(t){Hr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(e.newValue);t!==ci.I&&this.sequenceNumberHandler(t)}else if(e.key===this.Ys)return this.syncEngine._i()}else this.js.push(e)})}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(t,e,n){const r=new Pc(this.currentUser,t,e,n),i=Rc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Os())}si(t){const e=Rc(this.persistenceKey,this.currentUser,t);this.removeItem(e)}oi(t){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:t}))}ri(t,e,n){const r=Oc(this.persistenceKey,t),i=new Lc(t,e,n);this.setItem(r,i.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(t){const e=this.Gs.exec(t);return e?e[1]:null}hi(t,e){const n=this.ci(t);return Fc.Fs(n,e)}li(t,e){const n=this.zs.exec(t),r=Number(n[1]);return Pc.Fs(new Vr(void 0!==n[2]?n[2]:null),r,e)}di(t,e){const n=this.Hs.exec(t),r=Number(n[1]);return Lc.Fs(r,e)}Zs(t){return Mc.Fs(t)}async fi(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.mi(t.batchId,t.state,t.error);zr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid)}wi(t){return this.syncEngine.gi(t.targetId,t.state,t.error)}ui(t,e){const n=e?this.Ks.insert(t,e):this.Ks.remove(t),r=this.ei(this.Ks),i=this.ei(n),s=[],o=[];return i.forEach(t=>{r.has(t)||s.push(t)}),r.forEach(t=>{i.has(t)||o.push(t)}),this.syncEngine.yi(s,o).then(()=>{this.Ks=n})}ti(t){this.Ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ei(t){let e=Po();return t.forEach((t,n)=>{e=e.unionWith(n.activeTargetIds)}),e}}class Uc{constructor(){this.pi=new Vc,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.pi.Ms(t),this.Ti[t]||"not-current"}updateQueryState(t,e,n){this.Ti[t]=e}removeLocalQueryTarget(t){this.pi.Ls(t)}isLocalQueryTarget(t){return this.pi.activeTargetIds.has(t)}clearQueryState(t){delete this.Ti[t]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(t){return this.pi.activeTargetIds.has(t)}start(){return this.pi=new Vc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class qc{Ei(t){}shutdown(){}}class Bc{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){zr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Pi(){zr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const zc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Hc{constructor(t){this.Vi=t.Vi,this.Si=t.Si}Di(t){this.Ci=t}Ni(t){this.ki=t}onMessage(t){this.xi=t}close(){this.Si()}send(t){this.Vi(t)}$i(){this.Ci()}Fi(t){this.ki(t)}Oi(t){this.xi(t)}}class Gc extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Mi=(t.ssl?"https":"http")+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(t,e,n,r,i){const s=this.Ui(t,e);zr("RestConnection","Sending: ",s,n);const o={};return this.qi(o,r,i),this.Ki(t,s,o,n).then(t=>(zr("RestConnection","Received: ",t),t),e=>{throw Gr("RestConnection",t+" failed with error: ",e,"url: ",s,"request:",n),e})}ji(t,e,n,r,i){return this.Bi(t,e,n,r,i)}qi(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+jr,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((e,n)=>t[n]=e),n&&n.headers.forEach((e,n)=>t[n]=e)}Ui(t,e){return`${this.Mi}/v1/${e}:${zc[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}Ki(t,e,n,r){return new Promise((i,s)=>{const o=new Fr;o.listenOnce(Nr.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Dr.NO_ERROR:const e=o.getResponseJson();zr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Dr.TIMEOUT:zr("Connection",'RPC "'+t+'" timed out'),s(new Jr(Xr.DEADLINE_EXCEEDED,"Request time out"));break;case Dr.HTTP_ERROR:const n=o.getStatus();if(zr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Xr).indexOf(e)>=0?e:Xr.UNKNOWN}(t.status);s(new Jr(e,t.message))}else s(new Jr(Xr.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Jr(Xr.UNAVAILABLE,"Connection failed."));break;default:Wr()}}finally{zr("Connection",'RPC "'+t+'" completed.')}});const a=JSON.stringify(r);o.send(e,"POST",a,n,15)})}Qi(t,e,n){const r=[this.Mi,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=xr(),s=kr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Pr({})),this.qi(a.initMessageHeaders,e,n),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(o())||"object"==typeof navigator&&"ReactNative"===navigator.product||o().indexOf("Electron/")>=0||function(){const t=o();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||o().indexOf("MSAppHost/")>=0||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||(a.httpHeadersOverwriteParam="$httpHeaders");const u=r.join("");zr("Connection","Creating WebChannel: "+u,a);const c=i.createWebChannel(u,a);let l=!1,h=!1;const d=new Hc({Vi:t=>{h?zr("Connection","Not sending because WebChannel is closed:",t):(l||(zr("Connection","Opening WebChannel transport."),c.open(),l=!0),zr("Connection","WebChannel sending:",t),c.send(t))},Si:()=>c.close()}),f=(t,e,n)=>{t.listen(e,t=>{try{n(t)}catch(t){setTimeout(()=>{throw t},0)}})};return f(c,Lr.EventType.OPEN,()=>{h||zr("Connection","WebChannel transport opened.")}),f(c,Lr.EventType.CLOSE,()=>{h||(h=!0,zr("Connection","WebChannel transport closed"),d.Fi())}),f(c,Lr.EventType.ERROR,t=>{h||(h=!0,Gr("Connection","WebChannel transport errored:",t),d.Fi(new Jr(Xr.UNAVAILABLE,"The operation could not be completed")))}),f(c,Lr.EventType.MESSAGE,t=>{var e;if(!h){const n=t.data[0];Kr(!!n);const r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){zr("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=go[t];if(void 0!==e)return wo(e)}(t),n=i.message;void 0===e&&(e=Xr.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),h=!0,d.Fi(new Jr(e,n)),c.close()}else zr("Connection","WebChannel received:",n),d.Oi(n)}}),f(s,Rr.STAT_EVENT,t=>{t.stat===Or.PROXY?zr("Connection","Detected buffering proxy"):t.stat===Or.NOPROXY&&zr("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.$i()},0),d}}function $c(){return"undefined"!=typeof window?window:null}function Wc(){return"undefined"!=typeof document?document:null}function Kc(t){return new $o(t,!0)}class Qc{constructor(t,e,n=1e3,r=1.5,i=6e4){this.Oe=t,this.timerId=e,this.Wi=n,this.Gi=r,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(t){this.cancel();const e=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),r=Math.max(0,e-n);r>0&&zr("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Hi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Yi=Date.now(),t())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class Yc{constructor(t,e,n,r,i,s,o,a){this.Oe=t,this.nr=n,this.sr=r,this.ir=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new Qc(t,e)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(t){this.yr(),this.stream.send(t)}async mr(){if(this.lr())return this.close(0)}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(t,e){this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():e&&e.code===Xr.RESOURCE_EXHAUSTED?(Hr(e.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):e&&e.code===Xr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ni(e)}Tr(){}auth(){this.state=1;const t=this.Er(this.rr),e=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([t,n])=>{this.rr===e&&this.Ir(t,n)},e=>{t(()=>{const t=new Jr(Xr.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Ar(t)})})}Ir(t,e){const n=this.Er(this.rr);this.stream=this.Rr(t,e),this.stream.Di(()=>{n(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(t=>{n(()=>this.Ar(t))}),this.stream.onMessage(t=>{n(()=>this.onMessage(t))})}dr(){this.state=5,this.ur.Zi(async()=>{this.state=0,this.start()})}Ar(t){return zr("PersistentStream","close with error: "+t),this.stream=null,this.close(4,t)}Er(t){return e=>{this.Oe.enqueueAndForget(()=>this.rr===t?e():(zr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xc extends Yc{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.k=i}Rr(t,e){return this.ir.Qi("Listen",t,e)}onMessage(t){this.ur.reset();const e=function(t,e){let n;if("targetChange"in e){const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Wr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.C?(Kr(void 0===e||"string"==typeof e),Ci.fromBase64String(e||"")):(Kr(void 0===e||e instanceof Uint8Array),Ci.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Xr.UNKNOWN:wo(t.code);return new Jr(e,t.message||"")}(o);n=new jo(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ta(t,r.document.name),s=Yo(r.document.updateTime),o=new Yi({mapValue:{fields:r.document.fields}}),a=Ji.newFoundDocument(i,s,o);n=new Mo(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const r=e.documentDelete,i=ta(t,r.document),s=r.readTime?Yo(r.readTime):gi.min(),o=Ji.newNoDocument(i,s);n=new Mo([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ta(t,r.document);n=new Mo([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Wr();{const t=e.filter,r=new mo(t.count||0);n=new Vo(t.targetId,r)}}return n}(this.k,t),n=function(t){if(!("targetChange"in t))return gi.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?gi.min():e.readTime?Yo(e.readTime):gi.min()}(t);return this.listener.Pr(e,n)}br(t){const e={};e.database=ra(this.k),e.addTarget=function(t,e){let n;const r=e.target;return n=rs(r)?{documents:ca(t,r)}:{query:la(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ko(t,e.resumeToken):e.snapshotVersion.compareTo(gi.min())>0&&(n.readTime=Wo(t,e.snapshotVersion.toTimestamp())),n}(this.k,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.gr(e)}vr(t){const e={};e.database=ra(this.k),e.removeTarget=t,this.gr(e)}}class Jc extends Yc{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.k=i,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(t,e){return this.ir.Qi("Write",t,e)}onMessage(t){if(Kr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vr){this.ur.reset();const e=function(t,e){return t&&t.length>0?(Kr(void 0!==e),t.map(t=>function(t,e){let n=Yo(t.updateTime?t.updateTime:e);return n.isEqual(gi.min())&&(n=Yo(e)),new Js(n,t.transformResults||[])}(t,e))):[]}(t.writeResults,t.commitTime),n=Yo(t.commitTime);return this.listener.Cr(n,e)}return Kr(!t.writeResults||0===t.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const t={};t.database=ra(this.k),this.gr(t)}Dr(t){const e={streamToken:this.lastStreamToken,writes:t.map(t=>aa(this.k,t))};this.gr(e)}}class Zc extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.ir=n,this.k=r,this.$r=!1}Fr(){if(this.$r)throw new Jr(Xr.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(t,e,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.ir.Bi(t,e,n,r,i)).catch(t=>{throw"FirebaseError"===t.name?(t.code===Xr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Jr(Xr.UNKNOWN,t.toString())})}ji(t,e,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.ir.ji(t,e,n,r,i)).catch(t=>{throw"FirebaseError"===t.name?(t.code===Xr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Jr(Xr.UNKNOWN,t.toString())})}terminate(){this.$r=!0}}class tl{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(t){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: "+t.toString()),this.Ur("Offline")))}set(t){this.jr(),this.Or=0,"Online"===t&&(this.Lr=!1),this.Ur(t)}Ur(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}qr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Hr(e),this.Lr=!1):zr("OnlineStateTracker",e)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class el{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei(t=>{n.enqueueAndForget(async()=>{ll(this)&&(zr("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Yr(t);e.Gr.add(4),await rl(e),e.Jr.set("Unknown"),e.Gr.delete(4),await nl(e)}(this))})}),this.Jr=new tl(n,r)}}async function nl(t){if(ll(t))for(const e of t.zr)await e(!0)}async function rl(t){for(const e of t.zr)await e(!1)}function il(t,e){const n=Yr(t);n.Wr.has(e.targetId)||(n.Wr.set(e.targetId,e),cl(n)?ul(n):Al(n).lr()&&ol(n,e))}function sl(t,e){const n=Yr(t),r=Al(n);n.Wr.delete(e),r.lr()&&al(n,e),0===n.Wr.size&&(r.lr()?r._r():ll(n)&&n.Jr.set("Unknown"))}function ol(t,e){t.Yr.X(e.targetId),Al(t).br(e)}function al(t,e){t.Yr.X(e),Al(t).vr(e)}function ul(t){t.Yr=new qo({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Wr.get(e)||null}),Al(t).start(),t.Jr.Br()}function cl(t){return ll(t)&&!Al(t).hr()&&t.Wr.size>0}function ll(t){return 0===Yr(t).Gr.size}function hl(t){t.Yr=void 0}async function dl(t){t.Wr.forEach((e,n)=>{ol(t,e)})}async function fl(t,e){hl(t),cl(t)?(t.Jr.Kr(e),ul(t)):t.Jr.set("Unknown")}async function pl(t,e,n){if(t.Jr.set("Online"),e instanceof jo&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.Wr.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.Wr.delete(r),t.Yr.removeTarget(r))}(t,e)}catch(n){zr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ml(t,n)}else if(e instanceof Mo?t.Yr.ot(e):e instanceof Vo?t.Yr.dt(e):t.Yr.ut(e),!n.isEqual(gi.min()))try{const e=await dc(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Yr.gt(e);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.Wr.get(r);i&&t.Wr.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(e=>{const n=t.Wr.get(e);if(!n)return;t.Wr.set(e,n.withResumeToken(Ci.EMPTY_BYTE_STRING,n.snapshotVersion)),al(t,e);const r=new su(n.target,e,1,n.sequenceNumber);ol(t,r)}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){zr("RemoteStore","Failed to raise snapshot:",e),await ml(t,e)}}async function ml(t,e,n){if(!Ya(e))throw e;t.Gr.add(1),await rl(t),t.Jr.set("Offline"),n||(n=()=>dc(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{zr("RemoteStore","Retrying IndexedDB access"),await n(),t.Gr.delete(1),await nl(t)})}function gl(t,e){return e().catch(n=>ml(t,n,e))}async function yl(t){const e=Yr(t),n=xl(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;vl(e);)try{const t=await pc(e.localStore,r);if(null===t){0===e.Qr.length&&n._r();break}r=t.batchId,wl(e,t)}catch(t){await ml(e,t)}_l(e)&&bl(e)}function vl(t){return ll(t)&&t.Qr.length<10}function wl(t,e){t.Qr.push(e);const n=xl(t);n.lr()&&n.Sr&&n.Dr(e.mutations)}function _l(t){return ll(t)&&!xl(t).hr()&&t.Qr.length>0}function bl(t){xl(t).start()}async function El(t){xl(t).kr()}async function Sl(t){const e=xl(t);for(const n of t.Qr)e.Dr(n.mutations)}async function Tl(t,e,n){const r=t.Qr.shift(),i=iu.from(r,e,n);await gl(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await yl(t)}async function Il(t,e){e&&xl(t).Sr&&await async function(t,e){if(vo(n=e.code)&&n!==Xr.ABORTED){const n=t.Qr.shift();xl(t).wr(),await gl(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),await yl(t)}var n}(t,e),_l(t)&&bl(t)}async function Cl(t,e){const n=Yr(t);e?(n.Gr.delete(2),await nl(n)):e||(n.Gr.add(2),await rl(n),n.Jr.set("Unknown"))}function Al(t){return t.Xr||(t.Xr=function(t,e,n){const r=Yr(t);return r.Fr(),new Xc(e,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(t.datastore,t.asyncQueue,{Di:dl.bind(null,t),Ni:fl.bind(null,t),Pr:pl.bind(null,t)}),t.zr.push(async e=>{e?(t.Xr.wr(),cl(t)?ul(t):t.Jr.set("Unknown")):(await t.Xr.stop(),hl(t))})),t.Xr}function xl(t){return t.Zr||(t.Zr=function(t,e,n){const r=Yr(t);return r.Fr(),new Jc(e,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(t.datastore,t.asyncQueue,{Di:El.bind(null,t),Ni:Il.bind(null,t),Nr:Sl.bind(null,t),Cr:Tl.bind(null,t)}),t.zr.push(async e=>{e?(t.Zr.wr(),await yl(t)):(await t.Zr.stop(),t.Qr.length>0&&(zr("RemoteStore",`Stopping write stream with ${t.Qr.length} pending writes`),t.Qr=[]))})),t.Zr}class kl{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new kl(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jr(Xr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dl(t,e){if(Hr("AsyncQueue",`${e}: ${t}`),Ya(t))return new Jr(Xr.UNAVAILABLE,`${e}: ${t}`);throw t}class Nl{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Fi.comparator(e.key,n.key):(t,e)=>Fi.comparator(t.key,e.key),this.keyedMap=xo(),this.sortedSet=new _o(this.comparator)}static emptySet(t){return new Nl(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Nl))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Nl;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Rl{constructor(){this.eo=new _o(Fi.comparator)}track(t){const e=t.doc.key,n=this.eo.get(e);n?0!==t.type&&3===n.type?this.eo=this.eo.insert(e,t):3===t.type&&1!==n.type?this.eo=this.eo.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.eo=this.eo.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.eo=this.eo.remove(e):1===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):Wr():this.eo=this.eo.insert(e,t)}no(){const t=[];return this.eo.inorderTraversal((e,n)=>{t.push(n)}),t}}class Ol{constructor(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,r){const i=[];return e.forEach(t=>{i.push({type:0,doc:t})}),new Ol(t,e,Nl.emptySet(e),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ds(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}class Pl{constructor(){this.so=void 0,this.listeners=[]}}class Ll{constructor(){this.queries=new Gu(t=>Ns(t),Ds),this.onlineState="Unknown",this.io=new Set}}async function Fl(t,e){const n=Yr(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Pl),i)try{s.so=await n.onListen(r)}catch(t){const n=Dl(t,`Initialization of query '${Rs(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.ro(n.onlineState),s.so&&e.oo(s.so)&&Ul(n)}async function Ml(t,e){const n=Yr(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Vl(t,e){const n=Yr(t);let r=!1;for(const i of e){const t=n.queries.get(i.query);if(t){for(const e of t.listeners)e.oo(i)&&(r=!0);t.so=i}}r&&Ul(n)}function jl(t,e,n){const r=Yr(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function Ul(t){t.io.forEach(t=>{t.next()})}class ql{constructor(t,e,n){this.query=t,this.ao=e,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Ol(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.co?this.ho(t)&&(this.ao.next(t),e=!0):this.lo(t,this.onlineState)&&(this.fo(t),e=!0),this.uo=t,e}onError(t){this.ao.error(t)}ro(t){this.onlineState=t;let e=!1;return this.uo&&!this.co&&this.lo(this.uo,t)&&(this.fo(this.uo),e=!0),e}lo(t,e){return!t.fromCache||!(this.options.wo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}ho(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(t){t=Ol.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.ao.next(t)}}class Bl{constructor(t,e){this.payload=t,this.byteLength=e}_o(){return"metadata"in this.payload}}class zl{constructor(t){this.k=t}Hn(t){return ta(this.k,t)}Jn(t){return t.metadata.exists?oa(this.k,t.document,!1):Ji.newNoDocument(this.Hn(t.metadata.name),this.Yn(t.metadata.readTime))}Yn(t){return Yo(t)}}class Hl{constructor(t,e,n){this.mo=t,this.localStore=e,this.k=n,this.queries=[],this.documents=[],this.progress=Gl(t)}yo(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}po(t){const e=new Map,n=new zl(this.k);for(const r of t)if(r.metadata.queries){const t=n.Hn(r.metadata.name);for(const n of r.metadata.queries){const r=(e.get(n)||Ro()).add(t);e.set(n,r)}}return e}async complete(){const t=await async function(t,e,n,r){const i=Yr(t);let s=Ro(),o=Co(),a=Do();for(const l of n){const t=e.Hn(l.metadata.name);l.document&&(s=s.add(t)),o=o.insert(t,e.Jn(l)),a=a.insert(t,e.Yn(l.metadata.readTime))}const u=i.Qn.newChangeBuffer({trackRemovals:!0}),c=await mc(i,function(t){return xs(bs(bi.fromString("__bundle__/docs/"+t)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",t=>fc(t,u,o,gi.min(),a).next(e=>(u.apply(t),e)).next(e=>i.He.removeMatchingKeysForTargetId(t,c.targetId).next(()=>i.He.addMatchingKeys(t,s,c.targetId)).next(()=>i.Wn.Vn(t,e)).next(()=>e)))}(this.localStore,new zl(this.k),this.documents,this.mo.id),e=this.po(this.documents);for(const n of this.queries)await _c(this.localStore,n,e.get(n.name));return this.progress.taskState="Success",new sc(Object.assign({},this.progress),t)}}function Gl(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class $l{constructor(t){this.key=t}}class Wl{constructor(t){this.key=t}}class Kl{constructor(t,e){this.query=t,this.To=e,this.Eo=null,this.current=!1,this.Io=Ro(),this.mutatedKeys=Ro(),this.Ao=Ps(t),this.Ro=new Nl(this.Ao)}get Po(){return this.To}bo(t,e){const n=e?e.vo:new Rl,r=e?e.Ro:this.Ro;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=Es(this.query)&&r.size===this.query.limit?r.last():null,u=Ss(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((t,e)=>{const c=r.get(t),l=Os(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Vo(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Ao(l,a)>0||u&&this.Ao(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))}),Es(this.query)||Ss(this.query))for(;s.size>this.query.limit;){const t=Es(this.query)?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Ro:s,vo:n,Bn:o,mutatedKeys:i}}Vo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.Ro;this.Ro=t.Ro,this.mutatedKeys=t.mutatedKeys;const i=t.vo.no();i.sort((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wr()}};return n(t)-n(e)}(t.type,e.type)||this.Ao(t.doc,e.doc)),this.So(n);const s=e?this.Do():[],o=0===this.Io.size&&this.current?1:0,a=o!==this.Eo;return this.Eo=o,0!==i.length||a?{snapshot:new Ol(this.query,t.Ro,r,i,t.mutatedKeys,0===o,a,!1),Co:s}:{Co:s}}ro(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new Rl,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(t){return!this.To.has(t)&&!!this.Ro.has(t)&&!this.Ro.get(t).hasLocalMutations}So(t){t&&(t.addedDocuments.forEach(t=>this.To=this.To.add(t)),t.modifiedDocuments.forEach(t=>{}),t.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=t.current)}Do(){if(!this.current)return[];const t=this.Io;this.Io=Ro(),this.Ro.forEach(t=>{this.No(t.key)&&(this.Io=this.Io.add(t.key))});const e=[];return t.forEach(t=>{this.Io.has(t)||e.push(new Wl(t))}),this.Io.forEach(n=>{t.has(n)||e.push(new $l(n))}),e}ko(t){this.To=t.zn,this.Io=Ro();const e=this.bo(t.documents);return this.applyChanges(e,!0)}xo(){return Ol.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class Ql{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Yl{constructor(t){this.key=t,this.$o=!1}}class Xl{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Fo={},this.Oo=new Gu(t=>Ns(t),Ds),this.Mo=new Map,this.Lo=new Set,this.Bo=new _o(Fi.comparator),this.Uo=new Map,this.qo=new Ec,this.Ko={},this.jo=new Map,this.Qo=Ou.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}async function Jl(t,e){const n=Th(t);let r,i;const s=n.Oo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.xo();else{const t=await mc(n.localStore,xs(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await Zl(n,e,r,"current"===s),n.isPrimaryClient&&il(n.remoteStore,t)}return i}async function Zl(t,e,n,r){t.Go=(e,n,r)=>async function(t,e,n,r){let i=e.view.bo(n);i.Bn&&(i=await yc(t.localStore,e.query,!1).then(({documents:t})=>e.view.bo(t,i)));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return lh(t,e.targetId,o.Co),o.snapshot}(t,e,n,r);const i=await yc(t.localStore,e,!0),s=new Kl(e,i.zn),o=s.bo(i.documents),a=Fo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a);lh(t,n,u.Co);const c=new Ql(e,n,s);return t.Oo.set(e,c),t.Mo.has(n)?t.Mo.get(n).push(e):t.Mo.set(n,[e]),u.snapshot}async function th(t,e){const n=Yr(t),r=n.Oo.get(e),i=n.Mo.get(r.targetId);if(i.length>1)return n.Mo.set(r.targetId,i.filter(t=>!Ds(t,e))),void n.Oo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await gc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),sl(n.remoteStore,r.targetId),uh(n,r.targetId)}).catch(Vu)):(uh(n,r.targetId),await gc(n.localStore,r.targetId,!0))}async function eh(t,e){const n=Yr(t);try{const t=await function(t,e){const n=Yr(t),r=e.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",t=>{const s=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const o=[];e.targetChanges.forEach((e,s)=>{const a=i.get(s);if(!a)return;o.push(n.He.removeMatchingKeys(t,e.removedDocuments,s).next(()=>n.He.addMatchingKeys(t,e.addedDocuments,s)));const u=e.resumeToken;if(u.approximateByteSize()>0){const c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return Kr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.He.updateTargetData(t,c))}});let a=Co();if(e.documentUpdates.forEach((r,i)=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(fc(t,s,e.documentUpdates,r,void 0).next(t=>{a=t})),!r.isEqual(gi.min())){const e=n.He.getLastRemoteSnapshotVersion(t).next(e=>n.He.setTargetsMetadata(t,t.currentSequenceNumber,r));o.push(e)}return Ga.waitFor(o).next(()=>s.apply(t)).next(()=>n.Wn.Vn(t,a)).next(()=>a)}).then(t=>(n.qn=i,t))}(n.localStore,e);e.targetChanges.forEach((t,e)=>{const r=n.Uo.get(e);r&&(Kr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.$o=!0:t.modifiedDocuments.size>0?Kr(r.$o):t.removedDocuments.size>0&&(Kr(r.$o),r.$o=!1))}),await fh(n,t,e)}catch(t){await Vu(t)}}function nh(t,e,n){const r=Yr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.Oo.forEach((n,r)=>{const i=r.view.ro(e);i.snapshot&&t.push(i.snapshot)}),function(t,e){const n=Yr(t);n.onlineState=e;let r=!1;n.queries.forEach((t,n)=>{for(const i of n.listeners)i.ro(e)&&(r=!0)}),r&&Ul(n)}(r.eventManager,e),t.length&&r.Fo.Pr(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rh(t,e,n){const r=Yr(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Uo.get(e),s=i&&i.key;if(s){let t=new _o(Fi.comparator);t=t.insert(s,Ji.newNoDocument(s,gi.min()));const n=Ro().add(s),i=new Lo(gi.min(),new Map,new So(di),t,n);await eh(r,i),r.Bo=r.Bo.remove(s),r.Uo.delete(e),dh(r)}else await gc(r.localStore,e,!1).then(()=>uh(r,e,n)).catch(Vu)}async function ih(t,e){const n=Yr(t),r=e.batch.batchId;try{const t=await function(t,e){const n=Yr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=Ga.resolve();return s.forEach(t=>{o=o.next(()=>r.getEntry(e,t)).next(e=>{const s=n.docVersions.get(t);Kr(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(()=>t.An.removeMutationBatch(e,i))}(n,t,e,i).next(()=>i.apply(t)).next(()=>n.An.performConsistencyCheck(t)).next(()=>n.Wn.vn(t,r))})}(n.localStore,e);ah(n,r,null),oh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fh(n,t)}catch(t){await Vu(t)}}async function sh(t,e,n){const r=Yr(t);try{const t=await function(t,e){const n=Yr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",t=>{let r;return n.An.lookupMutationBatch(t,e).next(e=>(Kr(null!==e),r=e.keys(),n.An.removeMutationBatch(t,e))).next(()=>n.An.performConsistencyCheck(t)).next(()=>n.Wn.vn(t,r))})}(r.localStore,e);ah(r,e,n),oh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fh(r,t)}catch(n){await Vu(n)}}function oh(t,e){(t.jo.get(e)||[]).forEach(t=>{t.resolve()}),t.jo.delete(e)}function ah(t,e,n){const r=Yr(t);let i=r.Ko[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Ko[r.currentUser.toKey()]=i}}function uh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Mo.get(e))t.Oo.delete(r),n&&t.Fo.zo(r,n);t.Mo.delete(e),t.isPrimaryClient&&t.qo.us(e).forEach(e=>{t.qo.containsKey(e)||ch(t,e)})}function ch(t,e){t.Lo.delete(e.path.canonicalString());const n=t.Bo.get(e);null!==n&&(sl(t.remoteStore,n),t.Bo=t.Bo.remove(e),t.Uo.delete(n),dh(t))}function lh(t,e,n){for(const r of n)r instanceof $l?(t.qo.addReference(r.key,e),hh(t,r)):r instanceof Wl?(zr("SyncEngine","Document no longer in limbo: "+r.key),t.qo.removeReference(r.key,e),t.qo.containsKey(r.key)||ch(t,r.key)):Wr()}function hh(t,e){const n=e.key,r=n.path.canonicalString();t.Bo.get(n)||t.Lo.has(r)||(zr("SyncEngine","New document in limbo: "+n),t.Lo.add(r),dh(t))}function dh(t){for(;t.Lo.size>0&&t.Bo.size<t.maxConcurrentLimboResolutions;){const e=t.Lo.values().next().value;t.Lo.delete(e);const n=new Fi(bi.fromString(e)),r=t.Qo.next();t.Uo.set(r,new Yl(n)),t.Bo=t.Bo.insert(n,r),il(t.remoteStore,new su(xs(bs(n.path)),r,2,ci.I))}}async function fh(t,e,n){const r=Yr(t),i=[],s=[],o=[];r.Oo.isEmpty()||(r.Oo.forEach((t,a)=>{o.push(r.Go(a,e,n).then(t=>{if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);const e=ac.$n(a.targetId,t);s.push(e)}}))}),await Promise.all(o),r.Fo.Pr(i),await async function(t,e){const n=Yr(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",t=>Ga.forEach(e,e=>Ga.forEach(e.kn,r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r)).next(()=>Ga.forEach(e.xn,r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))}catch(t){if(!Ya(t))throw t;zr("LocalStore","Failed to update sequence numbers: "+t)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.qn.get(t),r=e.withLastLimboFreeSnapshotVersion(e.snapshotVersion);n.qn=n.qn.insert(t,r)}}}(r.localStore,s))}async function ph(t,e){const n=Yr(t);if(!n.currentUser.isEqual(e)){zr("SyncEngine","User change. New user:",e.toKey());const t=await hc(n.localStore,e);n.currentUser=e,function(t,e){t.jo.forEach(t=>{t.forEach(t=>{t.reject(new Jr(Xr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.jo.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await fh(n,t.Gn)}}function mh(t,e){const n=Yr(t),r=n.Uo.get(e);if(r&&r.$o)return Ro().add(r.key);{let t=Ro();const r=n.Mo.get(e);if(!r)return t;for(const e of r){const r=n.Oo.get(e);t=t.unionWith(r.view.Po)}return t}}async function gh(t,e){const n=Yr(t),r=await yc(n.localStore,e.query,!0),i=e.view.ko(r);return n.isPrimaryClient&&lh(n,e.targetId,i.Co),i}async function yh(t){const e=Yr(t);return wc(e.localStore).then(t=>fh(e,t))}async function vh(t,e,n,r){const i=Yr(t),s=await function(t,e){const n=Yr(t),r=Yr(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",t=>r.Zt(t,e).next(e=>e?n.Wn.vn(t,e):Ga.resolve(null)))}(i.localStore,e);null!==s?("pending"===n?await yl(i.remoteStore):"acknowledged"===n||"rejected"===n?(ah(i,e,r||null),oh(i,e),function(t,e){Yr(Yr(t).An).ee(e)}(i.localStore,e)):Wr(),await fh(i,s)):zr("SyncEngine","Cannot apply mutation batch with id: "+e)}async function wh(t,e,n){const r=Yr(t),i=[],s=[];for(const o of e){let t;const e=r.Mo.get(o);if(e&&0!==e.length){t=await mc(r.localStore,xs(e[0]));for(const t of e){const e=r.Oo.get(t),n=await gh(r,e);n.snapshot&&s.push(n.snapshot)}}else{const e=await vc(r.localStore,o);t=await mc(r.localStore,e),await Zl(r,_h(e),o,!1)}i.push(t)}return r.Fo.Pr(s),i}function _h(t){return _s(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function bh(t){const e=Yr(t);return Yr(Yr(e.localStore).persistence).Tn()}async function Eh(t,e,n,r){const i=Yr(t);if(i.Wo)zr("SyncEngine","Ignoring unexpected query state notification.");else if(i.Mo.has(e))switch(n){case"current":case"not-current":{const t=await wc(i.localStore),r=Lo.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);await fh(i,t,r);break}case"rejected":await gc(i.localStore,e,!0),uh(i,e,r);break;default:Wr()}}async function Sh(t,e,n){const r=Th(t);if(r.Wo){for(const t of e){if(r.Mo.has(t)){zr("SyncEngine","Adding an already active target "+t);continue}const e=await vc(r.localStore,t),n=await mc(r.localStore,e);await Zl(r,_h(e),n.targetId,!1),il(r.remoteStore,n)}for(const t of n)r.Mo.has(t)&&await gc(r.localStore,t,!1).then(()=>{sl(r.remoteStore,t),uh(r,t)}).catch(Vu)}}function Th(t){const e=Yr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rh.bind(null,e),e.Fo.Pr=Vl.bind(null,e.eventManager),e.Fo.zo=jl.bind(null,e.eventManager),e}function Ih(t){const e=Yr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ih.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sh.bind(null,e),e}class Ch{constructor(){this.synchronizeTabs=!1}async initialize(t){this.k=Kc(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),await this.persistence.start(),this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t)}Xo(t){return null}Zo(t){return lc(this.persistence,new uc,t.initialUser,this.k)}Yo(t){return new xc(Dc.ks,this.k)}Jo(t){return new Uc}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ah extends Ch{constructor(t,e,n){super(),this.ta=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await async function(t){const e=Yr(t);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(t){const e=Yu(t);let n=gi.min();return e.jt({index:Oa.readTimeIndex,reverse:!0},(t,e,r)=>{e.readTime&&(n=lu(e.readTime)),r.done()}).next(()=>n)}(t)).then(t=>{e.jn=t})}(this.localStore),await this.ta.initialize(this,t),await Ih(this.ta.syncEngine),await yl(this.ta.remoteStore),await this.persistence.sn(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve()))}Zo(t){return lc(this.persistence,new uc,t.initialUser,this.k)}Xo(t){return new qu(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}Yo(t){const e=ic(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Iu.withCacheSize(this.cacheSizeBytes):Iu.DEFAULT;return new ec(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,$c(),Wc(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(t){return new Uc}}class xh extends Ah{constructor(t,e){super(t,e,!1),this.ta=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.ta.syncEngine;this.sharedClientState instanceof jc&&(this.sharedClientState.syncEngine={mi:vh.bind(null,e),gi:Eh.bind(null,e),yi:Sh.bind(null,e),Tn:bh.bind(null,e),_i:yh.bind(null,e)},await this.sharedClientState.start()),await this.persistence.sn(async t=>{await async function(t,e){const n=Yr(t);if(Th(n),Ih(n),!0===e&&!0!==n.Wo){const t=n.sharedClientState.getAllActiveQueryTargets(),e=await wh(n,t.toArray());n.Wo=!0,await Cl(n.remoteStore,!0);for(const r of e)il(n.remoteStore,r)}else if(!1===e&&!1!==n.Wo){const t=[];let e=Promise.resolve();n.Mo.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?t.push(i):e=e.then(()=>(uh(n,i),gc(n.localStore,i,!0))),sl(n.remoteStore,i)}),await e,await wh(n,t),function(t){const e=Yr(t);e.Uo.forEach((t,n)=>{sl(e.remoteStore,n)}),e.qo.hs(),e.Uo=new Map,e.Bo=new _o(Fi.comparator)}(n),n.Wo=!1,await Cl(n.remoteStore,!1)}}(this.ta.syncEngine,t),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop())})}Jo(t){const e=$c();if(!jc.bt(e))throw new Jr(Xr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=ic(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new jc(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class kh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>nh(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=ph.bind(null,this.syncEngine),await Cl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Ll}createDatastore(t){const e=Kc(t.databaseInfo.databaseId),n=new Gc(t.databaseInfo);return function(t,e,n,r){return new Zc(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=t=>nh(this.syncEngine,t,0),s=Bc.bt()?new Bc:new qc,new el(e,n,r,i,s);var e,n,r,i,s}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Xl(t,e,n,r,i,s);return o&&(a.Wo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=Yr(t);zr("RemoteStore","RemoteStore shutting down."),e.Gr.add(5),await rl(e),e.Hr.shutdown(),e.Jr.set("Unknown")}(this.remoteStore)}}function Dh(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class Nh{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.ea(this.observer.next,t)}error(t){this.observer.error?this.ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}na(){this.muted=!0}ea(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class Rh{constructor(t,e){this.sa=t,this.k=e,this.metadata=new Zr,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(t=>{t&&t._o()?this.metadata.resolve(t.payload.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},t=>this.metadata.reject(t))}close(){return this.sa.cancel()}async getMetadata(){return this.metadata.promise}async Ho(){return await this.getMetadata(),this.ra()}async ra(){const t=await this.oa();if(null===t)return null;const e=this.ia.decode(t),n=Number(e);isNaN(n)&&this.aa(`length string (${e}) is not valid number`);const r=await this.ca(n);return new Bl(JSON.parse(r),t.length+n)}ua(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}async oa(){for(;this.ua()<0&&!(await this.ha()););if(0===this.buffer.length)return null;const t=this.ua();t<0&&this.aa("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async ca(t){for(;this.buffer.length<t;)await this.ha()&&this.aa("Reached the end of bundle when more is expected.");const e=this.ia.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}aa(t){throw this.sa.cancel(),new Error("Invalid bundle format: "+t)}async ha(){const t=await this.sa.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}class Oh{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Jr(Xr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const e=await async function(t,e){const n=Yr(t),r=ra(n.k)+"/documents",i={documents:e.map(t=>Zo(n.k,t))},s=await n.ji("BatchGetDocuments",r,i),o=new Map;s.forEach(t=>{const e=function(t,e){return"found"in e?function(t,e){Kr(!!e.found);const n=ta(t,e.found.name),r=Yo(e.found.updateTime),i=new Yi({mapValue:{fields:e.found.fields}});return Ji.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Kr(!!e.missing),Kr(!!e.readTime);const n=ta(t,e.missing),r=Yo(e.readTime);return Ji.newNoDocument(n,r)}(t,e):Wr()}(n.k,t);o.set(e.key.toString(),e)});const a=[];return e.forEach(t=>{const e=o.get(t.toString());Kr(!!e),a.push(e)}),a}(this.datastore,t);return e.forEach(t=>this.recordVersion(t)),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new fo(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,e)=>{const n=Fi.fromPath(e);this.mutations.push(new po(n,this.precondition(n)))}),await async function(t,e){const n=Yr(t),r=ra(n.k)+"/documents",i={writes:e.map(t=>aa(n.k,t))};await n.Bi("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Wr();e=gi.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Jr(Xr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Zs.updateTime(e):Zs.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(gi.min()))throw new Jr(Xr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zs.updateTime(e)}return Zs.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Ph{constructor(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.la=5,this.ur=new Qc(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){this.ur.Zi(async()=>{const t=new Oh(this.datastore),e=this.da(t);e&&e.then(e=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(e)}).catch(t=>{this.wa(t)}))}).catch(t=>{this.wa(t)})})}da(t){try{const e=this.updateFunction(t);return!Oi(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(t){this.la>0&&this._a(t)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(t)}_a(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!vo(e)}return!1}}class Lh{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Vr.UNAUTHENTICATED,this.clientId=hi.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async t=>{zr("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t}),this.appCheckCredentials.start(n,()=>Promise.resolve())}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Jr(Xr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Dl(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function Fh(t,e){t.asyncQueue.verifyOperationInProgress(),zr("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async t=>{r.isEqual(t)||(await hc(e.localStore,t),r=t)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function Mh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Vh(t);zr("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(t=>async function(t,e){const n=Yr(t);n.asyncQueue.verifyOperationInProgress(),zr("RemoteStore","RemoteStore received new credentials");const r=ll(n);n.Gr.add(3),await rl(n),r&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Gr.delete(3),await nl(n)}(e.remoteStore,t)),t.onlineComponents=e}async function Vh(t){return t.offlineComponents||(zr("FirestoreClient","Using default OfflineComponentProvider"),await Fh(t,new Ch)),t.offlineComponents}async function jh(t){return t.onlineComponents||(zr("FirestoreClient","Using default OnlineComponentProvider"),await Mh(t,new kh)),t.onlineComponents}function Uh(t){return Vh(t).then(t=>t.persistence)}function qh(t){return Vh(t).then(t=>t.localStore)}function Bh(t){return jh(t).then(t=>t.remoteStore)}function zh(t){return jh(t).then(t=>t.syncEngine)}async function Hh(t){const e=await jh(t),n=e.eventManager;return n.onListen=Jl.bind(null,e.syncEngine),n.onUnlisten=th.bind(null,e.syncEngine),n}function Gh(t,e,n={}){const r=new Zr;return t.asyncQueue.enqueueAndForget(async()=>function(t,e,n,r,i){const s=new Nh({next:s=>{e.enqueueAndForget(()=>Ml(t,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Jr(Xr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Jr(Xr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:t=>i.reject(t)}),o=new ql(bs(n.path),s,{includeMetadataChanges:!0,wo:!0});return Fl(t,o)}(await Hh(t),t.asyncQueue,e,n,r)),r.promise}function $h(t,e,n={}){const r=new Zr;return t.asyncQueue.enqueueAndForget(async()=>function(t,e,n,r,i){const s=new Nh({next:n=>{e.enqueueAndForget(()=>Ml(t,o)),n.fromCache&&"server"===r.source?i.reject(new Jr(Xr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new ql(n,s,{includeMetadataChanges:!0,wo:!0});return Fl(t,o)}(await Hh(t),t.asyncQueue,e,n,r)),r.promise}class Wh{constructor(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Kh{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Kh&&t.projectId===this.projectId&&t.database===this.database}}const Qh=new Map;function Yh(t,e,n){if(!n)throw new Jr(Xr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Xh(t,e,n,r){if(!0===e&&!0===r)throw new Jr(Xr.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jh(t){if(!Fi.isDocumentKey(t))throw new Jr(Xr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zh(t){if(Fi.isDocumentKey(t))throw new Jr(Xr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function td(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Wr()}function ed(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Jr(Xr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=td(t);throw new Jr(Xr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nd(t,e){if(e<=0)throw new Jr(Xr.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class rd{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Jr(Xr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Jr(Xr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Xh("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class id{constructor(t,e,n){this._authCredentials=e,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rd({}),this._settingsFrozen=!1,t instanceof Kh?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Jr(Xr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kh(t.options.projectId)}(t))}get app(){if(!this._app)throw new Jr(Xr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Jr(Xr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rd(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new ei;switch(t.type){case"gapi":const e=t.client;return Kr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new si(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Jr(Xr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Qh.get(t);e&&(zr("ComponentProvider","Removing Datastore"),Qh.delete(t),e.terminate())}(this),Promise.resolve()}}function sd(t,e,n,r={}){var i;const o=(t=ed(t,id))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Gr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=Vr.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Jr(Xr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Vr(o)}t._authCredentials=new ni(new ti(e,n))}}class od{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ud(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new od(this.firestore,t,this._key)}}class ad{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new ad(this.firestore,t,this._query)}}class ud extends ad{constructor(t,e,n){super(t,e,bs(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new od(this.firestore,null,new Fi(t))}withConverter(t){return new ud(this.firestore,t,this._path)}}function cd(t,e,...n){if(t=h(t),Yh("collection","path",e),t instanceof id){const r=bi.fromString(e,...n);return Zh(r),new ud(t,null,r)}{if(!(t instanceof od||t instanceof ud))throw new Jr(Xr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(bi.fromString(e,...n));return Zh(r),new ud(t.firestore,null,r)}}function ld(t,e){if(t=ed(t,id),Yh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Jr(Xr.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ad(t,null,function(t){return new ws(bi.emptyPath(),t)}(e))}function hd(t,e,...n){if(t=h(t),1===arguments.length&&(e=hi.A()),Yh("doc","path",e),t instanceof id){const r=bi.fromString(e,...n);return Jh(r),new od(t,null,new Fi(r))}{if(!(t instanceof od||t instanceof ud))throw new Jr(Xr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(bi.fromString(e,...n));return Jh(r),new od(t.firestore,t instanceof ud?t.converter:null,new Fi(r))}}function dd(t,e){return t=h(t),e=h(e),(t instanceof od||t instanceof ud)&&(e instanceof od||e instanceof ud)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function fd(t,e){return t=h(t),e=h(e),t instanceof ad&&e instanceof ad&&t.firestore===e.firestore&&Ds(t._query,e._query)&&t.converter===e.converter}class pd{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new Qc(this,"async_queue_retry"),this.Ra=()=>{const t=Wc();t&&zr("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const t=Wc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pa(),this.ba(t)}enterRestrictedMode(t){if(!this.ya){this.ya=!0,this.Ia=t||!1;const e=Wc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ra)}}enqueue(t){if(this.Pa(),this.ya)return new Promise(()=>{});const e=new Zr;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ga.push(t),this.va()))}async va(){if(0!==this.ga.length){try{await this.ga[0](),this.ga.shift(),this.ur.reset()}catch(t){if(!Ya(t))throw t;zr("AsyncQueue","Operation failed with retryable error: "+t)}this.ga.length>0&&this.ur.Zi(()=>this.va())}}ba(t){const e=this.ma.then(()=>(this.Ea=!0,t().catch(t=>{throw this.Ta=t,this.Ea=!1,Hr("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(t=>(this.Ea=!1,t))));return this.ma=e,e}enqueueAfterDelay(t,e,n){this.Pa(),this.Aa.indexOf(t)>-1&&(e=0);const r=kl.createAndSchedule(this,t,e,n,t=>this.Va(t));return this.pa.push(r),r}Pa(){this.Ta&&Wr()}verifyOperationInProgress(){}async Sa(){let t;do{t=this.ma,await t}while(t!==this.ma)}Da(t){for(const e of this.pa)if(e.timerId===t)return!0;return!1}Ca(t){return this.Sa().then(()=>{this.pa.sort((t,e)=>t.targetTimeMs-e.targetTimeMs);for(const e of this.pa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Sa()})}Na(t){this.Aa.push(t)}Va(t){const e=this.pa.indexOf(t);this.pa.splice(e,1)}}function md(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(t)}class gd{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}const yd=-1;class vd extends id{constructor(t,e,n){super(t,e,n),this.type="firestore",this._queue=new pd,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Ed(this),this._firestoreClient.terminate()}}function wd(t,e){const n=k(t,"firestore");if(n.isInitialized()){const t=n.getImmediate();if(function t(e,n){if(e===n)return!0;const r=Object.keys(e),i=Object.keys(n);for(const s of r){if(!i.includes(s))return!1;const r=e[s],o=n[s];if(l(r)&&l(o)){if(!t(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}(n.getOptions(),e))return t;throw new Jr(Xr.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==e.cacheSizeBytes&&-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Jr(Xr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e})}function _d(t=function(t="[DEFAULT]"){const e=I.get(t);if(!e)throw D.create("no-app",{appName:t});return e}()){return k(t,"firestore").getImmediate()}function bd(t){return t._firestoreClient||Ed(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ed(t){var e;const n=t._freezeSettings(),r=function(t,e,n,r){return new Wh(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Lh(t._authCredentials,t._appCheckCredentials,t._queue,r)}function Sd(t,e){Od(t=ed(t,vd));const n=bd(t),r=t._freezeSettings(),i=new kh;return Id(n,i,new Ah(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function Td(t){Od(t=ed(t,vd));const e=bd(t),n=t._freezeSettings(),r=new kh;return Id(e,r,new xh(r,n.cacheSizeBytes))}function Id(t,e,n){const r=new Zr;return t.asyncQueue.enqueue(async()=>{try{await Fh(t,n),await Mh(t,e),r.resolve()}catch(t){if(!function(t){return"FirebaseError"===t.name?t.code===Xr.FAILED_PRECONDITION||t.code===Xr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(t))throw t;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.reject(t)}}).then(()=>r.promise)}function Cd(t){if(t._initialized&&!t._terminated)throw new Jr(Xr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Zr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(t){if(!Wa.bt())return Promise.resolve();const e=t+"main";await Wa.delete(e)}(ic(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function Ad(t){return function(t){const e=new Zr;return t.asyncQueue.enqueueAndForget(async()=>async function(t,e){const n=Yr(t);ll(n.remoteStore)||zr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=await function(t){const e=Yr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",t=>e.An.getHighestUnacknowledgedBatchId(t))}(n.localStore);if(-1===t)return void e.resolve();const r=n.jo.get(t)||[];r.push(e),n.jo.set(t,r)}catch(t){const n=Dl(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}}(await zh(t),e)),e.promise}(bd(t=ed(t,vd)))}function xd(t){return function(t){return t.asyncQueue.enqueue(async()=>{const e=await Uh(t),n=await Bh(t);return e.setNetworkEnabled(!0),function(t){const e=Yr(t);return e.Gr.delete(0),nl(e)}(n)})}(bd(t=ed(t,vd)))}function kd(t){return function(t){return t.asyncQueue.enqueue(async()=>{const e=await Uh(t),n=await Bh(t);return e.setNetworkEnabled(!1),async function(t){const e=Yr(t);e.Gr.add(0),await rl(e),e.Jr.set("Offline")}(n)})}(bd(t=ed(t,vd)))}function Dd(t){return function(t,e,n="[DEFAULT]"){k(t,"firestore").clearInstance(n)}(t.app),t._delete()}function Nd(t,e){const n=bd(t=ed(t,vd)),r=new gd;return function(t,e,n,r){const i=function(t,e){let n;return n="string"==typeof t?(new TextEncoder).encode(t):t,function(t,e){return new Rh(t,e)}(function(t,e){if(t instanceof Uint8Array)return Dh(t,e);if(t instanceof ArrayBuffer)return Dh(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,Kc(e));t.asyncQueue.enqueueAndForget(async()=>{!function(t,e,n){const r=Yr(t);(async function(t,e,n){try{const r=await e.getMetadata();if(await function(t,e){const n=Yr(t),r=Yo(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",t=>n.Ye.getBundleMetadata(t,e.id)).then(t=>!!t&&t.createTime.compareTo(r)>=0)}(t.localStore,r))return await e.close(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r));n._updateProgress(Gl(r));const i=new Hl(r,t.localStore,e.k);let s=await e.Ho();for(;s;){const t=await i.yo(s);t&&n._updateProgress(t),s=await e.Ho()}const o=await i.complete();await fh(t,o.In,void 0),await function(t,e){const n=Yr(t);return n.persistence.runTransaction("Save bundle","readwrite",t=>n.Ye.saveBundleMetadata(t,e))}(t.localStore,r),n._completeWith(o.progress)}catch(t){Gr("SyncEngine","Loading bundle failed with "+t),n._failWith(t)}})(r,e,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(await zh(t),i,r)})}(n,t._databaseId,e,r),r}function Rd(t,e){return function(t,e){return t.asyncQueue.enqueue(async()=>function(t,e){const n=Yr(t);return n.persistence.runTransaction("Get named query","readonly",t=>n.Ye.getNamedQuery(t,e))}(await qh(t),e))}(bd(t=ed(t,vd)),e).then(e=>e?new ad(t,null,e.query):null)}function Od(t){if(t._initialized||t._terminated)throw new Jr(Xr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Jr(Xr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Si(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}function Ld(){return new Pd("__name__")}class Fd{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Fd(Ci.fromBase64String(t))}catch(t){throw new Jr(Xr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Fd(Ci.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Md{constructor(t){this._methodName=t}}class Vd{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Jr(Xr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Jr(Xr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return di(this._lat,t._lat)||di(this._long,t._long)}}const jd=/^__.*__$/;class Ud{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new uo(t,this.data,this.fieldMask,e,this.fieldTransforms):new ao(t,this.data,e,this.fieldTransforms)}}class qd{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new uo(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Bd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wr()}}class zd{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.k=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ka(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(t){return new zd(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.$a({path:n,Oa:!1});return r.Ma(t),r}La(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.$a({path:n,Oa:!1});return r.ka(),r}Ba(t){return this.$a({path:void 0,Oa:!0})}Ua(t){return lf(t,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ka(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ma(this.path.get(t))}Ma(t){if(0===t.length)throw this.Ua("Document fields must not be empty");if(Bd(this.xa)&&jd.test(t))throw this.Ua('Document fields cannot begin and end with "__"')}}class Hd{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.k=n||Kc(t)}ja(t,e,n,r=!1){return new zd({xa:t,methodName:e,Ka:n,path:Si.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Gd(t){const e=t._freezeSettings(),n=Kc(t._databaseId);return new Hd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $d(t,e,n,r,i,s={}){const o=t.ja(s.merge||s.mergeFields?2:0,e,n,i);of("Data must be an object, but it was:",o,r);const a=rf(r,o);let u,c;if(s.merge)u=new Ti(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=af(e,r,n);if(!o.contains(i))throw new Jr(Xr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);hf(t,i)||t.push(i)}u=new Ti(t),c=o.fieldTransforms.filter(t=>u.covers(t.field))}else u=null,c=o.fieldTransforms;return new Ud(new Yi(a),u,c)}class Wd extends Md{_toFieldTransform(t){if(2!==t.xa)throw t.Ua(1===t.xa?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Wd}}function Kd(t,e,n){return new zd({xa:3,Ka:e.settings.Ka,methodName:t._methodName,Oa:n},e.databaseId,e.k,e.ignoreUndefinedProperties)}class Qd extends Md{_toFieldTransform(t){return new Xs(t.path,new zs)}isEqual(t){return t instanceof Qd}}class Yd extends Md{constructor(t,e){super(t),this.Qa=e}_toFieldTransform(t){const e=Kd(this,t,!0),n=this.Qa.map(t=>nf(t,e)),r=new Hs(n);return new Xs(t.path,r)}isEqual(t){return this===t}}class Xd extends Md{constructor(t,e){super(t),this.Qa=e}_toFieldTransform(t){const e=Kd(this,t,!0),n=this.Qa.map(t=>nf(t,e)),r=new $s(n);return new Xs(t.path,r)}isEqual(t){return this===t}}class Jd extends Md{constructor(t,e){super(t),this.Wa=e}_toFieldTransform(t){const e=new Ks(t.k,Vs(t.k,this.Wa));return new Xs(t.path,e)}isEqual(t){return this===t}}function Zd(t,e,n,r){const i=t.ja(1,e,n);of("Data must be an object, but it was:",i,r);const s=[],o=Yi.empty();vi(r,(t,r)=>{const a=cf(e,t,n);r=h(r);const u=i.La(a);if(r instanceof Wd)s.push(a);else{const t=nf(r,u);null!=t&&(s.push(a),o.set(a,t))}});const a=new Ti(s);return new qd(o,a,i.fieldTransforms)}function tf(t,e,n,r,i,s){const o=t.ja(1,e,n),a=[af(e,r,n)],u=[i];if(s.length%2!=0)throw new Jr(Xr.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(af(e,s[h])),u.push(s[h+1]);const c=[],l=Yi.empty();for(let f=a.length-1;f>=0;--f)if(!hf(c,a[f])){const t=a[f];let e=u[f];e=h(e);const n=o.La(t);if(e instanceof Wd)c.push(t);else{const r=nf(e,n);null!=r&&(c.push(t),l.set(t,r))}}const d=new Ti(c);return new qd(l,d,o.fieldTransforms)}function ef(t,e,n,r=!1){return nf(n,t.ja(r?4:3,e))}function nf(t,e){if(sf(t=h(t)))return of("Unsupported field value:",e,t),rf(t,e);if(t instanceof Md)return function(t,e){if(!Bd(e.xa))throw e.Ua(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Ua(t._methodName+"() is not currently supported inside arrays");const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=nf(i,e.Ba(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=h(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Vs(e.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=mi.fromDate(t);return{timestampValue:Wo(e.k,n)}}if(t instanceof mi){const n=new mi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wo(e.k,n)}}if(t instanceof Vd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fd)return{bytesValue:Ko(e.k,t._byteString)};if(t instanceof od){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Ua(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Xo(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Ua("Unsupported field value: "+td(t))}(t,e)}function rf(t,e){const n={};return wi(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vi(t,(t,r)=>{const i=nf(r,e.Fa(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function sf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof mi||t instanceof Vd||t instanceof Fd||t instanceof od||t instanceof Md)}function of(t,e,n){if(!sf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=td(n);throw e.Ua("an object"===r?t+" a custom object":t+" "+r)}}function af(t,e,n){if((e=h(e))instanceof Pd)return e._internalPath;if("string"==typeof e)return cf(t,e);throw lf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const uf=new RegExp("[~\\*/\\[\\]]");function cf(t,e,n){if(e.search(uf)>=0)throw lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pd(...e.split("."))._internalPath}catch(r){throw lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new Jr(Xr.INVALID_ARGUMENT,a+t+u)}function hf(t,e){return t.some(t=>t.isEqual(e))}class df{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new od(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new ff(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(pf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class ff extends df{data(){return super.data()}}function pf(t,e){return"string"==typeof e?cf(t,e):e instanceof Pd?e._internalPath:e._delegate._internalPath}class mf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class gf extends df{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(pf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class yf extends gf{data(t={}){return super.data(t)}}class vf{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new mf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new yf(this._firestore,this._userDataWriter,n.key,n,new mf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Jr(Xr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map(n=>({type:"added",doc:new yf(t._firestore,t._userDataWriter,n.doc.key,n.doc,new mf(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(t=>e||3!==t.type).map(e=>{const r=new yf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new mf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:wf(e.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function wf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wr()}}function _f(t,e){return t instanceof gf&&e instanceof gf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof vf&&e instanceof vf&&t._firestore===e._firestore&&fd(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function bf(t){if(Ss(t)&&0===t.explicitOrderBy.length)throw new Jr(Xr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ef{}function Sf(t,...e){for(const n of e)t=n._apply(t);return t}class Tf extends Ef{constructor(t,e,n){super(),this.Ga=t,this.za=e,this.Ha=n,this.type="where"}_apply(t){const e=Gd(t.firestore),n=function(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Jr(Xr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){jf(o,s);const e=[];for(const n of o)e.push(Vf(r,t,n));a={arrayValue:{values:e}}}else a=Vf(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||jf(o,s),a=ef(n,"where",o,"in"===s||"not-in"===s);const u=is.create(i,s,a);return function(t,e){if(e.V()){const n=Is(t);if(null!==n&&!n.isEqual(e.field))throw new Jr(Xr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${e.field.toString()}'`);const r=Ts(t);null!==r&&Uf(0,e.field,r)}const n=function(t,e){for(const n of t.filters)if(e.indexOf(n.op)>=0)return n.op;return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Jr(Xr.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}(t,u),u}(t._query,0,e,t.firestore._databaseId,this.Ga,this.za,this.Ha);return new ad(t.firestore,t.converter,function(t,e){const n=t.filters.concat([e]);return new ws(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))}}function If(t,e,n){const r=e,i=pf("where",t);return new Tf(i,r,n)}class Cf extends Ef{constructor(t,e){super(),this.Ga=t,this.Ja=e,this.type="orderBy"}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new Jr(Xr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Jr(Xr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ms(e,n);return function(t,e){if(null===Ts(t)){const n=Is(t);null!==n&&Uf(0,n,e.field)}}(t,r),r}(t._query,this.Ga,this.Ja);return new ad(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new ws(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function Af(t,e="asc"){const n=e,r=pf("orderBy",t);return new Cf(r,n)}class xf extends Ef{constructor(t,e,n){super(),this.type=t,this.Ya=e,this.Xa=n}_apply(t){return new ad(t.firestore,t.converter,ks(t._query,this.Ya,this.Xa))}}function kf(t){return nd("limit",t),new xf("limit",t,"F")}function Df(t){return nd("limitToLast",t),new xf("limitToLast",t,"L")}class Nf extends Ef{constructor(t,e,n){super(),this.type=t,this.Za=e,this.tc=n}_apply(t){const e=Mf(t,this.type,this.Za,this.tc);return new ad(t.firestore,t.converter,function(t,e){return new ws(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}function Rf(...t){return new Nf("startAt",t,!0)}function Of(...t){return new Nf("startAfter",t,!1)}class Pf extends Ef{constructor(t,e,n){super(),this.type=t,this.Za=e,this.tc=n}_apply(t){const e=Mf(t,this.type,this.Za,this.tc);return new ad(t.firestore,t.converter,function(t,e){return new ws(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function Lf(...t){return new Pf("endBefore",t,!0)}function Ff(...t){return new Pf("endAt",t,!1)}function Mf(t,e,n,r){if(n[0]=h(n[0]),n[0]instanceof df)return function(t,e,n,r,i){if(!r)throw new Jr(Xr.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of As(t))if(o.field.isKeyField())s.push(zi(e,r.key));else{const t=r.data.field(o.field);if(Ni(t))throw new Jr(Xr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=o.field.canonicalString();throw new Jr(Xr.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new fs(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Gd(t.firestore);return function(t,e,n,r,i,s){const o=t.explicitOrderBy;if(i.length>o.length)throw new Jr(Xr.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<i.length;u++){const s=i[u];if(o[u].field.isKeyField()){if("string"!=typeof s)throw new Jr(Xr.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!Cs(t)&&-1!==s.indexOf("/"))throw new Jr(Xr.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=t.path.child(bi.fromString(s));if(!Fi.isDocumentKey(n))throw new Jr(Xr.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Fi(n);a.push(zi(e,i))}else{const t=ef(n,r,s);a.push(t)}}return new fs(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Vf(t,e,n){if("string"==typeof(n=h(n))){if(""===n)throw new Jr(Xr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cs(e)&&-1!==n.indexOf("/"))throw new Jr(Xr.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(bi.fromString(n));if(!Fi.isDocumentKey(r))throw new Jr(Xr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zi(t,new Fi(r))}if(n instanceof od)return zi(t,n._key);throw new Jr(Xr.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${td(n)}.`)}function jf(t,e){if(!Array.isArray(t)||0===t.length)throw new Jr(Xr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new Jr(Xr.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Uf(t,e,n){if(!n.isEqual(e))throw new Jr(Xr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class qf{convertValue(t,e="none"){switch(Mi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ki(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Di(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Wr()}}convertObject(t,e){const n={};return vi(t.fields,(t,r)=>{n[t]=this.convertValue(r,e)}),n}convertGeoPoint(t){return new Vd(ki(t.latitude),ki(t.longitude))}convertArray(t,e){return(t.values||[]).map(t=>this.convertValue(t,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=function t(e){const n=e.mapValue.fields.__previous_value__;return Ni(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ri(t));default:return null}}convertTimestamp(t){const e=xi(t);return new mi(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=bi.fromString(t);Kr(ba(n));const r=new Kh(n.get(1),n.get(3)),i=new Fi(n.popFirst(5));return r.isEqual(e)||Hr(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}function Bf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class zf extends qf{constructor(t){super(),this.firestore=t}convertBytes(t){return new Fd(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new od(this.firestore,null,e)}}class Hf{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Gd(t)}set(t,e,n){this._verifyNotCommitted();const r=Gf(t,this._firestore),i=Bf(r.converter,e,n),s=$d(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Zs.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const i=Gf(t,this._firestore);let s;return s="string"==typeof(e=h(e))||e instanceof Pd?tf(this._dataReader,"WriteBatch.update",i._key,e,n,r):Zd(this._dataReader,"WriteBatch.update",i._key,e),this._mutations.push(s.toMutation(i._key,Zs.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Gf(t,this._firestore);return this._mutations=this._mutations.concat(new fo(e._key,Zs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Jr(Xr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gf(t,e){if((t=h(t)).firestore!==e)throw new Jr(Xr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function $f(t){t=ed(t,od);const e=ed(t.firestore,vd);return Gh(bd(e),t._key).then(n=>op(e,t,n))}class Wf extends qf{constructor(t){super(),this.firestore=t}convertBytes(t){return new Fd(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new od(this.firestore,null,e)}}function Kf(t){t=ed(t,od);const e=ed(t.firestore,vd),n=bd(e),r=new Wf(e);return function(t,e){const n=new Zr;return t.asyncQueue.enqueueAndForget(async()=>async function(t,e,n){try{const r=await function(t,e){const n=Yr(t);return n.persistence.runTransaction("read document","readonly",t=>n.Wn.Rn(t,e))}(t,e);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Jr(Xr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const r=Dl(t,`Failed to get document '${e} from cache`);n.reject(r)}}(await qh(t),e,n)),n.promise}(n,t._key).then(n=>new gf(e,r,t._key,n,new mf(null!==n&&n.hasLocalMutations,!0),t.converter))}function Qf(t){t=ed(t,od);const e=ed(t.firestore,vd);return Gh(bd(e),t._key,{source:"server"}).then(n=>op(e,t,n))}function Yf(t){t=ed(t,ad);const e=ed(t.firestore,vd),n=bd(e),r=new Wf(e);return bf(t._query),$h(n,t._query).then(n=>new vf(e,r,t,n))}function Xf(t){t=ed(t,ad);const e=ed(t.firestore,vd),n=bd(e),r=new Wf(e);return function(t,e){const n=new Zr;return t.asyncQueue.enqueueAndForget(async()=>async function(t,e,n){try{const r=await yc(t,e,!0),i=new Kl(e,r.zn),s=i.bo(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(t){const r=Dl(t,`Failed to execute query '${e} against cache`);n.reject(r)}}(await qh(t),e,n)),n.promise}(n,t._query).then(n=>new vf(e,r,t,n))}function Jf(t){t=ed(t,ad);const e=ed(t.firestore,vd),n=bd(e),r=new Wf(e);return $h(n,t._query,{source:"server"}).then(n=>new vf(e,r,t,n))}function Zf(t,e,n){t=ed(t,od);const r=ed(t.firestore,vd),i=Bf(t.converter,e,n);return sp(r,[$d(Gd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Zs.none())])}function tp(t,e,n,...r){t=ed(t,od);const i=ed(t.firestore,vd),s=Gd(i);let o;return o="string"==typeof(e=h(e))||e instanceof Pd?tf(s,"updateDoc",t._key,e,n,r):Zd(s,"updateDoc",t._key,e),sp(i,[o.toMutation(t._key,Zs.exists(!0))])}function ep(t){return sp(ed(t.firestore,vd),[new fo(t._key,Zs.none())])}function np(t,e){const n=ed(t.firestore,vd),r=hd(t),i=Bf(t.converter,e);return sp(n,[$d(Gd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Zs.exists(!1))]).then(()=>r)}function rp(t,...e){var n,r,i;t=h(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||md(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(md(e[o])){const t=e[o];e[o]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[o+1]=null===(r=t.error)||void 0===r?void 0:r.bind(t),e[o+2]=null===(i=t.complete)||void 0===i?void 0:i.bind(t)}let u,c,l;if(t instanceof od)c=ed(t.firestore,vd),l=bs(t._key.path),u={next:n=>{e[o]&&e[o](op(c,t,n))},error:e[o+1],complete:e[o+2]};else{const n=ed(t,ad);c=ed(n.firestore,vd),l=n._query;const r=new Wf(c);u={next:t=>{e[o]&&e[o](new vf(c,r,n,t))},error:e[o+1],complete:e[o+2]},bf(t._query)}return function(t,e,n,r){const i=new Nh(r),s=new ql(e,i,n);return t.asyncQueue.enqueueAndForget(async()=>Fl(await Hh(t),s)),()=>{i.na(),t.asyncQueue.enqueueAndForget(async()=>Ml(await Hh(t),s))}}(bd(c),l,a,u)}function ip(t,e){return function(t,e){const n=new Nh(e);return t.asyncQueue.enqueueAndForget(async()=>function(t,e){Yr(t).io.add(e),e.next()}(await Hh(t),n)),()=>{n.na(),t.asyncQueue.enqueueAndForget(async()=>function(t,e){Yr(t).io.delete(e)}(await Hh(t),n))}}(bd(t=ed(t,vd)),md(e)?e:{next:e})}function sp(t,e){return function(t,e){const n=new Zr;return t.asyncQueue.enqueueAndForget(async()=>async function(t,e,n){const r=Ih(t);try{const t=await function(t,e){const n=Yr(t),r=mi.now(),i=e.reduce((t,e)=>t.add(e.key),Ro());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",t=>n.Wn.vn(t,i).next(i=>{s=i;const o=[];for(const t of e){const e=io(t,s.get(t.key));null!=e&&o.push(new uo(t.key,e,Xi(e.value.mapValue),Zs.exists(!0)))}return n.An.addMutationBatch(t,r,o,e)})).then(t=>(t.applyToLocalDocumentSet(s),{batchId:t.batchId,changes:s}))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Ko[t.currentUser.toKey()];r||(r=new _o(di)),r=r.insert(e,n),t.Ko[t.currentUser.toKey()]=r}(r,t.batchId,n),await fh(r,t.changes),await yl(r.remoteStore)}catch(t){const e=Dl(t,"Failed to persist write");n.reject(e)}}(await zh(t),e,n)),n.promise}(bd(t),e)}function op(t,e,n){const r=n.docs.get(e._key),i=new Wf(t);return new gf(t,i,e._key,r,new mf(n.hasPendingWrites,n.fromCache),e.converter)}class ap extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Gd(t)}get(t){const e=Gf(t,this._firestore),n=new zf(this._firestore);return this._transaction.lookup([e._key]).then(t=>{if(!t||1!==t.length)return Wr();const r=t[0];if(r.isFoundDocument())return new df(this._firestore,n,r.key,r,e.converter);if(r.isNoDocument())return new df(this._firestore,n,e._key,null,e.converter);throw Wr()})}set(t,e,n){const r=Gf(t,this._firestore),i=Bf(r.converter,e,n),s=$d(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(t,e,n,...r){const i=Gf(t,this._firestore);let s;return s="string"==typeof(e=h(e))||e instanceof Pd?tf(this._dataReader,"Transaction.update",i._key,e,n,r):Zd(this._dataReader,"Transaction.update",i._key,e),this._transaction.update(i._key,s),this}delete(t){const e=Gf(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Gf(t,this._firestore),n=new Wf(this._firestore);return super.get(t).then(t=>new gf(this._firestore,n,e._key,t._document,new mf(!1,!1),e.converter))}}function up(t,e){return function(t,e){const n=new Zr;return t.asyncQueue.enqueueAndForget(async()=>{const r=await function(t){return jh(t).then(t=>t.datastore)}(t);new Ph(t.asyncQueue,r,e,n).run()}),n.promise}(bd(t=ed(t,vd)),n=>e(new ap(t,n)))}function cp(){return new Wd("deleteField")}function lp(){return new Qd("serverTimestamp")}function hp(...t){return new Yd("arrayUnion",t)}function dp(...t){return new Xd("arrayRemove",t)}function fp(t){return new Jd("increment",t)}function pp(t){return bd(t=ed(t,vd)),new Hf(t,e=>sp(t,e))}!function(t,e=!0){jr="9.6.1",x(new d("firestore",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=new vd(r,new ri(t.getProvider("auth-internal")),new ai(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),i._setSettings(n),i},"PUBLIC")),N(Mr,"3.4.1",t),N(Mr,"3.4.1","esm2017")}()},GsTq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("jebL"),i=n("/psV"),s=n("2D0q"),o=n("88ZB"),a=n("nlpz"),u=n("kOjh"),c=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i),l={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},h=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return r.__extends(e,t),e}(Error),d=new s.Logger("@firebase/firestore");function f(){return d.logLevel}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(d.logLevel<=s.LogLevel.DEBUG){var i=e.map(y);d.debug.apply(d,r.__spreadArrays(["Firestore (7.24.0): "+t],i))}}function m(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(d.logLevel<=s.LogLevel.ERROR){var i=e.map(y);d.error.apply(d,r.__spreadArrays(["Firestore (7.24.0): "+t],i))}}function g(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(d.logLevel<=s.LogLevel.WARN){var i=e.map(y);d.warn.apply(d,r.__spreadArrays(["Firestore (7.24.0): "+t],i))}}function y(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(i){return t}}function v(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: "+t;throw m(e),new Error(e)}function w(t,e){t||v()}function _(t,e){return t}function b(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function E(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function S(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var T=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&v(),void 0===n?n=t.length-e:n>t.length-e&&v(),this.segments=t,this.offset=e,this.t=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.i(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.o(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.u=function(t){return this.o(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},t.prototype.l=function(){return this.segments[this.offset]},t.prototype._=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.m=function(){return 0===this.length},t.prototype.T=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},t.i=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.prototype.R=function(){return this.A().join("/")},e.prototype.toString=function(){return this.R()},e.g=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,s=t;i<s.length;i++){var o=s[i];if(o.indexOf("//")>=0)throw new h(l.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.P=function(){return new e([])},e}(T),C=/^[_a-zA-Z][_a-zA-Z0-9]*$/,A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.V=function(t){return C.test(t)},e.prototype.R=function(){return this.A().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.V(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.R()},e.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},e.v=function(){return new e(["__name__"])},e.S=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new h(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new h(l.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new h(l.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new h(l.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.P=function(){return new e([])},e}(T),x=function(){function t(t){this.path=t}return t.D=function(e){return new t(I.g(e))},t.C=function(e){return new t(I.g(e).u(5))},t.prototype.N=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===I.i(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.i=function(t,e){return I.i(t.path,e.path)},t.F=function(t){return t.length%2==0},t.$=function(e){return new t(new I(e.slice()))},t}();function k(t,e){if(0!==e.length)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+W(e.length,"argument")+".")}function D(t,e,n){if(e.length!==n)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires "+W(n,"argument")+", but was called with "+W(e.length,"argument")+".")}function N(t,e,n){if(e.length<n)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires at least "+W(n,"argument")+", but was called with "+W(e.length,"argument")+".")}function R(t,e,n,r){if(e.length<n||e.length>r)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+W(e.length,"argument")+".")}function O(t,e,n,r){j(t,e,$(n)+" argument",r)}function P(t,e,n,r){void 0!==r&&O(t,e,n,r)}function L(t,e,n,r){j(t,e,n+" option",r)}function F(t,e,n,r){void 0!==r&&L(t,e,n,r)}function M(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var s=[],o=0,a=i;o<a.length;o++){var u=a[o];if(u===r)return;s.push(q(u))}var c=q(r);throw new h(l.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+s.join(", "))}(t,0,n,r,i)}function V(t,e,n,r){if(!e.some((function(t){return t===r})))throw new h(l.INVALID_ARGUMENT,"Invalid value "+q(r)+" provided to function "+t+"() for its "+$(n)+" argument. Acceptable values: "+e.join(", "));return r}function j(t,e,n,r){if(!("object"===e?U(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=q(r);throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function U(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function q(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":v()}function B(t,e,n){if(void 0===n)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+$(e)+" argument, but it was undefined.")}function z(t,e,n){E(e,(function(e,r){if(n.indexOf(e)<0)throw new h(l.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function H(t,e,n,r){var i=q(r);return new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+$(n)+" argument to be a "+e+", but it was: "+i)}function G(t,e,n){if(n<=0)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+$(e)+" argument to be a positive number, but it was: "+n+".")}function $(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function W(t,e){return t+" "+e+(1===t?"":"s")}function K(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Q=function(){function t(){}return t.k=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=K(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Y(t,e){return t<e?-1:t>e?1:0}function X(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function J(t){return t+"\0"}var Z=function(){function t(t){this.M=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.M)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.M)},t.prototype.O=function(){return 2*this.M.length},t.prototype.L=function(t){return Y(this.M,t.M)},t.prototype.isEqual=function(t){return this.M===t.M},t}();Z.B=new Z("");var tt=function(){function t(t){this.q=t}return t.fromBase64String=function(e){try{return new t(Z.fromBase64String(e))}catch(e){throw new h(l.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Z.fromUint8Array(e))},t.prototype.toBase64=function(){return this.q.toBase64()},t.prototype.toUint8Array=function(){return this.q.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.q.isEqual(t.q)},t}();function et(){if("undefined"==typeof Uint8Array)throw new h(l.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function nt(){if("undefined"==typeof atob)throw new h(l.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.fromBase64String=function(t){D("Blob.fromBase64String",arguments,1),O("Blob.fromBase64String","string",1,t),nt();try{return new e(Z.fromBase64String(t))}catch(t){throw new h(l.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(D("Blob.fromUint8Array",arguments,1),et(),!(t instanceof Uint8Array))throw H("Blob.fromUint8Array","Uint8Array",1,t);return new e(Z.fromUint8Array(t))},e.prototype.toBase64=function(){return D("Blob.toBase64",arguments,0),nt(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return D("Blob.toUint8Array",arguments,0),et(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(tt),it=function(t,e,n,r,i,s){this.U=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.W=s},st=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.L=function(t){return Y(this.projectId,t.projectId)||Y(this.database,t.database)},t}(),ot=function(){function t(t,e){this.K=t,this.G=e,this.H={}}return t.prototype.get=function(t){var e=this.K(t),n=this.H[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.G(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.K(t),r=this.H[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.G(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.H[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.K(t),n=this.H[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.G(n[r][0],t))return 1===n.length?delete this.H[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){E(this.H,(function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}}))},t.prototype.m=function(){return S(this.H)},t}(),at=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new h(l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new h(l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new h(l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new h(l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.Y=function(t){return this.seconds===t.seconds?Y(this.nanoseconds,t.nanoseconds):Y(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ut=function(){function t(t){this.timestamp=t}return t.J=function(e){return new t(e)},t.min=function(){return new t(new at(0,0))},t.prototype.L=function(t){return this.timestamp.Y(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.Z=function(){return this.timestamp},t}();function ct(t){return null==t}function lt(t){return 0===t&&1/t==-1/0}function ht(t){return"number"==typeof t&&Number.isInteger(t)&&!lt(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var dt=function(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.tt=null};function ft(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new dt(t,e,n,r,i,s,o)}function pt(t){var e=_(t);if(null===e.tt){var n=e.path.R();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.R()+t.op.toString()+ie(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.R()+e.dir;var e})).join(","),ct(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=or(e.startAt)),e.endAt&&(n+="|ub:",n+=or(e.endAt)),e.tt=n}return e.tt}function mt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!hr(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(s=e.filters[r]).op||!i.field.isEqual(s.field)||!te(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ur(t.startAt,e.startAt)&&ur(t.endAt,e.endAt)}function gt(t){return x.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}var yt,vt,wt=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=ut.min()),void 0===s&&(s=ut.min()),void 0===o&&(o=Z.B),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),_t=function(t){this.count=t};function bt(t){switch(t){case l.OK:return v();case l.CANCELLED:case l.UNKNOWN:case l.DEADLINE_EXCEEDED:case l.RESOURCE_EXHAUSTED:case l.INTERNAL:case l.UNAVAILABLE:case l.UNAUTHENTICATED:return!1;case l.INVALID_ARGUMENT:case l.NOT_FOUND:case l.ALREADY_EXISTS:case l.PERMISSION_DENIED:case l.FAILED_PRECONDITION:case l.ABORTED:case l.OUT_OF_RANGE:case l.UNIMPLEMENTED:case l.DATA_LOSS:return!0;default:return v()}}function Et(t){if(void 0===t)return m("GRPC error has no .code"),l.UNKNOWN;switch(t){case yt.OK:return l.OK;case yt.CANCELLED:return l.CANCELLED;case yt.UNKNOWN:return l.UNKNOWN;case yt.DEADLINE_EXCEEDED:return l.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return l.RESOURCE_EXHAUSTED;case yt.INTERNAL:return l.INTERNAL;case yt.UNAVAILABLE:return l.UNAVAILABLE;case yt.UNAUTHENTICATED:return l.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return l.INVALID_ARGUMENT;case yt.NOT_FOUND:return l.NOT_FOUND;case yt.ALREADY_EXISTS:return l.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return l.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return l.FAILED_PRECONDITION;case yt.ABORTED:return l.ABORTED;case yt.OUT_OF_RANGE:return l.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return l.UNIMPLEMENTED;case yt.DATA_LOSS:return l.DATA_LOSS;default:return v()}}(vt=yt||(yt={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";var St=function(){function t(t,e){this.i=t,this.root=e||It.EMPTY}return t.prototype.ot=function(e,n){return new t(this.i,this.root.ot(e,n,this.i).copy(null,null,It.at,null,null))},t.prototype.remove=function(e){return new t(this.i,this.root.remove(e,this.i).copy(null,null,It.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.m();){var n=this.i(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.m();){var r=this.i(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.m=function(){return this.root.m()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(){return this.root.ut()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new Tt(this.root,null,this.i,!1)},t.prototype.ft=function(t){return new Tt(this.root,t,this.i,!1)},t.prototype.dt=function(){return new Tt(this.root,null,this.i,!0)},t.prototype.wt=function(t){return new Tt(this.root,t,this.i,!0)},t}(),Tt=function(){function t(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.m();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return t.prototype.It=function(){var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.m();)this.Et.push(t),t=t.right;else for(t=t.right;!t.m();)this.Et.push(t),t=t.left;return e},t.prototype.At=function(){return this.Et.length>0},t.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},t}(),It=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.m=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.m()?this:this.left.min()},t.prototype.ct=function(){return this.min().key},t.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).gt()},t.prototype.Pt=function(){if(this.left.m())return t.EMPTY;var e=this;return e.left.yt()||e.left.left.yt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.Pt(),null)).gt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.m()||i.left.yt()||i.left.left.yt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.yt()&&(i=i.bt()),i.right.m()||i.right.yt()||i.right.left.yt()||(i=i.vt()),0===n(e,i.key)){if(i.right.m())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.gt()},t.prototype.yt=function(){return this.color},t.prototype.gt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},t.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw v();if(this.right.yt())throw v();var t=this.left.Nt();if(t!==this.right.Nt())throw v();return t+(this.yt()?0:1)},t}();It.EMPTY=null,It.RED=!0,It.at=!1,It.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw v()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new It(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.m=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ct=function(){return null},t.prototype.ut=function(){return null},t.prototype.yt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());var Ct=function(){function t(t){this.i=t,this.data=new St(this.i)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ct()},t.prototype.last=function(){return this.data.ut()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},t.prototype.Ft=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.i(r.key,t[1])>=0)return;e(r.key)}},t.prototype.xt=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.$t=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new At(this.data._t())},t.prototype.ft=function(t){return new At(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.m=function(){return this.data.m()},t.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,s=r.It().key;if(0!==this.i(i,s))return!1}return!0},t.prototype.A=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.i);return n.data=e,n},t}(),At=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),xt=new St(x.i);function kt(){return xt}function Dt(){return kt()}var Nt=new St(x.i);function Rt(){return Nt}var Ot=new St(x.i),Pt=new Ct(x.i);function Lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Pt,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var Ft=new Ct(Y);function Mt(){return Ft}var Vt=function(){function t(t){this.i=t?function(e,n){return t(e,n)||x.i(e.key,n.key)}:function(t,e){return x.i(t.key,e.key)},this.Ot=Rt(),this.Lt=new St(this.i)}return t.Bt=function(e){return new t(e.i)},t.prototype.has=function(t){return null!=this.Ot.get(t)},t.prototype.get=function(t){return this.Ot.get(t)},t.prototype.first=function(){return this.Lt.ct()},t.prototype.last=function(){return this.Lt.ut()},t.prototype.m=function(){return this.Lt.m()},t.prototype.indexOf=function(t){var e=this.Ot.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ht((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ot.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ot.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,s=r.It().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.i=this.i,r.Ot=e,r.Lt=n,r},t}(),jt=function(){function t(){this.qt=new St(x.i)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):v():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ht((function(e,n){t.push(n)})),t},t}(),Ut=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.Qt=n,this.docChanges=r,this.Wt=i,this.fromCache=s,this.jt=o,this.Kt=a}return t.Gt=function(e,n,r,i){var s=[];return n.forEach((function(t){s.push({type:0,doc:t})})),new t(e,n,Vt.Bt(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.jt===t.jt&&this.Wt.isEqual(t.Wt)&&Gn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Qt.isEqual(t.Qt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),qt=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Yt=r,this.Jt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,Bt.Zt(e,n)),new t(ut.min(),r,Mt(),kt(),Lt())},t}(),Bt=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(Z.B,n,Lt(),Lt(),Lt())},t}(),zt=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},Ht=function(t,e){this.targetId=t,this.oe=e},Gt=function(t,e,n,r){void 0===n&&(n=Z.B),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},$t=function(){function t(){this.ae=0,this.ce=Qt(),this.ue=Z.B,this.he=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.O()>0&&(this.le=!0,this.ue=t)},t.prototype.we=function(){var t=Lt(),e=Lt(),n=Lt();return this.ce.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:v()}})),new Bt(this.ue,this.he,t,e,n)},t.prototype.me=function(){this.le=!1,this.ce=Qt()},t.prototype.Te=function(t,e){this.le=!0,this.ce=this.ce.ot(t,e)},t.prototype.Ee=function(t){this.le=!0,this.ce=this.ce.remove(t)},t.prototype.Ie=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.he=!0},t}(),Wt=function(){function t(t){this.ge=t,this.Pe=new Map,this.ye=kt(),this.Ve=Kt(),this.pe=new Ct(Y)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof kn?this.ve(r,t.re):t.re instanceof Dn&&this.Se(r,t.key,t.re)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.Se(s[i],t.key,t.re)},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var r=e.Ne(n);switch(t.state){case 0:e.Fe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.me(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.Fe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.Fe(n)&&(e.xe(n),r.de(t.resumeToken));break;default:v()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach((function(t,r){n.Fe(r)&&e(r)}))},t.prototype.$e=function(t){var e=t.targetId,n=t.oe.count,r=this.ke(e);if(r){var i=r.target;if(gt(i))if(0===n){var s=new x(i.path);this.Se(e,s,new Dn(s,ut.min()))}else w(1===n);else this.Me(e)!==n&&(this.xe(e),this.pe=this.pe.add(e))}},t.prototype.Oe=function(t){var e=this,n=new Map;this.Pe.forEach((function(r,i){var s=e.ke(i);if(s){if(r.te&&gt(s.target)){var o=new x(s.target.path);null!==e.ye.get(o)||e.Le(i,o)||e.Se(i,o,new Dn(o,t))}r.fe&&(n.set(i,r.we()),r.me())}}));var r=Lt();this.Ve.forEach((function(t,n){var i=!0;n.xt((function(t){var n=e.ke(t);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new qt(t,n,this.pe,this.ye,r);return this.ye=kt(),this.Ve=Kt(),this.pe=new Ct(Y),i},t.prototype.ve=function(t,e){if(this.Fe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.ye=this.ye.ot(e.key,e),this.Ve=this.Ve.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.Fe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.ot(e,this.Be(e).delete(t)),n&&(this.ye=this.ye.ot(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.ge.qe(t).size+e.ee.size-e.se.size},t.prototype.Ie=function(t){this.Ne(t).Ie()},t.prototype.Ne=function(t){var e=this.Pe.get(t);return e||(e=new $t,this.Pe.set(t,e)),e},t.prototype.Be=function(t){var e=this.Ve.get(t);return e||(e=new Ct(Y),this.Ve=this.Ve.ot(t,e)),e},t.prototype.Fe=function(t){var e=null!==this.ke(t);return e||p("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ke=function(t){var e=this.Pe.get(t);return e&&e._e?null:this.ge.Ue(t)},t.prototype.xe=function(t){var e=this;this.Pe.set(t,new $t),this.ge.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.ge.qe(t).has(e)},t}();function Kt(){return new St(x.i)}function Qt(){return new St(x.i)}function Yt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xt(t){var e=se(t.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}var Jt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yt(t)?4:10:v()}function te(t,e){var n=Zt(t);if(n!==Zt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xt(t).isEqual(Xt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=se(t.timestampValue),r=se(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ae(t.bytesValue).isEqual(ae(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return oe(t.geoPointValue.latitude)===oe(e.geoPointValue.latitude)&&oe(t.geoPointValue.longitude)===oe(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return oe(t.integerValue)===oe(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=oe(t.doubleValue),r=oe(e.doubleValue);return n===r?lt(n)===lt(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return X(t.arrayValue.values||[],e.arrayValue.values||[],te);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(b(n)!==b(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!te(n[i],r[i])))return!1;return!0}(t,e);default:return v()}}function ee(t,e){return void 0!==(t.values||[]).find((function(t){return te(t,e)}))}function ne(t,e){var n=Zt(t),r=Zt(e);if(n!==r)return Y(n,r);switch(n){case 0:return 0;case 1:return Y(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=oe(t.integerValue||t.doubleValue),r=oe(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return re(t.timestampValue,e.timestampValue);case 4:return re(Xt(t),Xt(e));case 5:return Y(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ae(t),r=ae(e);return n.L(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=Y(n[i],r[i]);if(0!==s)return s}return Y(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Y(oe(t.latitude),oe(e.latitude));return 0!==n?n:Y(oe(t.longitude),oe(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=ne(n[i],r[i]);if(s)return s}return Y(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=Y(r[o],s[o]);if(0!==a)return a;var u=ne(n[r[o]],i[s[o]]);if(0!==u)return u}return Y(r.length,s.length)}(t.mapValue,e.mapValue);default:throw v()}}function re(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Y(t,e);var n=se(t),r=se(e),i=Y(n.seconds,r.seconds);return 0!==i?i:Y(n.nanos,r.nanos)}function ie(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=se(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ae(e.bytesValue).toBase64():"referenceValue"in e?x.C(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,s=e.values||[];i<s.length;i++)r?r=!1:n+=",",n+=t(s[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,s=Object.keys(e.fields||{}).sort();i<s.length;i++){var o=s[i];r?r=!1:n+=",",n+=o+":"+t(e.fields[o])}return n+"}"}(e.mapValue):v();var n}(t)}function se(t){if(w(!!t),"string"==typeof t){var e=0,n=Jt.exec(t);if(w(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:oe(t.seconds),nanos:oe(t.nanos)}}function oe(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ae(t){return"string"==typeof t?Z.fromBase64String(t):Z.fromUint8Array(t)}function ue(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.R()}}function ce(t){return!!t&&"integerValue"in t}function le(t){return!!t&&"arrayValue"in t}function he(t){return!!t&&"nullValue"in t}function de(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fe(t){return!!t&&"mapValue"in t}var pe={asc:"ASCENDING",desc:"DESCENDING"},me={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ge=function(t,e){this.U=t,this.Qe=e};function ye(t){return{integerValue:""+t}}function ve(t,e){if(t.Qe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lt(e)?"-0":e}}function we(t,e){return ht(e)?ye(e):ve(t,e)}function _e(t,e){return t.Qe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function be(t,e){return t.Qe?e.toBase64():e.toUint8Array()}function Ee(t,e){return _e(t,e.Z())}function Se(t){return w(!!t),ut.J(function(t){var e=se(t);return new at(e.seconds,e.nanos)}(t))}function Te(t,e){return function(t){return new I(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).R()}function Ie(t){var e=I.g(t);return w($e(e)),e}function Ce(t,e){return Te(t.U,e.path)}function Ae(t,e){var n=Ie(e);return w(n.get(1)===t.U.projectId),w(!n.get(3)&&!t.U.database||n.get(3)===t.U.database),new x(Ne(n))}function xe(t,e){return Te(t.U,e)}function ke(t){var e=Ie(t);return 4===e.length?I.P():Ne(e)}function De(t){return new I(["projects",t.U.projectId,"databases",t.U.database]).R()}function Ne(t){return w(t.length>4&&"documents"===t.get(4)),t.u(5)}function Re(t,e,n){return{name:Ce(t,e),fields:n.proto.mapValue.fields}}function Oe(t,e){var n;if(e instanceof yn)n={update:Re(t,e.key,e.value)};else if(e instanceof Sn)n={delete:Ce(t,e.key)};else if(e instanceof vn)n={update:Re(t,e.key,e.data),updateMask:Ge(e.We)};else if(e instanceof _n)n={transform:{document:Ce(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Xe)return{fieldPath:e.field.R(),setToServerValue:"REQUEST_TIME"};if(n instanceof Je)return{fieldPath:e.field.R(),appendMissingElements:{values:n.elements}};if(n instanceof tn)return{fieldPath:e.field.R(),removeAllFromArray:{values:n.elements}};if(n instanceof nn)return{fieldPath:e.field.R(),increment:n.je};throw v()}(0,t)}))}};else{if(!(e instanceof Tn))return v();n={verify:Ce(t,e.key)}}return e.Ge.Ke||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ee(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v()}(t,e.Ge)),n}function Pe(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?cn.updateTime(Se(t.updateTime)):void 0!==t.exists?cn.exists(t.exists):cn.ze()}(e.currentDocument):cn.ze();if(e.update){var r=Ae(t,e.update.name),i=new In({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new on((t.fieldPaths||[]).map((function(t){return A.S(t)})))}(e.updateMask);return new vn(r,i,s,n)}return new yn(r,i,n)}if(e.delete){var o=Ae(t,e.delete);return new Sn(o,n)}if(e.transform){var a=Ae(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(w("REQUEST_TIME"===e.setToServerValue),n=new Xe):"appendMissingElements"in e?n=new Je(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new tn(e.removeAllFromArray.values||[]):"increment"in e?n=new nn(t,e.increment):v();var r=A.S(e.fieldPath);return new an(r,n)}(t,e)}));return w(!0===n.exists),new _n(a,u)}if(e.verify){var c=Ae(t,e.verify);return new Tn(c,n)}return v()}function Le(t,e){return{documents:[xe(t,e.path)]}}function Fe(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=xe(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=xe(t,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(de(t.value))return{unaryFilter:{field:qe(t.field),op:"IS_NAN"}};if(he(t.value))return{unaryFilter:{field:qe(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(de(t.value))return{unaryFilter:{field:qe(t.field),op:"IS_NOT_NAN"}};if(he(t.value))return{unaryFilter:{field:qe(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qe(t.field),op:Ue(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:qe(t.field),direction:je(t.dir)}}(t)}))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.Qe||ct(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Me(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Me(e.endAt)),n}function Me(t){return{before:t.before,values:t.position}}function Ve(t){return new sr(t.values||[],!!t.before)}function je(t){return pe[t]}function Ue(t){return me[t]}function qe(t){return{fieldPath:t.R()}}function Be(t){return A.S(t.fieldPath)}function ze(t){return Yn.create(Be(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return v()}}(t.fieldFilter.op),t.fieldFilter.value)}function He(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Be(t.unaryFilter.field);return Yn.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Be(t.unaryFilter.field);return Yn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Be(t.unaryFilter.field);return Yn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Be(t.unaryFilter.field);return Yn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return v()}}function Ge(t){var e=[];return t.fields.forEach((function(t){return e.push(t.R())})),{fieldPaths:e}}function $e(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var We=function(){this.He=void 0};function Ke(t,e,n){return t instanceof Xe?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Je?Ze(t,e):t instanceof tn?en(t,e):function(t,e){var n=Ye(t,e),r=rn(n)+rn(t.je);return ce(n)&&ce(t.je)?ye(r):ve(t.serializer,r)}(t,e)}function Qe(t,e,n){return t instanceof Je?Ze(t,e):t instanceof tn?en(t,e):n}function Ye(t,e){return t instanceof nn?ce(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Xe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e}(We),Je=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r.__extends(e,t),e}(We);function Ze(t,e){for(var n=sn(e),r=function(t){n.some((function(e){return te(e,t)}))||n.push(t)},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var tn=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r.__extends(e,t),e}(We);function en(t,e){for(var n=sn(e),r=function(t){n=n.filter((function(e){return!te(e,t)}))},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var nn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.je=n,r}return r.__extends(e,t),e}(We);function rn(t){return oe(t.integerValue||t.doubleValue)}function sn(t){return le(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var on=function(){function t(t){this.fields=t,t.sort(A.i)}return t.prototype.Ye=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].T(t))return!0;return!1},t.prototype.isEqual=function(t){return X(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),an=function(t,e){this.field=t,this.transform=e},un=function(t,e){this.version=t,this.transformResults=e},cn=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Ke",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ln(t,e){return void 0!==t.updateTime?e instanceof kn&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof kn}var hn=function(){};function dn(t,e,n){return t instanceof yn?function(t,e,n){return new kn(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof vn?function(t,e,n){if(!ln(t.Ge,e))return new Nn(t.key,n.version);var r=wn(t,e);return new kn(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof _n?function(t,e,n){if(w(null!=n.transformResults),!ln(t.Ge,e))return new Nn(t.key,n.version);var r=bn(0,e),i=function(t,e,n){var r=[];w(t.length===n.length);for(var i=0;i<n.length;i++){var s=t[i],o=s.transform,a=null;e instanceof kn&&(a=e.field(s.field)),r.push(Qe(o,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),s=n.version,o=En(t,r.data(),i);return new kn(t.key,s,o,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Dn(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function fn(t,e,n,r){return t instanceof yn?function(t,e){if(!ln(t.Ge,e))return e;var n=gn(e);return new kn(t.key,n,t.value,{Je:!0})}(t,e):t instanceof vn?function(t,e){if(!ln(t.Ge,e))return e;var n=gn(e),r=wn(t,e);return new kn(t.key,n,r,{Je:!0})}(t,e):t instanceof _n?function(t,e,n,r){if(!ln(t.Ge,e))return e;var i=bn(0,e),s=function(t,e,n,r){for(var i=[],s=0,o=t;s<o.length;s++){var a=o[s],u=a.transform,c=null;n instanceof kn&&(c=n.field(a.field)),null===c&&r instanceof kn&&(c=r.field(a.field)),i.push(Ke(u,c,e))}return i}(t.fieldTransforms,n,e,r),o=En(t,i.data(),s);return new kn(t.key,i.version,o,{Je:!0})}(t,e,r,n):function(t,e){return ln(t.Ge,e)?new Dn(t.key,ut.min()):e}(t,e)}function pn(t,e){return t instanceof _n?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var s=i[r],o=e instanceof kn?e.field(s.field):void 0,a=Ye(s.transform,o||null);null!=a&&(n=null==n?(new Cn).set(s.field,a):n.set(s.field,a))}return n?n.Xe():null}(t,e):null}function mn(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.We.isEqual(e.We):2!==t.type||X(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Je&&e instanceof Je||t instanceof tn&&e instanceof tn?X(t.elements,e.elements,te):t instanceof nn&&e instanceof nn?te(t.je,e.je):t instanceof Xe&&e instanceof Xe}(t.transform,e.transform)}(t,e)})))}function gn(t){return t instanceof kn?t.version:ut.min()}var yn=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return r.__extends(e,t),e}(hn),vn=function(t){function e(e,n,r,i){var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.We=r,s.Ge=i,s.type=1,s}return r.__extends(e,t),e}(hn);function wn(t,e){return function(t,e){var n=new Cn(e);return t.We.fields.forEach((function(e){if(!e.m()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Xe()}(t,e instanceof kn?e.data():In.empty())}var _n=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=cn.exists(!0),r}return r.__extends(e,t),e}(hn);function bn(t,e){return e}function En(t,e,n){for(var r=new Cn(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.Xe()}var Sn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return r.__extends(e,t),e}(hn),Tn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return r.__extends(e,t),e}(hn),In=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.m())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!fe(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t._()])||null},t.prototype.isEqual=function(t){return te(this.proto,t.proto)},t}(),Cn=function(){function t(t){void 0===t&&(t=In.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),s=n.get(i);s instanceof Map?n=s:s&&10===Zt(s)?(s=new Map(Object.entries(s.mapValue.fields||{})),n.set(i,s),n=s):(s=new Map,n.set(i,s),n=s)}n.set(t._(),e)},t.prototype.Xe=function(){var t=this.nn(A.P(),this.tn);return null!=t?new In(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),s=fe(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var o=n.nn(t.child(i),e);null!=o&&(s[i]=o,r=!0)}else null!==e?(s[i]=e,r=!0):s.hasOwnProperty(i)&&(delete s[i],r=!0)})),r?{mapValue:{fields:s}}:null},t}();function An(t){var e=[];return E(t.fields||{},(function(t,n){var r=new A([t]);if(fe(n)){var i=An(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)})),new on(e)}var xn=function(t,e){this.key=t,this.version=e},kn=function(t){function e(e,n,r,i){var s=this;return(s=t.call(this,e,n)||this).sn=r,s.Je=!!i.Je,s.hasCommittedMutations=!!i.hasCommittedMutations,s}return r.__extends(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(xn),Dn=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return r.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(xn),Nn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(xn),Rn=function(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=s,this.startAt=o,this.endAt=a,this.cn=null,this.un=null};function On(t,e,n,r,i,s,o,a){return new Rn(t,e,n,r,i,s,o,a)}function Pn(t){return new Rn(t)}function Ln(t){return!ct(t.limit)&&"F"===t.an}function Fn(t){return!ct(t.limit)&&"L"===t.an}function Mn(t){return t.on.length>0?t.on[0].field:null}function Vn(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.hn())return r.field}return null}function jn(t){return null!==t.collectionGroup}function Un(t){var e=_(t);if(null===e.cn){e.cn=[];var n=Vn(e),r=Mn(e);if(null!==n&&null===r)n.p()||e.cn.push(new cr(n)),e.cn.push(new cr(A.v(),"asc"));else{for(var i=!1,s=0,o=e.on;s<o.length;s++){var a=o[s];e.cn.push(a),a.field.p()&&(i=!0)}if(!i){var u=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.cn.push(new cr(A.v(),u))}}}return e.cn}function qn(t){var e=_(t);if(!e.un)if("F"===e.an)e.un=ft(e.path,e.collectionGroup,Un(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Un(e);r<i.length;r++){var s=i[r];n.push(new cr(s.field,"desc"===s.dir?"asc":"desc"))}var o=e.endAt?new sr(e.endAt.position,!e.endAt.before):null,a=e.startAt?new sr(e.startAt.position,!e.startAt.before):null;e.un=ft(e.path,e.collectionGroup,n,e.filters,e.limit,o,a)}return e.un}function Bn(t,e,n){return new Rn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zn(t,e){return new Rn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function Hn(t,e){return new Rn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Gn(t,e){return mt(qn(t),qn(e))&&t.an===e.an}function $n(t){return pt(qn(t))+"|lt:"+t.an}function Wn(t){return"Query(target="+function(t){var e=t.path.R();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.R()+" "+e.op+" "+ie(e.value);var e})).join(", ")+"]"),ct(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.R()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+or(t.startAt)),t.endAt&&(e+=", endAt: "+or(t.endAt)),"Target("+e+")"}(qn(t))+"; limitType="+t.an+")"}function Kn(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.N(t.collectionGroup)&&t.path.T(n):x.F(t.path)?t.path.isEqual(n):t.path.I(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.p()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ar(t.startAt,Un(t),e)||t.endAt&&ar(t.endAt,Un(t),e))}(t,e)}function Qn(t){return function(e,n){for(var r=!1,i=0,s=Un(t);i<s.length;i++){var o=s[i],a=lr(o,e,n);if(0!==a)return a;r=r||o.field.p()}return 0}}var Yn=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return r.__extends(e,t),e.create=function(t,n,r){if(t.p())return"in"===n||"not-in"===n?this.ln(t,n,r):new Xn(t,n,r);if(he(r)){if("=="!==n&&"!="!==n)throw new h(l.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new e(t,n,r)}if(de(r)){if("=="!==n&&"!="!==n)throw new h(l.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new e(t,n,r)}return"array-contains"===n?new er(t,r):"in"===n?new nr(t,r):"not-in"===n?new rr(t,r):"array-contains-any"===n?new ir(t,r):new e(t,n,r)},e.ln=function(t,e,n){return"in"===e?new Jn(t,n):new Zn(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(ne(e,this.value)):null!==e&&Zt(this.value)===Zt(e)&&this._n(ne(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return v()}},e.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Xn=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=x.C(r.referenceValue),i}return r.__extends(e,t),e.prototype.matches=function(t){var e=x.i(t.key,this.key);return this._n(e)},e}(Yn),Jn=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=tr(0,n),r}return r.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Yn),Zn=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=tr(0,n),r}return r.__extends(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Yn);function tr(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return x.C(t.referenceValue)}))}var er=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return le(e)&&ee(e.arrayValue,this.value)},e}(Yn),nr=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ee(this.value.arrayValue,e)},e}(Yn),rr=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){if(ee(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ee(this.value.arrayValue,e)},e}(Yn),ir=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!le(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ee(e.value.arrayValue,t)}))},e}(Yn),sr=function(t,e){this.position=t,this.before=e};function or(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ie(t)})).join(",")}function ar(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.p()?x.i(x.C(o.referenceValue),n.key):ne(o,n.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ur(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!te(t.position[n],e.position[n]))return!1;return!0}var cr=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function lr(t,e,n){var r=t.field.p()?x.i(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ne(r,i):v()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return v()}}function hr(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var dr=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},fr=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.mn=r,this.Tn=i,this.En=0,this.In=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.En=0},t.prototype.Rn=function(){this.En=this.Tn},t.prototype.gn=function(t){var e=this;this.cancel();var n=Math.floor(this.En+this.Pn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.En+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.In=this.fn.yn(this.dn,i,(function(){return e.An=Date.now(),t()})),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},t.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},t.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},t.prototype.Pn=function(){return(Math.random()-.5)*this.En},t}(),pr=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Dn&&v(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,i){r.bn=function(n){r.Nn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.Fn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.xn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.xn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.xn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,s=!1;e.forEach((function(e){++r,e.next((function(){++i,s&&i===r&&t()}),(function(t){return n(t)}))})),s=!0,i===r&&t()}))},t.kn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),mr=function(){function t(e,n,r){this.name=e,this.version=n,this.Mn=r,12.2===t.On(o.getUA())&&m("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return p("SimpleDb","Removing database:",t),br(window.indexedDB.deleteDatabase(t)).Fn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=o.getUA(),n=t.On(e),r=0<n&&n<10,i=t.qn(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},t.Qn=function(t,e){return t.store(e)},t.On=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Wn=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(p("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new yr(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new h(l.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new yr(t,n))},i.onupgradeneeded=function(t){p("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Mn.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){p("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(t){return n.jn(t)}),this.db)]}}))}))},t.prototype.Kn=function(t){this.jn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var s,o,a,u,c;return r.__generator(this,(function(l){switch(l.label){case 0:s="readonly"===e,o=0,a=function(){var e,a,c,l,h;return r.__generator(this,(function(r){switch(r.label){case 0:++o,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.Wn(t)];case 2:return u.db=r.sent(),e=wr.open(u.db,t,s?"readonly":"readwrite",n),a=i(e).catch((function(t){return e.abort(t),pr.reject(t)})).Fn(),c={},a.catch((function(){})),[4,e.Gn];case 3:return[2,(c.value=(r.sent(),a),c)];case 4:return p("SimpleDb","Transaction failed with error:",(l=r.sent()).message,"Retrying:",h="FirebaseError"!==l.name&&o<3),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),gr=function(){function t(t){this.zn=t,this.Hn=!1,this.Yn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Yn=t},t.prototype.delete=function(){return br(this.zn.delete())},t}(),yr=function(t){function e(e,n){var r=this;return(r=t.call(this,l.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return r.__extends(e,t),e}(h);function vr(t){return"IndexedDbTransactionError"===t.name}var wr=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new dr,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new yr(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=Sr(e.target.error);n.Zn.reject(new yr(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new yr(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(p("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new _r(e)},t}(),_r=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),br(n)},t.prototype.add=function(t){return p("SimpleDb","ADD",this.store.name,t,t),br(this.store.add(t))},t.prototype.get=function(t){var e=this;return br(this.store.get(t)).next((function(n){return void 0===n&&(n=null),p("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return p("SimpleDb","DELETE",this.store.name,t),br(this.store.delete(t))},t.prototype.count=function(){return p("SimpleDb","COUNT",this.store.name),br(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ns=function(t,e){p("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new pr((function(n,r){e.onerror=function(t){var e=Sr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new pr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new gr(i),o=e(i.primaryKey,i.value,s);if(o instanceof pr){var a=o.catch((function(t){return s.done(),pr.reject(t)}));n.push(a)}s.Sn?r():null===s.Jn?i.continue():i.continue(s.Jn)}else r()}})).next((function(){return pr.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function br(t){return new pr((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Sr(t.target.error);n(e)}}))}var Er=!1;function Sr(t){var e=mr.On(o.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new h("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Er||(Er=!0,setTimeout((function(){throw r}),0)),r}}return t}function Tr(){return"undefined"!=typeof window?window:null}function Ir(){return"undefined"!=typeof document?document:null}var Cr=function(){function t(t,e,n,r,i){this.cs=t,this.dn=e,this.us=n,this.op=r,this.hs=i,this.ls=new dr,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new h(l.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.cs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},t}(),Ar=function(){function t(){var t=this;this.Ts=Promise.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new fr(this,"async_queue_retry"),this.Vs=function(){var e=Ir();e&&p("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.ys.Vn()};var e=Ir();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=Ir();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vs)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Es.push(t),e.Ns()}))},t.prototype.Ns=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(0===this.Es.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return n.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!vr(t=n.sent()))throw t;return p("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Es.length>0&&this.ys.gn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Ts.then((function(){return e.gs=!0,t().catch((function(t){throw e.Rs=t,e.gs=!1,m("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gs=!1,t}))}));return this.Ts=n,n},t.prototype.yn=function(t,e,n){var r=this;this.vs(),this.Ps.indexOf(t)>-1&&(e=0);var i=Cr._s(this,t,e,n,(function(t){return r.Fs(t)}));return this.As.push(i),i},t.prototype.vs=function(){this.Rs&&v()},t.prototype.xs=function(){},t.prototype.$s=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.Ts];case 1:e.sent(),e.label=2;case 2:if(t!==this.Ts)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.ks=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.$s().then((function(){e.As.sort((function(t,e){return t.us-e.us}));for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==t&&i.dn===t)break}return e.$s()}))},t.prototype.Os=function(t){this.Ps.push(t)},t.prototype.Fs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function xr(t,e){if(m("AsyncQueue",e+": "+t),vr(t))return new h(l.UNAVAILABLE,e+": "+t);throw t}var kr=function(){this.Ls=void 0,this.listeners=[]},Dr=function(){this.Bs=new ot((function(t){return $n(t)}),Gn),this.onlineState="Unknown",this.qs=new Set};function Nr(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,o,a,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:if(n=_(t),s=!1,(o=n.Bs.get(i=e.query))||(s=!0,o=new kr),!s)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),a=o,[4,n.Us(i)];case 2:return a.Ls=r.sent(),[3,4];case 3:return u=r.sent(),c=xr(u,"Initialization of query '"+Wn(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.Bs.set(i,o),o.listeners.push(e),e.Qs(n.onlineState),o.Ls&&e.Ws(o.Ls)&&Lr(n),[2]}}))}))}function Rr(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,o,a;return r.__generator(this,(function(r){return n=_(t),s=!1,(o=n.Bs.get(i=e.query))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),s=0===o.listeners.length),s?[2,(n.Bs.delete(i),n.js(i))]:[2]}))}))}function Or(t,e){for(var n=_(t),r=!1,i=0,s=e;i<s.length;i++){var o=s[i],a=n.Bs.get(o.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Ws(o)&&(r=!0);a.Ls=o}}r&&Lr(n)}function Pr(t,e,n){var r=_(t),i=r.Bs.get(e);if(i)for(var s=0,o=i.listeners;s<o.length;s++)o[s].onError(n);r.Bs.delete(e)}function Lr(t){t.qs.forEach((function(t){t.next()}))}var Fr=function(){function t(t,e,n){this.query=t,this.Ks=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Ws=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ut(t.query,t.docs,t.Qt,e,t.Wt,t.fromCache,t.jt,!0)}var s=!1;return this.Gs?this.Hs(t)&&(this.Ks.next(t),s=!0):this.Ys(t,this.onlineState)&&(this.Js(t),s=!0),this.zs=t,s},t.prototype.onError=function(t){this.Ks.error(t)},t.prototype.Qs=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),e=!0),e},t.prototype.Ys=function(t,e){return!t.fromCache||!(this.options.Xs&&"Offline"!==e||t.docs.m()&&"Offline"!==e)},t.prototype.Hs=function(t){return t.docChanges.length>0||!!(t.jt||this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.Js=function(t){t=Ut.Gt(t.query,t.docs,t.Wt,t.fromCache),this.Gs=!0,this.Ks.next(t)},t}(),Mr=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Mr.UNAUTHENTICATED=new Mr(null),Mr.ei=new Mr("google-credentials-uid"),Mr.ni=new Mr("first-party-uid");var Vr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}return t.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},t}();function jr(t,e){return"firestore_clients_"+t+"_"+e}function Ur(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Zs()&&(r+="_"+e.uid),r}function qr(t,e){return"firestore_targets_"+t+"_"+e}Vr.ai=-1;var Br=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ci=function(e,n,r){var i=JSON.parse(r),s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),o=void 0;return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(o=new h(i.error.code,i.error.message)),s?new t(e,n,i.state,o):(m("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),zr=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ci=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),s=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(s=new h(r.error.code,r.error.message)),i?new t(e,r.state,s):(m("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hr=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ci=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Mt(),o=0;i&&o<r.activeTargetIds.length;++o)i=ht(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(m("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Gr=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ci=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(m("SharedClientState","Failed to parse online state: "+e),null)},t}(),$r=function(){function t(){this.activeTargetIds=Mt()}return t.prototype.hi=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ui=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Wr=function(){function t(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new St(Y),this.Ei=!1,this.Ii=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=jr(this.persistenceKey,this._i),this.Ri=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ti=this.Ti.ot(this._i,new $r),this.gi=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.yi=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Vi=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wi)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e,n,i,s,o,a,u,c,l,h=this;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.fi.pi()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this._i&&(s=this.getItem(jr(this.persistenceKey,i)))&&(o=Hr.ci(i,s))&&(this.Ti=this.Ti.ot(o.clientId,o));for(this.bi(),(a=this.storage.getItem(this.Vi))&&(u=this.vi(a))&&this.Si(u),c=0,l=this.Ii;c<l.length;c++)this.mi(l[c]);return this.Ii=[],this.window.addEventListener("unload",(function(){return h.Di()})),this.Ei=!0,[2]}}))}))},t.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},t.prototype.Ci=function(){return this.Ni(this.Ti)},t.prototype.Fi=function(t){var e=!1;return this.Ti.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xi=function(t){this.$i(t,"pending")},t.prototype.ki=function(t,e,n){this.$i(t,e,n),this.Mi(t)},t.prototype.Oi=function(t){var e="not-current";if(this.Fi(t)){var n=this.storage.getItem(qr(this.persistenceKey,t));if(n){var r=zr.ci(t,n);r&&(e=r.state)}}return this.Li.hi(t),this.bi(),e},t.prototype.Bi=function(t){this.Li.li(t),this.bi()},t.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},t.prototype.Ui=function(t){this.removeItem(qr(this.persistenceKey,t))},t.prototype.Qi=function(t,e,n){this.Wi(t,e,n)},t.prototype.ji=function(t,e,n){var r=this;e.forEach((function(t){r.Mi(t)})),this.currentUser=t,n.forEach((function(t){r.xi(t)}))},t.prototype.Ki=function(t){this.Gi(t)},t.prototype.Di=function(){this.Ei&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ei=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){p("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.mi=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(p("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ai)return void m("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return r.__awaiter(e,void 0,void 0,(function(){var t,e,i,s,o,a;return r.__generator(this,(function(r){if(this.Ei){if(null!==n.key)if(this.gi.test(n.key)){if(null==n.newValue)return t=this.zi(n.key),[2,this.Hi(t,null)];if(e=this.Yi(n.key,n.newValue))return[2,this.Hi(e.clientId,e)]}else if(this.Pi.test(n.key)){if(null!==n.newValue&&(i=this.Ji(n.key,n.newValue)))return[2,this.Xi(i)]}else if(this.yi.test(n.key)){if(null!==n.newValue&&(s=this.Zi(n.key,n.newValue)))return[2,this.tr(s)]}else if(n.key===this.Vi){if(null!==n.newValue&&(o=this.vi(n.newValue)))return[2,this.Si(o)]}else n.key===this.Ri&&(a=function(t){var e=Vr.ai;if(null!=t)try{var n=JSON.parse(t);w("number"==typeof n),e=n}catch(t){m("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Vr.ai&&this.si(a)}else this.Ii.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),t.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},t.prototype.$i=function(t,e,n){var r=new Br(this.currentUser,t,e,n),i=Ur(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ui())},t.prototype.Mi=function(t){var e=Ur(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Gi=function(t){this.storage.setItem(this.Vi,JSON.stringify({clientId:this._i,onlineState:t}))},t.prototype.Wi=function(t,e,n){var r=qr(this.persistenceKey,t),i=new zr(t,e,n);this.setItem(r,i.ui())},t.prototype.zi=function(t){var e=this.gi.exec(t);return e?e[1]:null},t.prototype.Yi=function(t,e){var n=this.zi(t);return Hr.ci(n,e)},t.prototype.Ji=function(t,e){var n=this.Pi.exec(t),r=Number(n[1]);return Br.ci(new Mr(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Zi=function(t,e){var n=this.yi.exec(t),r=Number(n[1]);return zr.ci(r,e)},t.prototype.vi=function(t){return Gr.ci(t)},t.prototype.Xi=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fi.er(t.batchId,t.state,t.error)]:(p("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},t.prototype.Hi=function(t,e){var n=this,r=e?this.Ti.ot(t,e):this.Ti.remove(t),i=this.Ni(this.Ti),s=this.Ni(r),o=[],a=[];return s.forEach((function(t){i.has(t)||o.push(t)})),i.forEach((function(t){s.has(t)||a.push(t)})),this.fi.sr(o,a).then((function(){n.Ti=r}))},t.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},t.prototype.Ni=function(t){var e=Mt();return t.forEach((function(t,n){e=e.kt(n.activeTargetIds)})),e},t}(),Kr=function(){function t(){this.ir=new $r,this.rr={},this.di=null,this.si=null}return t.prototype.xi=function(t){},t.prototype.ki=function(t,e,n){},t.prototype.Oi=function(t){return this.ir.hi(t),this.rr[t]||"not-current"},t.prototype.Qi=function(t,e,n){this.rr[t]=e},t.prototype.Bi=function(t){this.ir.li(t)},t.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.Ui=function(t){delete this.rr[t]},t.prototype.Ci=function(){return this.ir.activeTargetIds},t.prototype.Fi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.start=function(){return this.ir=new $r,Promise.resolve()},t.prototype.ji=function(t,e,n){},t.prototype.Ki=function(t){},t.prototype.Di=function(){},t.prototype.oi=function(t){},t}(),Qr=function(){function t(t,e,n,r){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=r}return t.prototype.cr=function(t,e,n){for(var r=n.ur,i=0;i<this.mutations.length;i++){var s=this.mutations[i];s.key.isEqual(t)&&(e=dn(s,e,r[i]))}return e},t.prototype.hr=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=fn(i,e,e,this.ar))}for(var s=e,o=0,a=this.mutations;o<a.length;o++){var u=a[o];u.key.isEqual(t)&&(e=fn(u,e,s,this.ar))}return e},t.prototype.lr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.hr(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Lt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&X(this.mutations,t.mutations,(function(t,e){return mn(t,e)}))&&X(this.baseMutations,t.baseMutations,(function(t,e){return mn(t,e)}))},t}(),Yr=function(){function t(t,e,n,r){this.batch=t,this._r=e,this.ur=n,this.dr=r}return t.from=function(e,n,r){w(e.mutations.length===r.length);for(var i=Ot,s=e.mutations,o=0;o<s.length;o++)i=i.ot(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),Xr=function(){function t(){this.wr=new ot((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.mr=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),t.prototype.Er=function(t,e){this.Ir(),this.readTime=e,this.wr.set(t.key,t)},t.prototype.Ar=function(t,e){this.Ir(),e&&(this.readTime=e),this.wr.set(t,null)},t.prototype.Rr=function(t,e){this.Ir();var n=this.wr.get(e);return void 0!==n?pr.resolve(n):this.gr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Ir(),this.mr=!0,this.yr(t)},t.prototype.Ir=function(){},t}(),Jr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zr=function(){function t(){this.Vr=[]}return t.prototype.pr=function(t){this.Vr.push(t)},t.prototype.br=function(){this.Vr.forEach((function(t){return t()}))},t}(),ti=function(){function t(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}return t.prototype.Cr=function(t,e){var n=this;return this.Sr.Nr(t,e).next((function(r){return n.Fr(t,e,r)}))},t.prototype.Fr=function(t,e,n){return this.vr.Rr(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].hr(e,t);return t}))},t.prototype.$r=function(t,e,n){var r=Dt();return e.forEach((function(t,e){for(var i=0,s=n;i<s.length;i++)e=s[i].hr(t,e);r=r.ot(t,e)})),r},t.prototype.kr=function(t,e){var n=this;return this.vr.getEntries(t,e).next((function(e){return n.Mr(t,e)}))},t.prototype.Mr=function(t,e){var n=this;return this.Sr.Or(t,e).next((function(r){var i=n.$r(t,e,r),s=kt();return i.forEach((function(t,e){e||(e=new Dn(t,ut.min())),s=s.ot(t,e)})),s}))},t.prototype.Lr=function(t,e,n){return function(t){return x.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Br(t,e.path):jn(e)?this.qr(t,e,n):this.Ur(t,e,n)},t.prototype.Br=function(t,e){return this.Cr(t,new x(e)).next((function(t){var e=Rt();return t instanceof kn&&(e=e.ot(t.key,t)),e}))},t.prototype.qr=function(t,e,n){var r=this,i=e.collectionGroup,s=Rt();return this.Dr.Qr(t,i).next((function(o){return pr.forEach(o,(function(o){var a=function(t,e){return new Rn(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,o.child(i));return r.Ur(t,a,n).next((function(t){t.forEach((function(t,e){s=s.ot(t,e)}))}))})).next((function(){return s}))}))},t.prototype.Ur=function(t,e,n){var r,i,s=this;return this.vr.Lr(t,e,n).next((function(n){return r=n,s.Sr.Wr(t,e)})).next((function(e){return s.jr(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key,l=r.get(c),h=fn(u,l,l,s.ar);r=h instanceof kn?r.ot(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Kn(e,n)||(r=r.remove(t))})),r}))},t.prototype.jr=function(t,e,n){for(var r=Lt(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof vn&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.vr.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof kn&&(c=c.ot(t,e))})),c}))},t}(),ei=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Kr=n,this.Gr=r}return t.zr=function(e,n){for(var r=Lt(),i=Lt(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}();function ni(t,e){var n=t[1],r=e[1],i=Y(t[0],e[0]);return 0===i?Y(n,r):i}var ri=function(){function t(t){this.Hr=t,this.buffer=new Ct(ni),this.Yr=0}return t.prototype.Jr=function(){return++this.Yr},t.prototype.Xr=function(t){var e=[t,this.Jr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ni(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ii={Zr:!1,eo:0,no:0,so:0},si=function(){function t(t,e,n){this.io=t,this.ro=e,this.oo=n}return t.ao=function(e){return new t(e,t.co,t.uo)},t}();si.ho=-1,si.lo=1048576,si._o=41943040,si.co=10,si.uo=1e3,si.fo=new si(si._o,si.co,si.uo),si.do=new si(si.ho,0,0);var oi=function(){function t(t,e){this.wo=t,this.cs=e,this.mo=!1,this.To=null}return t.prototype.start=function(t){this.wo.params.io!==si.ho&&this.Eo(t)},t.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(t.prototype,"Ei",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),t.prototype.Eo=function(t){var e=this,n=this.mo?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.To=this.cs.yn("lru_garbage_collection",n,(function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:this.To=null,this.mo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Io(this.wo)];case 2:return n.sent(),[3,7];case 3:return vr(e=n.sent())?(p("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Is(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Eo(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ai=function(){function t(t,e){this.Ao=t,this.params=e}return t.prototype.Ro=function(t,e){return this.Ao.Po(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yo=function(t,e){var n=this;if(0===e)return pr.resolve(Vr.ai);var r=new ri(e);return this.Ao.Ce(t,(function(t){return r.Xr(t.sequenceNumber)})).next((function(){return n.Ao.Vo(t,(function(t){return r.Xr(t)}))})).next((function(){return r.maxValue}))},t.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},t.prototype.bo=function(t,e){return this.Ao.bo(t,e)},t.prototype.vo=function(t,e){var n=this;return this.params.io===si.ho?(p("LruGarbageCollector","Garbage collection skipped; disabled"),pr.resolve(ii)):this.So(t).next((function(r){return r<n.params.io?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.io),ii):n.Do(t,e)}))},t.prototype.So=function(t){return this.Ao.So(t)},t.prototype.Do=function(t,e){var n,r,i,o,a,u,c,l=this,h=Date.now();return this.Ro(t,this.params.ro).next((function(e){return e>l.params.oo?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.oo+" from "+e),r=l.params.oo):r=e,o=Date.now(),l.yo(t,r)})).next((function(r){return n=r,a=Date.now(),l.po(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.bo(t,n)})).next((function(t){return c=Date.now(),f()<=s.LogLevel.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),pr.resolve({Zr:!0,eo:r,no:i,so:t})}))},t}();function ui(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=li(e)),e=ci(t.get(n),e);return li(e)}function ci(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function li(t){return t+"\x01\x01"}function hi(t){var e=t.length;if(w(e>=2),2===e)return w("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),I.P();for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&v(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:v()}s=o+2}return new I(r)}var di=function(t){this.Co=t};function fi(t,e){if(e.document)return function(t,e,n){var r=Ae(t,e.name),i=Se(e.updateTime),s=new In({mapValue:{fields:e.fields}});return new kn(r,i,s,{hasCommittedMutations:!!n})}(t.Co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=x.$(e.noDocument.path),r=vi(e.noDocument.readTime);return new Dn(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=x.$(e.unknownDocument.path),s=vi(e.unknownDocument.version);return new Nn(i,s)}return v()}function pi(t,e,n){var r=mi(n),i=e.key.path.h().A();if(e instanceof kn){var s=function(t,e){return{name:Ce(t,e.key),fields:e.rn().mapValue.fields,updateTime:_e(t,e.version.Z())}}(t.Co,e);return new Hi(null,null,s,e.hasCommittedMutations,r,i)}if(e instanceof Dn){var o=e.key.path.A(),a=yi(e.version),u=e.hasCommittedMutations;return new Hi(null,new Bi(o,a),null,u,r,i)}if(e instanceof Nn){var c=e.key.path.A(),l=yi(e.version);return new Hi(new zi(c,l),null,null,!0,r,i)}return v()}function mi(t){var e=t.Z();return[e.seconds,e.nanoseconds]}function gi(t){var e=new at(t[0],t[1]);return ut.J(e)}function yi(t){var e=t.Z();return new Mi(e.seconds,e.nanoseconds)}function vi(t){var e=new at(t.seconds,t.nanoseconds);return ut.J(e)}function wi(t,e){var n=(e.baseMutations||[]).map((function(e){return Pe(t.Co,e)})),r=e.mutations.map((function(e){return Pe(t.Co,e)})),i=at.fromMillis(e.localWriteTimeMs);return new Qr(e.batchId,i,n,r)}function _i(t){var e,n,r=vi(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?vi(t.lastLimboFreeSnapshotVersion):ut.min();return void 0!==t.query.documents?(w(1===(n=t.query).documents.length),e=qn(Pn(ke(n.documents[0])))):e=function(t){var e=ke(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){w(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=function t(e){return e?void 0!==e.unaryFilter?[He(e)]:void 0!==e.fieldFilter?[ze(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):v():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new cr(Be(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ct(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ve(n.startAt));var l=null;return n.endAt&&(l=Ve(n.endAt)),qn(On(e,i,a,o,u,"F",c,l))}(t.query),new wt(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Z.fromBase64String(t.resumeToken))}function bi(t,e){var n,r=yi(e.nt),i=yi(e.lastLimboFreeSnapshotVersion);n=gt(e.target)?Le(t.Co,e.target):Fe(t.Co,e.target);var s=e.resumeToken.toBase64();return new $i(e.targetId,pt(e.target),r,s,e.sequenceNumber,i,n)}var Ei=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Dr=n,this.No=r,this.Fo={}}return t.xo=function(e,n,r,i){return w(""!==e.uid),new t(e.Zs()?e.uid:"",n,r,i)},t.prototype.$o=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ii(t).rs({index:Ui.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.ko=function(t,e,n,r){var i=this,s=Ci(t),o=Ii(t);return o.add({}).next((function(a){w("number"==typeof a);for(var u=new Qr(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Oe(t.Co,e)})),i=n.mutations.map((function(e){return Oe(t.Co,e)}));return new Ui(e,n.batchId,n.ar.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new Ct((function(t,e){return Y(t.R(),e.R())})),d=0,f=r;d<f.length;d++){var p=f[d],m=qi.key(i.userId,p.key.path,a);h=h.add(p.key.path.h()),l.push(o.put(c)),l.push(s.put(m,qi.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Dr.Mo(t,e))})),t.pr((function(){i.Fo[a]=u.keys()})),pr.$n(l).next((function(){return u}))}))},t.prototype.Oo=function(t,e){var n=this;return Ii(t).get(e).next((function(t){return t?(w(t.userId===n.userId),wi(n.serializer,t)):null}))},t.prototype.Lo=function(t,e){var n=this;return this.Fo[e]?pr.resolve(this.Fo[e]):this.Oo(t,e).next((function(t){if(t){var r=t.keys();return n.Fo[e]=r,r}return null}))},t.prototype.Bo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Ii(t).rs({index:Ui.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(w(e.batchId>=r),s=wi(n.serializer,e)),i.done()})).next((function(){return s}))},t.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ii(t).rs({index:Ui.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ii(t).ts(Ui.userMutationsIndex,n).next((function(t){return t.map((function(t){return wi(e.serializer,t)}))}))},t.prototype.Nr=function(t,e){var n=this,r=qi.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Ci(t).rs({range:i},(function(r,i,o){var a=r[0],u=r[2],c=hi(r[1]);if(a===n.userId&&e.path.isEqual(c))return Ii(t).get(u).next((function(t){if(!t)throw v();w(t.userId===n.userId),s.push(wi(n.serializer,t))}));o.done()})).next((function(){return s}))},t.prototype.Or=function(t,e){var n=this,r=new Ct(Y),i=[];return e.forEach((function(e){var s=qi.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=Ci(t).rs({range:o},(function(t,i,s){var o=t[0],a=t[2],u=hi(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()}));i.push(a)})),pr.$n(i).next((function(){return n.Qo(t,r)}))},t.prototype.Wr=function(t,e){var n=this,r=e.path,i=r.length+1,s=qi.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ct(Y);return Ci(t).rs({range:o},(function(t,e,s){var o=t[0],u=t[2],c=hi(t[1]);o===n.userId&&r.T(c)?c.length===i&&(a=a.add(u)):s.done()})).next((function(){return n.Qo(t,a)}))},t.prototype.Qo=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ii(t).get(e).next((function(t){if(null===t)throw v();w(t.userId===n.userId),r.push(wi(n.serializer,t))})))})),pr.$n(i).next((function(){return r}))},t.prototype.Wo=function(t,e){var n=this;return Ti(t.jo,this.userId,e).next((function(r){return t.pr((function(){n.Ko(e.batchId)})),pr.forEach(r,(function(e){return n.No.Go(t,e)}))}))},t.prototype.Ko=function(t){delete this.Fo[t]},t.prototype.zo=function(t){var e=this;return this.$o(t).next((function(n){if(!n)return pr.resolve();var r=IDBKeyRange.lowerBound(qi.prefixForUser(e.userId)),i=[];return Ci(t).rs({range:r},(function(t,n,r){if(t[0]===e.userId){var s=hi(t[1]);i.push(s)}else r.done()})).next((function(){w(0===i.length)}))}))},t.prototype.Ho=function(t,e){return Si(t,this.userId,e)},t.prototype.Yo=function(t){var e=this;return Ai(t).get(this.userId).next((function(t){return t||new ji(e.userId,-1,"")}))},t}();function Si(t,e,n){var r=qi.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Ci(t).rs({range:s,ss:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()})).next((function(){return o}))}function Ti(t,e,n){var r=t.store(Ui.store),i=t.store(qi.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.rs({range:o},(function(t,e,n){return a++,n.delete()}));s.push(u.next((function(){w(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=qi.key(e,d.key.path,n.batchId);s.push(i.delete(f)),c.push(d.key)}return pr.$n(s).next((function(){return c}))}function Ii(t){return us.Qn(t,Ui.store)}function Ci(t){return us.Qn(t,qi.store)}function Ai(t){return us.Qn(t,ji.store)}var xi=function(){function t(t,e){this.serializer=t,this.Dr=e}return t.prototype.Er=function(t,e,n){return Ni(t).put(Ri(e),n)},t.prototype.Ar=function(t,e){var n=Ni(t),r=Ri(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Jo(t,r)}))},t.prototype.Rr=function(t,e){var n=this;return Ni(t).get(Ri(e)).next((function(t){return n.Xo(t)}))},t.prototype.Zo=function(t,e){var n=this;return Ni(t).get(Ri(e)).next((function(t){var e=n.Xo(t);return e?{ta:e,size:Oi(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Dt();return this.ea(t,e,(function(t,e){var i=n.Xo(e);r=r.ot(t,i)})).next((function(){return r}))},t.prototype.na=function(t,e){var n=this,r=Dt(),i=new St(x.i);return this.ea(t,e,(function(t,e){var s=n.Xo(e);s?(r=r.ot(t,s),i=i.ot(t,Oi(e))):(r=r.ot(t,null),i=i.ot(t,0))})).next((function(){return{sa:r,ia:i}}))},t.prototype.ea=function(t,e,n){if(e.m())return pr.resolve();var r=IDBKeyRange.bound(e.first().path.A(),e.last().path.A()),i=e._t(),s=i.It();return Ni(t).rs({range:r},(function(t,e,r){for(var o=x.$(t);s&&x.i(s,o)<0;)n(s,null),s=i.It();s&&s.isEqual(o)&&(n(s,e),s=i.At()?i.It():null),s?r.Xn(s.path.A()):r.done()})).next((function(){for(;s;)n(s,null),s=i.At()?i.It():null}))},t.prototype.Lr=function(t,e,n){var r=this,i=Rt(),s=e.path.length+1,o={};if(n.isEqual(ut.min())){var a=e.path.A();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.A(),c=mi(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Hi.collectionReadTimeIndex}return Ni(t).rs(o,(function(t,n,o){if(t.length===s){var a=fi(r.serializer,n);e.path.T(a.key.path)?a instanceof kn&&Kn(e,a)&&(i=i.ot(a.key,a)):o.done()}})).next((function(){return i}))},t.prototype.ra=function(t){return new ki(this,!!t&&t.oa)},t.prototype.aa=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Di(t).get(Gi.key).next((function(t){return w(!!t),t}))},t.prototype.Jo=function(t,e){return Di(t).put(Gi.key,e)},t.prototype.Xo=function(t){if(t){var e=fi(this.serializer,t);return e instanceof Dn&&e.version.isEqual(ut.min())?null:e}return null},t}(),ki=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ca=e,r.oa=n,r.ua=new ot((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return r.__extends(e,t),e.prototype.yr=function(t){var e=this,n=[],r=0,i=new Ct((function(t,e){return Y(t.R(),e.R())}));return this.wr.forEach((function(s,o){var a=e.ua.get(s);if(o){var u=pi(e.ca.serializer,o,e.readTime);i=i.add(s.path.h());var c=Oi(u);r+=c-a,n.push(e.ca.Er(t,s,u))}else if(r-=a,e.oa){var l=pi(e.ca.serializer,new Dn(s,ut.min()),e.readTime);n.push(e.ca.Er(t,s,l))}else n.push(e.ca.Ar(t,s))})),i.forEach((function(r){n.push(e.ca.Dr.Mo(t,r))})),n.push(this.ca.updateMetadata(t,r)),pr.$n(n)},e.prototype.gr=function(t,e){var n=this;return this.ca.Zo(t,e).next((function(t){return null===t?(n.ua.set(e,0),null):(n.ua.set(e,t.size),t.ta)}))},e.prototype.Pr=function(t,e){var n=this;return this.ca.na(t,e).next((function(t){var e=t.sa;return t.ia.forEach((function(t,e){n.ua.set(t,e)})),e}))},e}(Xr);function Di(t){return us.Qn(t,Gi.store)}function Ni(t){return us.Qn(t,Hi.store)}function Ri(t){return t.path.A()}function Oi(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw v();e=t.noDocument}return JSON.stringify(e).length}var Pi=function(){function t(){this.ha=new Li}return t.prototype.Mo=function(t,e){return this.ha.add(e),pr.resolve()},t.prototype.Qr=function(t,e){return pr.resolve(this.ha.getEntries(e))},t}(),Li=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t._(),n=t.h(),r=this.index[e]||new Ct(I.i),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t._(),n=t.h(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ct(I.i)).A()},t}(),Fi=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;w(n<r&&n>=0&&r<=10);var s=new wr("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Vi.store)}(t),function(t){t.createObjectStore(ji.store,{keyPath:ji.keyPath}),t.createObjectStore(Ui.store,{keyPath:Ui.keyPath,autoIncrement:!0}).createIndex(Ui.userMutationsIndex,Ui.userMutationsKeyPath,{unique:!0}),t.createObjectStore(qi.store)}(t),Yi(t),function(t){t.createObjectStore(Hi.store)}(t));var o=pr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Wi.store),t.deleteObjectStore($i.store),t.deleteObjectStore(Ki.store)}(t),Yi(t)),o=o.next((function(){return function(t){var e=t.store(Ki.store),n=new Ki(0,0,ut.min().Z(),0);return e.put(Ki.key,n)}(s)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(t,e){return e.store(Ui.store).ts().next((function(n){t.deleteObjectStore(Ui.store),t.createObjectStore(Ui.store,{keyPath:Ui.keyPath,autoIncrement:!0}).createIndex(Ui.userMutationsIndex,Ui.userMutationsKeyPath,{unique:!0});var r=e.store(Ui.store),i=n.map((function(t){return r.put(t)}));return pr.$n(i)}))}(t,s)}))),o=o.next((function(){!function(t){t.createObjectStore(Xi.store,{keyPath:Xi.keyPath})}(t)}))),n<5&&r>=5&&(o=o.next((function(){return i.removeAcknowledgedMutations(s)}))),n<6&&r>=6&&(o=o.next((function(){return function(t){t.createObjectStore(Gi.store)}(t),i.addDocumentGlobal(s)}))),n<7&&r>=7&&(o=o.next((function(){return i.ensureSequenceNumbers(s)}))),n<8&&r>=8&&(o=o.next((function(){return i.createCollectionParentIndex(t,s)}))),n<9&&r>=9&&(o=o.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Hi.store);e.createIndex(Hi.readTimeIndex,Hi.readTimeIndexPath,{unique:!1}),e.createIndex(Hi.collectionReadTimeIndex,Hi.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.rewriteCanonicalIds(s)}))),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Hi.store).rs((function(t,n){e+=Oi(n)})).next((function(){var n=new Gi(e);return t.store(Gi.store).put(Gi.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(ji.store),r=t.store(Ui.store);return n.ts().next((function(n){return pr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(Ui.userMutationsIndex,i).next((function(r){return pr.forEach(r,(function(r){w(r.userId===n.userId);var i=wi(e.serializer,r);return Ti(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Wi.store),n=t.store(Hi.store);return t.store(Ki.store).get(Ki.key).next((function(t){var r=[];return n.rs((function(n,i){var s=new I(n),o=function(t){return[0,ui(t)]}(s);r.push(e.get(o).next((function(n){return n?pr.resolve():function(n){return e.put(new Wi(0,ui(n),t.highestListenSequenceNumber))}(s)})))})).next((function(){return pr.$n(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Qi.store,{keyPath:Qi.keyPath});var n=e.store(Qi.store),r=new Li,i=function(t){if(r.add(t)){var e=t._(),i=t.h();return n.put({collectionId:e,parent:ui(i)})}};return e.store(Hi.store).rs({ss:!0},(function(t,e){var n=new I(t);return i(n.h())})).next((function(){return e.store(qi.store).rs({ss:!0},(function(t,e){var n=hi(t[1]);return i(n.h())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store($i.store);return n.rs((function(t,r){var i=_i(r),s=bi(e.serializer,i);return n.put(s)}))},t}(),Mi=function(t,e){this.seconds=t,this.nanoseconds=e},Vi=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Vi.store="owner",Vi.key="owner";var ji=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ji.store="mutationQueues",ji.keyPath="userId";var Ui=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ui.store="mutations",Ui.keyPath="batchId",Ui.userMutationsIndex="userMutationsIndex",Ui.userMutationsKeyPath=["userId","batchId"];var qi=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ui(e)]},t.key=function(t,e,n){return[t,ui(e),n]},t}();qi.store="documentMutations",qi.PLACEHOLDER=new qi;var Bi=function(t,e){this.path=t,this.readTime=e},zi=function(t,e){this.path=t,this.version=e},Hi=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};Hi.store="remoteDocuments",Hi.readTimeIndex="readTimeIndex",Hi.readTimeIndexPath="readTime",Hi.collectionReadTimeIndex="collectionReadTimeIndex",Hi.collectionReadTimeIndexPath=["parentPath","readTime"];var Gi=function(t){this.byteSize=t};Gi.store="remoteDocumentGlobal",Gi.key="remoteDocumentGlobalKey";var $i=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};$i.store="targets",$i.keyPath="targetId",$i.queryTargetsIndexName="queryTargetsIndex",$i.queryTargetsKeyPath=["canonicalId","targetId"];var Wi=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Wi.store="targetDocuments",Wi.keyPath=["targetId","path"],Wi.documentTargetsIndex="documentTargetsIndex",Wi.documentTargetsKeyPath=["path","targetId"];var Ki=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ki.key="targetGlobalKey",Ki.store="targetGlobal";var Qi=function(t,e){this.collectionId=t,this.parent=e};function Yi(t){t.createObjectStore(Wi.store,{keyPath:Wi.keyPath}).createIndex(Wi.documentTargetsIndex,Wi.documentTargetsKeyPath,{unique:!0}),t.createObjectStore($i.store,{keyPath:$i.keyPath}).createIndex($i.queryTargetsIndexName,$i.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ki.store)}Qi.store="collectionParents",Qi.keyPath=["collectionId","parent"];var Xi=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Xi.store="clientMetadata",Xi.keyPath="clientId";var Ji=r.__spreadArrays(r.__spreadArrays(r.__spreadArrays([ji.store,Ui.store,qi.store,Hi.store,$i.store,Vi.store,Ki.store,Wi.store],[Xi.store]),[Gi.store]),[Qi.store]),Zi=function(){function t(){this.la=new Li}return t.prototype.Mo=function(t,e){var n=this;if(!this.la.has(e)){var r=e._(),i=e.h();t.pr((function(){n.la.add(e)}));var s={collectionId:r,parent:ui(i)};return ts(t).put(s)}return pr.resolve()},t.prototype.Qr=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[J(e),""],!1,!0);return ts(t).ts(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(hi(s.parent))}return n}))},t}();function ts(t){return us.Qn(t,Qi.store)}var es=function(){function t(t){this._a=t}return t.prototype.next=function(){return this._a+=2,this._a},t.fa=function(){return new t(0)},t.da=function(){return new t(-1)},t}(),ns=function(){function t(t,e){this.No=t,this.serializer=e}return t.prototype.wa=function(t){var e=this;return this.ma(t).next((function(n){var r=new es(n.highestTargetId);return n.highestTargetId=r.next(),e.Ta(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ea=function(t){return this.ma(t).next((function(t){return ut.J(new at(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ia=function(t){return this.ma(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Aa=function(t,e,n){var r=this;return this.ma(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.Z()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ta(t,i)}))},t.prototype.Ra=function(t,e){var n=this;return this.ga(t,e).next((function(){return n.ma(t).next((function(r){return r.targetCount+=1,n.Pa(e,r),n.Ta(t,r)}))}))},t.prototype.ya=function(t,e){return this.ga(t,e)},t.prototype.Va=function(t,e){var n=this;return this.pa(t,e.targetId).next((function(){return rs(t).delete(e.targetId)})).next((function(){return n.ma(t)})).next((function(e){return w(e.targetCount>0),e.targetCount-=1,n.Ta(t,e)}))},t.prototype.po=function(t,e,n){var r=this,i=0,s=[];return rs(t).rs((function(o,a){var u=_i(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.Va(t,u)))})).next((function(){return pr.$n(s)})).next((function(){return i}))},t.prototype.Ce=function(t,e){return rs(t).rs((function(t,n){var r=_i(n);e(r)}))},t.prototype.ma=function(t){return is(t).get(Ki.key).next((function(t){return w(null!==t),t}))},t.prototype.Ta=function(t,e){return is(t).put(Ki.key,e)},t.prototype.ga=function(t,e){return rs(t).put(bi(this.serializer,e))},t.prototype.Pa=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.ba=function(t){return this.ma(t).next((function(t){return t.targetCount}))},t.prototype.va=function(t,e){var n=pt(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return rs(t).rs({range:r,index:$i.queryTargetsIndexName},(function(t,n,r){var s=_i(n);mt(e,s.target)&&(i=s,r.done())})).next((function(){return i}))},t.prototype.Sa=function(t,e,n){var r=this,i=[],s=ss(t);return e.forEach((function(e){var o=ui(e.path);i.push(s.put(new Wi(n,o))),i.push(r.No.Da(t,n,e))})),pr.$n(i)},t.prototype.Ca=function(t,e,n){var r=this,i=ss(t);return pr.forEach(e,(function(e){var s=ui(e.path);return pr.$n([i.delete([n,s]),r.No.Na(t,n,e)])}))},t.prototype.pa=function(t,e){var n=ss(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Fa=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ss(t),i=Lt();return r.rs({range:n,ss:!0},(function(t,e,n){var r=hi(t[1]),s=new x(r);i=i.add(s)})).next((function(){return i}))},t.prototype.Ho=function(t,e){var n=ui(e.path),r=IDBKeyRange.bound([n],[J(n)],!1,!0),i=0;return ss(t).rs({index:Wi.documentTargetsIndex,ss:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ue=function(t,e){return rs(t).get(e).next((function(t){return t?_i(t):null}))},t}();function rs(t){return us.Qn(t,$i.store)}function is(t){return us.Qn(t,Ki.store)}function ss(t){return us.Qn(t,Wi.store)}var os="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",as=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jo=e,r.xa=n,r}return r.__extends(e,t),e}(Zr),us=function(){function t(e,n,r,i,s,o,a,u,c,d){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.fn=s,this.window=o,this.document=a,this.$a=c,this.ka=d,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(t){return Promise.resolve()},!t.Ln())throw new h(l.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new hs(this,i),this.Wa=n+"main",this.serializer=new di(u),this.ja=new mr(this.Wa,10,new Fi(this.serializer)),this.Ka=new ns(this.No,this.serializer),this.Dr=new Zi,this.vr=function(t,e){return new xi(t,e)}(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===d&&m("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Qn=function(t,e){if(t instanceof as)return mr.Qn(t.jo,e);throw v()},t.prototype.start=function(){var t=this;return this.za().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new h(l.FAILED_PRECONDITION,os);return t.Ha(),t.Ya(),t.Ja(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Ka.Ia(e)}))})).then((function(e){t.Ma=new Vr(e,t.$a)})).then((function(){t.Oa=!0})).catch((function(e){return t.ja&&t.ja.close(),Promise.reject(e)}))},t.prototype.Xa=function(t){var e=this;return this.Qa=function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.Ei?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Za=function(t){var e=this;this.ja.Kn((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.tc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.za=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return ls(e).put(new Xi(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.ec(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.Qa(!1)})))}))})).next((function(){return t.nc(e)})).next((function(n){return t.isPrimary&&!n?t.sc(e).next((function(){return!1})):!!n&&t.ic(e).next((function(){return!0}))}))})).catch((function(e){if(vr(e))return p("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return p("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.Qa(e)})),t.isPrimary=e}))},t.prototype.ec=function(t){var e=this;return cs(t).get(Vi.key).next((function(t){return pr.resolve(e.rc(t))}))},t.prototype.oc=function(t){return ls(t).delete(this.clientId)},t.prototype.ac=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,s=this;return r.__generator(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Qn(e,Xi.store);return n.ts().next((function(t){var e=s.uc(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return pr.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.Ga)for(n=0,i=e;n<i.length;n++)this.Ga.removeItem(this.hc(i[n].clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.Ja=function(){var t=this;this.qa=this.fn.yn("client_metadata_refresh",4e3,(function(){return t.za().then((function(){return t.ac()})).then((function(){return t.Ja()}))}))},t.prototype.rc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.nc=function(t){var e=this;return this.ka?pr.resolve(!0):cs(t).get(Vi.key).next((function(n){if(null!==n&&e.cc(n.leaseTimestampMs,5e3)&&!e.lc(n.ownerId)){if(e.rc(n)&&e.networkEnabled)return!0;if(!e.rc(n)){if(!n.allowTabSynchronization)throw new h(l.FAILED_PRECONDITION,os);return!1}}return!(!e.networkEnabled||!e.inForeground)||ls(t).ts().next((function(t){return void 0===e.uc(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&p("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Di=function(){return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(e){switch(e.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction("shutdown","readwrite",[Vi.store,Xi.store],(function(e){var n=new as(e,Vr.ai);return t.sc(n).next((function(){return t.oc(n)}))}))];case 1:return e.sent(),this.ja.close(),this.wc(),[2]}}))}))},t.prototype.uc=function(t,e){var n=this;return t.filter((function(t){return n.cc(t.updateTimeMs,e)&&!n.lc(t.clientId)}))},t.prototype.pi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return ls(e).ts().next((function(e){return t.uc(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),t.prototype.mc=function(t){return Ei.xo(t,this.serializer,this.Dr,this.No)},t.prototype.Tc=function(){return this.Ka},t.prototype.Ec=function(){return this.vr},t.prototype.Ic=function(){return this.Dr},t.prototype.runTransaction=function(t,e,n){var r,i=this;return p("IndexedDbPersistence","Starting transaction:",t),this.ja.runTransaction(t,"readonly"===e?"readonly":"readwrite",Ji,(function(s){return r=new as(s,i.Ma?i.Ma.next():Vr.ai),"readwrite-primary"===e?i.ec(r).next((function(t){return!!t||i.nc(r)})).next((function(e){if(!e)throw m("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.fn.Cs((function(){return i.Qa(!1)})),new h(l.FAILED_PRECONDITION,Jr);return n(r)})).next((function(t){return i.ic(r).next((function(){return t}))})):i.Ac(r).next((function(){return n(r)}))})).then((function(t){return r.br(),t}))},t.prototype.Ac=function(t){var e=this;return cs(t).get(Vi.key).next((function(t){if(null!==t&&e.cc(t.leaseTimestampMs,5e3)&&!e.lc(t.ownerId)&&!e.rc(t)&&!(e.ka||e.allowTabSynchronization&&t.allowTabSynchronization))throw new h(l.FAILED_PRECONDITION,os)}))},t.prototype.ic=function(t){var e=new Vi(this.clientId,this.allowTabSynchronization,Date.now());return cs(t).put(Vi.key,e)},t.Ln=function(){return mr.Ln()},t.prototype.sc=function(t){var e=this,n=cs(t);return n.get(Vi.key).next((function(t){return e.rc(t)?(p("IndexedDbPersistence","Releasing primary lease."),n.delete(Vi.key)):pr.resolve()}))},t.prototype.cc=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(m("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.za()}))},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},t.prototype.fc=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},t.prototype.Ya=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e._c(),e.fn.ws((function(){return e.Di()}))},this.window.addEventListener("unload",this.La))},t.prototype.dc=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},t.prototype.lc=function(t){var e;try{var n=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.hc(t)));return p("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return m("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(r){m("Failed to set zombie client id.",r)}},t.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch(r){}},t.prototype.hc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function cs(t){return us.Qn(t,Vi.store)}function ls(t){return us.Qn(t,Xi.store)}var hs=function(){function t(t,e){this.db=t,this.wo=new ai(this,e)}return t.prototype.Po=function(t){var e=this.Rc(t);return this.db.Tc().ba(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Rc=function(t){var e=0;return this.Vo(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Tc().Ce(t,e)},t.prototype.Vo=function(t,e){return this.gc(t,(function(t,n){return e(n)}))},t.prototype.Da=function(t,e,n){return ds(t,n)},t.prototype.Na=function(t,e,n){return ds(t,n)},t.prototype.po=function(t,e,n){return this.db.Tc().po(t,e,n)},t.prototype.Go=function(t,e){return ds(t,e)},t.prototype.Pc=function(t,e){return function(t,e){var n=!1;return Ai(t).os((function(r){return Si(t,r,e).next((function(t){return t&&(n=!0),pr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.bo=function(t,e){var n=this,r=this.db.Ec().ra(),i=[],s=0;return this.gc(t,(function(o,a){if(a<=e){var u=n.Pc(t,o).next((function(e){if(!e)return s++,r.Rr(t,o).next((function(){return r.Ar(o),ss(t).delete([0,ui(o.path)])}))}));i.push(u)}})).next((function(){return pr.$n(i)})).next((function(){return r.apply(t)})).next((function(){return s}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.xa);return this.db.Tc().ya(t,n)},t.prototype.yc=function(t,e){return ds(t,e)},t.prototype.gc=function(t,e){var n,r=ss(t),i=Vr.ai;return r.rs({index:Wi.documentTargetsIndex},(function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==Vr.ai&&e(new x(hi(n)),i),i=o,n=s):i=Vr.ai})).next((function(){i!==Vr.ai&&e(new x(hi(n)),i)}))},t.prototype.So=function(t){return this.db.Ec().aa(t)},t}();function ds(t,e){return ss(t).put(function(t,e){return new Wi(0,ui(t.path),e)}(e,t.xa))}function fs(t,e){var n=t.projectId;return t.j||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var ps=function(){function t(t,e,n){this.persistence=t,this.Vc=e,this.bc=new St(Y),this.vc=new ot((function(t){return pt(t)}),mt),this.Sc=ut.min(),this.Sr=t.mc(n),this.Dc=t.Ec(),this.Ka=t.Tc(),this.Cc=new ti(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}return t.prototype.Io=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.vo(n,e.bc)}))},t}();function ms(t,e){var n=_(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Dc.ra({oa:!0});return function(t,e,n,r){var i=n.batch,s=i.keys(),o=pr.resolve();return s.forEach((function(t){o=o.next((function(){return r.Rr(e,t)})).next((function(e){var s=e,o=n.dr.get(t);w(null!==o),(!s||s.version.L(o)<0)&&(s=i.cr(t,s,n))&&r.Er(s,n._r)}))})),o.next((function(){return t.Sr.Wo(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Cc.kr(t,r)}))}))}function gs(t){var e=_(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Ka.Ea(t)}))}function ys(t,e){var n=_(t),r=e.nt,i=n.bc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var s=n.Dc.ra({oa:!0});i=n.bc;var o=[];e.zt.forEach((function(e,s){var a=i.get(s);if(a){o.push(n.Ka.Ca(t,e.se,s).next((function(){return n.Ka.Sa(t,e.ee,s)})));var u=e.resumeToken;if(u.O()>0){var c=a.it(u,r).st(t.xa);i=i.ot(s,c),function(t,e,n){return w(e.resumeToken.O()>0),0===t.resumeToken.O()||e.nt.X()-t.nt.X()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(a,c,e)&&o.push(n.Ka.ya(t,c))}}}));var a=kt(),u=Lt();if(e.Yt.forEach((function(t,e){u=u.add(t)})),o.push(s.getEntries(t,u).next((function(i){e.Yt.forEach((function(u,c){var l=i.get(u);c instanceof Dn&&c.version.isEqual(ut.min())?(s.Ar(u,r),a=a.ot(u,c)):null==l||c.version.L(l.version)>0||0===c.version.L(l.version)&&l.hasPendingWrites?(s.Er(c,r),a=a.ot(u,c)):p("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.Jt.has(u)&&o.push(n.persistence.No.yc(t,u))}))}))),!r.isEqual(ut.min())){var c=n.Ka.Ea(t).next((function(e){return n.Ka.Aa(t,t.xa,r)}));o.push(c)}return pr.$n(o).next((function(){return s.apply(t)})).next((function(){return n.Cc.Mr(t,a)}))})).then((function(t){return n.bc=i,t}))}function vs(t,e){var n=_(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Sr.Bo(t,e)}))}function ws(t,e){var n=_(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Ka.va(t,e).next((function(i){return i?pr.resolve(r=i):n.Ka.wa(t).next((function(i){return r=new wt(e,i,0,t.xa),n.Ka.Ra(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.bc.get(t.targetId);return(null===r||t.nt.L(r.nt)>0)&&(n.bc=n.bc.ot(t.targetId,t),n.vc.set(e,t.targetId)),t}))}function _s(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,s,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:i=_(t),s=i.bc.get(e),o=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",o,(function(t){return i.persistence.No.removeTarget(t,s)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!vr(a=r.sent()))throw a;return p("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return i.bc=i.bc.remove(e),i.vc.delete(s.target),[2]}}))}))}function bs(t,e,n){var r=_(t),i=ut.min(),s=Lt();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=_(t),i=r.vc.get(n);return void 0!==i?pr.resolve(r.bc.get(i)):r.Ka.va(e,n)}(r,t,qn(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ka.Fa(t,e.targetId).next((function(t){s=t}))})).next((function(){return r.Vc.Lr(t,e,n?i:ut.min(),n?s:Lt())})).next((function(t){return{documents:t,Fc:s}}))}))}function Es(t,e){var n=_(t),r=_(n.Ka),i=n.bc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ue(t,e).next((function(t){return t?t.target:null}))}))}function Ss(t){var e=_(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=_(t),i=kt(),s=mi(n),o=Ni(e),a=IDBKeyRange.lowerBound(s,!0);return o.rs({index:Hi.readTimeIndex,range:a},(function(t,e){var n=fi(r.serializer,e);i=i.ot(n.key,n),s=e.readTime})).next((function(){return{xc:i,readTime:gi(s)}}))}(e.Dc,t,e.Sc)})).then((function(t){var n=t.xc;return e.Sc=t.readTime,n}))}function Ts(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){return[2,(e=_(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Ni(t),n=ut.min();return e.rs({index:Hi.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=gi(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Sc=t}))]}))}))}function Is(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){if(t.code!==l.FAILED_PRECONDITION||t.message!==Jr)throw t;return p("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Cs=function(){function t(){this.$c=new Ct(As.kc),this.Mc=new Ct(As.Oc)}return t.prototype.m=function(){return this.$c.m()},t.prototype.Da=function(t,e){var n=new As(t,e);this.$c=this.$c.add(n),this.Mc=this.Mc.add(n)},t.prototype.Lc=function(t,e){var n=this;t.forEach((function(t){return n.Da(t,e)}))},t.prototype.Na=function(t,e){this.Bc(new As(t,e))},t.prototype.qc=function(t,e){var n=this;t.forEach((function(t){return n.Na(t,e)}))},t.prototype.Uc=function(t){var e=this,n=new x(new I([])),r=new As(n,t),i=new As(n,t+1),s=[];return this.Mc.Ft([r,i],(function(t){e.Bc(t),s.push(t.key)})),s},t.prototype.Qc=function(){var t=this;this.$c.forEach((function(e){return t.Bc(e)}))},t.prototype.Bc=function(t){this.$c=this.$c.delete(t),this.Mc=this.Mc.delete(t)},t.prototype.Wc=function(t){var e=new x(new I([])),n=new As(e,t),r=new As(e,t+1),i=Lt();return this.Mc.Ft([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ho=function(t){var e=new As(t,0),n=this.$c.$t(e);return null!==n&&t.isEqual(n.key)},t}(),As=function(){function t(t,e){this.key=t,this.jc=e}return t.kc=function(t,e){return x.i(t.key,e.key)||Y(t.jc,e.jc)},t.Oc=function(t,e){return Y(t.jc,e.jc)||x.i(t.key,e.key)},t}(),xs=function(t,e){this.user=e,this.type="OAuth",this.Kc={},this.Kc.Authorization="Bearer "+t},ks=function(){function t(){this.Gc=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.zc=function(){},t.prototype.Hc=function(t){this.Gc=t,t(Mr.UNAUTHENTICATED)},t.prototype.Yc=function(){this.Gc=null},t}(),Ds=function(){function t(t){var e=this;this.Jc=null,this.currentUser=Mr.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){e.Zc++,e.currentUser=e.tu(),e.Xc=!0,e.Gc&&e.Gc(e.currentUser)},this.Zc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),t.get().then((function(t){e.auth=t,e.Jc&&e.auth.addAuthTokenListener(e.Jc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Zc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Zc!==e?(p("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(w("string"==typeof n.accessToken),new xs(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.zc=function(){this.forceRefresh=!0},t.prototype.Hc=function(t){this.Gc=t,this.Xc&&t(this.currentUser)},t.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},t.prototype.tu=function(){var t=this.auth&&this.auth.getUid();return w(null===t||"string"==typeof t),new Mr(t)},t}(),Ns=function(){function t(t,e){this.eu=t,this.nu=e,this.type="FirstParty",this.user=Mr.ni}return Object.defineProperty(t.prototype,"Kc",{get:function(){var t={"X-Goog-AuthUser":this.nu},e=this.eu.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Rs=function(){function t(t,e){this.eu=t,this.nu=e}return t.prototype.getToken=function(){return Promise.resolve(new Ns(this.eu,this.nu))},t.prototype.Hc=function(t){t(Mr.ni)},t.prototype.Yc=function(){},t.prototype.zc=function(){},t}(),Os=function(){function t(t,e,n,r,i,s){this.fn=t,this.su=n,this.iu=r,this.ru=i,this.listener=s,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new fr(t,e)}return t.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.uu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.hu()},t.prototype.stop=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.lu=function(){this.state=0,this.ys.reset()},t.prototype._u=function(){var t=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,(function(){return t.fu()})))},t.prototype.du=function(t){this.wu(),this.stream.send(t)},t.prototype.fu=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.uu()?[2,this.close(0)]:[2]}))}))},t.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},t.prototype.close=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==t?this.ys.reset():e&&e.code===l.RESOURCE_EXHAUSTED?(m(e.toString()),m("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):e&&e.code===l.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.mu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.Eu(this.ou),n=this.ou;this.ru.getToken().then((function(e){t.ou===n&&t.Iu(e)}),(function(n){e((function(){var e=new h(l.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Au(e)}))}))},t.prototype.Iu=function(t){var e=this,n=this.Eu(this.ou);this.stream=this.Ru(t),this.stream.gu((function(){n((function(){return e.state=2,e.listener.gu()}))})),this.stream.Tu((function(t){n((function(){return e.Au(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.hu=function(){var t=this;this.state=4,this.ys.gn((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Au=function(t){return p("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Eu=function(t){var e=this;return function(n){e.fn.ws((function(){return e.ou===t?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ps=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).serializer=i,o}return r.__extends(e,t),e.prototype.Ru=function(t){return this.iu.Pu("Listen",t)},e.prototype.onMessage=function(t){this.ys.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:v()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.Qe?(w(void 0===e||"string"==typeof e),Z.fromBase64String(e||"")):(w(void 0===e||e instanceof Uint8Array),Z.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){var e=void 0===t.code?l.UNKNOWN:Et(t.code);return new h(e,t.message||"")}(o);n=new Gt(r,i,s,a||null)}else if("documentChange"in e){var u=e.documentChange,c=Ae(t,u.document.name),d=Se(u.document.updateTime),f=new In({mapValue:{fields:u.document.fields}}),p=new kn(c,d,f,{});n=new zt(u.targetIds||[],u.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){var m=e.documentDelete,g=Ae(t,m.document),y=m.readTime?Se(m.readTime):ut.min(),_=new Dn(g,y);n=new zt([],m.removedTargetIds||[],_.key,_)}else if("documentRemove"in e){var b=e.documentRemove,E=Ae(t,b.document);n=new zt([],b.removedTargetIds||[],E,null)}else{if(!("filter"in e))return v();var S=e.filter,T=new _t(S.count||0);n=new Ht(S.targetId,T)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ut.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ut.min():e.readTime?Se(e.readTime):ut.min()}(t);return this.listener.yu(e,n)},e.prototype.Vu=function(t){var e={};e.database=De(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=gt(r)?{documents:Le(t,r)}:{query:Fe(t,r)}).targetId=e.targetId,e.resumeToken.O()>0&&(n.resumeToken=be(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return v()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.du(e)},e.prototype.pu=function(t){var e={};e.database=De(this.serializer),e.removeTarget=t,this.du(e)},e}(Os),Ls=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).serializer=i,o.bu=!1,o}return r.__extends(e,t),Object.defineProperty(e.prototype,"vu",{get:function(){return this.bu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mu=function(){this.bu&&this.Su([])},e.prototype.Ru=function(t){return this.iu.Pu("Write",t)},e.prototype.onMessage=function(t){if(w(!!t.streamToken),this.lastStreamToken=t.streamToken,this.bu){this.ys.reset();var e=function(t,e){return t&&t.length>0?(w(void 0!==e),t.map((function(t){return function(t,e){var n=Se(t.updateTime?t.updateTime:e);n.isEqual(ut.min())&&(n=Se(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new un(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Se(t.commitTime);return this.listener.Du(n,e)}return w(!t.writeResults||0===t.writeResults.length),this.bu=!0,this.listener.Cu()},e.prototype.Nu=function(){var t={};t.database=De(this.serializer),this.du(t)},e.prototype.Su=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Oe(e.serializer,t)}))};this.du(n)},e}(Os),Fs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.iu=n,i.serializer=r,i.Fu=!1,i}return r.__extends(e,t),e.prototype.xu=function(){if(this.Fu)throw new h(l.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.$u=function(t,e,n){var r=this;return this.xu(),this.credentials.getToken().then((function(i){return r.iu.$u(t,e,n,i)})).catch((function(t){throw t.code===l.UNAUTHENTICATED&&r.credentials.zc(),t}))},e.prototype.ku=function(t,e,n){var r=this;return this.xu(),this.credentials.getToken().then((function(i){return r.iu.ku(t,e,n,i)})).catch((function(t){throw t.code===l.UNAUTHENTICATED&&r.credentials.zc(),t}))},e.prototype.terminate=function(){this.Fu=!1},e}((function(){})),Ms=function(){function t(t,e){this.cs=t,this.di=e,this.state="Unknown",this.Mu=0,this.Ou=null,this.Lu=!0}return t.prototype.Bu=function(){var t=this;0===this.Mu&&(this.qu("Unknown"),this.Ou=this.cs.yn("online_state_timeout",1e4,(function(){return t.Ou=null,t.Uu("Backend didn't respond within 10 seconds."),t.qu("Offline"),Promise.resolve()})))},t.prototype.Qu=function(t){"Online"===this.state?this.qu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Wu(),this.Uu("Connection failed 1 times. Most recent error: "+t.toString()),this.qu("Offline")))},t.prototype.set=function(t){this.Wu(),this.Mu=0,"Online"===t&&(this.Lu=!1),this.qu(t)},t.prototype.qu=function(t){t!==this.state&&(this.state=t,this.di(t))},t.prototype.Uu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Lu?(m(e),this.Lu=!1):p("OnlineStateTracker",e)},t.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t}(),Vs=function(t,e,n,i,s){var o=this;this.ju=t,this.Ku=e,this.cs=n,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=s,this.Xu.Zu((function(t){n.ws((function(){return r.__awaiter(o,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return Ks(this)?(p("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=_(t)).Yu.add(4),[4,Us(e)];case 1:return n.sent(),e.th.set("Unknown"),e.Yu.delete(4),[4,js(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.th=new Ms(n,i)};function js(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:if(!Ks(t))return[3,4];e=0,n=t.Ju,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Us(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:e=0,n=t.Ju,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function qs(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return e=_(t),p("RemoteStore","RemoteStore shutting down."),e.Yu.add(5),[4,Us(e)];case 1:return n.sent(),e.Xu.Di(),e.th.set("Unknown"),[2]}}))}))}function Bs(t,e){var n=_(t);n.Hu.has(e.targetId)||(n.Hu.set(e.targetId,e),Ws(n)?$s(n):co(n).uu()&&Hs(n,e))}function zs(t,e){var n=_(t),r=co(n);n.Hu.delete(e),r.uu()&&Gs(n,e),0===n.Hu.size&&(r.uu()?r._u():Ks(n)&&n.th.set("Unknown"))}function Hs(t,e){t.eh.Ie(e.targetId),co(t).Vu(e)}function Gs(t,e){t.eh.Ie(e),co(t).pu(e)}function $s(t){t.eh=new Wt({qe:function(e){return t.Gu.qe(e)},Ue:function(e){return t.Hu.get(e)||null}}),co(t).start(),t.th.Bu()}function Ws(t){return Ks(t)&&!co(t).cu()&&t.Hu.size>0}function Ks(t){return 0===_(t).Yu.size}function Qs(t){t.eh=void 0}function Ys(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t.Hu.forEach((function(e,n){Hs(t,e)})),[2]}))}))}function Xs(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){return Qs(t),Ws(t)?(t.th.Qu(e),$s(t)):t.th.set("Unknown"),[2]}))}))}function Js(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,s,o;return r.__generator(this,(function(a){switch(a.label){case 0:if(t.th.set("Online"),!(e instanceof Gt&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,o;return r.__generator(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,s=e.targetIds,r.label=1;case 1:return i<s.length?t.Hu.has(o=s[i])?[4,t.Gu.nh(o,n)]:[3,3]:[3,5];case 2:r.sent(),t.Hu.delete(o),t.eh.removeTarget(o),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return i=a.sent(),p("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,Zs(t,i)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof zt?t.eh.be(e):e instanceof Ht?t.eh.$e(e):t.eh.De(e),n.isEqual(ut.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,gs(t.ju)];case 8:return s=a.sent(),n.L(s)>=0?[4,function(t,e){var n=t.eh.Oe(e);return n.zt.forEach((function(n,r){if(n.resumeToken.O()>0){var i=t.Hu.get(r);i&&t.Hu.set(r,i.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Hu.get(e);if(n){t.Hu.set(e,n.it(Z.B,n.nt)),Gs(t,e);var r=new wt(n.target,e,1,n.sequenceNumber);Hs(t,r)}})),t.Gu.sh(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return p("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Zs(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Zs(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i=this;return r.__generator(this,(function(s){switch(s.label){case 0:if(!vr(e))throw e;return t.Yu.add(1),[4,Us(t)];case 1:return s.sent(),t.th.set("Offline"),n||(n=function(){return gs(t.ju)}),t.cs.Cs((function(){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return p("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Yu.delete(1),[4,js(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function to(t,e){return e().catch((function(n){return Zs(t,n,e)}))}function eo(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,s,o;return r.__generator(this,(function(r){switch(r.label){case 0:e=_(t),n=lo(e),i=e.zu.length>0?e.zu[e.zu.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return Ks(t)&&t.zu.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,vs(e.ju,i)];case 3:return null===(s=r.sent())?(0===e.zu.length&&n._u(),[3,7]):(i=s.batchId,function(t,e){t.zu.push(e);var n=lo(t);n.uu()&&n.vu&&n.Su(e.mutations)}(e,s),[3,6]);case 4:return o=r.sent(),[4,Zs(e,o)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return no(e)&&ro(e),[2]}}))}))}function no(t){return Ks(t)&&!lo(t).cu()&&t.zu.length>0}function ro(t){lo(t).start()}function io(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return lo(t).Nu(),[2]}))}))}function so(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i;return r.__generator(this,(function(r){for(e=lo(t),n=0,i=t.zu;n<i.length;n++)e.Su(i[n].mutations);return[2]}))}))}function oo(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,s;return r.__generator(this,(function(r){switch(r.label){case 0:return i=t.zu.shift(),s=Yr.from(i,e,n),[4,to(t,(function(){return t.Gu.ih(s)}))];case 1:return r.sent(),[4,eo(t)];case 2:return r.sent(),[2]}}))}))}function ao(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return e&&lo(t).vu?[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return bt(i=e.code)&&i!==l.ABORTED?(n=t.zu.shift(),lo(t).lu(),[4,to(t,(function(){return t.Gu.rh(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,eo(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return no(t)&&ro(t),[2]}}))}))}function uo(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),e?(n.Yu.delete(2),[4,js(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Yu.add(2),[4,Us(n)]);case 3:r.sent(),n.th.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function co(t){var e=this;return t.oh||(t.oh=function(t,e,n){var r=_(t);return r.xu(),new Ps(e,r.iu,r.credentials,r.serializer,n)}(t.Ku,t.cs,{gu:Ys.bind(null,t),Tu:Xs.bind(null,t),yu:Js.bind(null,t)}),t.Ju.push((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return n?(t.oh.lu(),Ws(t)?$s(t):t.th.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.oh.stop()];case 2:e.sent(),Qs(t),e.label=3;case 3:return[2]}}))}))}))),t.oh}function lo(t){var e=this;return t.ah||(t.ah=function(t,e,n){var r=_(t);return r.xu(),new Ls(e,r.iu,r.credentials,r.serializer,n)}(t.Ku,t.cs,{gu:io.bind(null,t),Tu:ao.bind(null,t),Cu:so.bind(null,t),Du:oo.bind(null,t)}),t.Ju.push((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return n?(t.ah.lu(),[4,eo(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.ah.stop()];case 3:e.sent(),t.zu.length>0&&(p("RemoteStore","Stopping write stream with "+t.zu.length+" pending writes"),t.zu=[]),e.label=4;case 4:return[2]}}))}))}))),t.ah}var ho=function(t){this.key=t},fo=function(t){this.key=t},po=function(){function t(t,e){this.query=t,this.uh=e,this.hh=null,this.te=!1,this.lh=Lt(),this.Wt=Lt(),this._h=Qn(t),this.fh=new Vt(this._h)}return Object.defineProperty(t.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),t.prototype.wh=function(t,e){var n=this,r=e?e.mh:new jt,i=e?e.fh:this.fh,s=e?e.Wt:this.Wt,o=i,a=!1,u=Ln(this.query)&&i.size===this.query.limit?i.last():null,c=Fn(this.query)&&i.size===this.query.limit?i.first():null;if(t.ht((function(t,e){var l=i.get(t),h=e instanceof kn?e:null;h&&(h=Kn(n.query,h)?h:null);var d=!!l&&n.Wt.has(l.key),f=!!h&&(h.Je||n.Wt.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?d!==f&&(r.track({type:3,doc:h}),p=!0):n.Th(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n._h(h,u)>0||c&&n._h(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(o=o.add(h),s=f?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))})),Ln(this.query)||Fn(this.query))for(;o.size>this.query.limit;){var l=Ln(this.query)?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{fh:o,mh:r,Eh:a,Wt:s}},t.prototype.Th=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.yr=function(t,e,n){var r=this,i=this.fh;this.fh=t.fh,this.Wt=t.Wt;var s=t.mh.Ut();s.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v()}};return n(t)-n(e)}(t.type,e.type)||r._h(t.doc,e.doc)})),this.Ih(n);var o=e?this.Ah():[],a=0===this.lh.size&&this.te?1:0,u=a!==this.hh;return this.hh=a,0!==s.length||u?{snapshot:new Ut(this.query,t.fh,i,s,t.Wt,0===a,u,!1),Rh:o}:{Rh:o}},t.prototype.Qs=function(t){return this.te&&"Offline"===t?(this.te=!1,this.yr({fh:this.fh,mh:new jt,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},t.prototype.gh=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},t.prototype.Ih=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uh=e.uh.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uh=e.uh.delete(t)})),this.te=t.te)},t.prototype.Ah=function(){var t=this;if(!this.te)return[];var e=this.lh;this.lh=Lt(),this.fh.forEach((function(e){t.gh(e.key)&&(t.lh=t.lh.add(e.key))}));var n=[];return e.forEach((function(e){t.lh.has(e)||n.push(new fo(e))})),this.lh.forEach((function(t){e.has(t)||n.push(new ho(t))})),n},t.prototype.Ph=function(t){this.uh=t.Fc,this.lh=Lt();var e=this.wh(t.documents);return this.yr(e,!0)},t.prototype.yh=function(){return Ut.Gt(this.query,this.fh,this.Wt,0===this.hh)},t}(),mo=function(t,e,n){this.query=t,this.targetId=e,this.view=n},go=function(t){this.key=t,this.Vh=!1},yo=function(){function t(t,e,n,r,i,s){this.ju=t,this.ph=e,this.bh=n,this.Sh=r,this.currentUser=i,this.Dh=s,this.Ch={},this.Nh=new ot((function(t){return $n(t)}),Gn),this.Fh=new Map,this.xh=[],this.$h=new St(x.i),this.kh=new Map,this.Mh=new Cs,this.Oh={},this.Lh=new Map,this.Bh=es.da(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(t.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),t}();function vo(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return n=Ho(t),(s=n.Nh.get(e))?(n.Sh.Oi(s.targetId),i=s.view.yh(),[3,4]):[3,1];case 1:return[4,ws(n.ju,qn(e))];case 2:return o=r.sent(),a=n.Sh.Oi(o.targetId),[4,wo(n,e,o.targetId,"current"===a)];case 3:i=r.sent(),n.Uh&&Bs(n.ph,o),r.label=4;case 4:return[2,i]}}))}))}function wo(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var s,o,a,u,c,l;return r.__generator(this,(function(h){switch(h.label){case 0:return t.Qh=function(e,n,i){return function(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var s,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return(s=e.view.wh(n)).Eh?[4,bs(t.ju,e.query,!1).then((function(t){return e.view.wh(t.documents,s)}))]:[3,2];case 1:s=r.sent(),r.label=2;case 2:return o=i&&i.zt.get(e.targetId),a=e.view.yr(s,t.Uh,o),[2,(Do(t,e.targetId,a.Rh),a.snapshot)]}}))}))}(t,e,n,i)},[4,bs(t.ju,e,!0)];case 1:return s=h.sent(),o=new po(e,s.Fc),a=o.wh(s.documents),u=Bt.Zt(n,i&&"Offline"!==t.onlineState),c=o.yr(a,t.Uh,u),Do(t,n,c.Rh),l=new mo(e,n,o),[2,(t.Nh.set(e,l),t.Fh.has(n)?t.Fh.get(n).push(e):t.Fh.set(n,[e]),c.snapshot)]}}))}))}function _o(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=n.Nh.get(e),(s=n.Fh.get(i.targetId)).length>1?[2,(n.Fh.set(i.targetId,s.filter((function(t){return!Gn(t,e)}))),void n.Nh.delete(e))]:n.Uh?(n.Sh.Bi(i.targetId),n.Sh.Fi(i.targetId)?[3,2]:[4,_s(n.ju,i.targetId,!1).then((function(){n.Sh.Ui(i.targetId),zs(n.ph,i.targetId),xo(n,i.targetId)})).catch(Is)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return xo(n,i.targetId),[4,_s(n.ju,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function bo(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:n=_(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,ys(n.ju,e)];case 2:return i=r.sent(),e.zt.forEach((function(t,e){var r=n.kh.get(e);r&&(w(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?r.Vh=!0:t.ne.size>0?w(r.Vh):t.se.size>0&&(w(r.Vh),r.Vh=!1))})),[4,Oo(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,Is(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Eo(t,e,n){var r=_(t);if(r.Uh&&0===n||!r.Uh&&1===n){var i=[];r.Nh.forEach((function(t,n){var r=n.view.Qs(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=_(t);n.onlineState=e;var r=!1;n.Bs.forEach((function(t,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].Qs(e)&&(r=!0)})),r&&Lr(n)}(r.bh,e),i.length&&r.Ch.yu(i),r.onlineState=e,r.Uh&&r.Sh.Ki(e)}}function So(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,s,o,a,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:return(i=_(t)).Sh.Qi(e,"rejected",n),s=i.kh.get(e),(o=s&&s.key)?(a=(a=new St(x.i)).ot(o,new Dn(o,ut.min())),u=Lt().add(o),c=new qt(ut.min(),new Map,new Ct(Y),a,u),[4,bo(i,c)]):[3,2];case 1:return r.sent(),i.$h=i.$h.remove(o),i.kh.delete(e),Ro(i),[3,4];case 2:return[4,_s(i.ju,e,!1).then((function(){return xo(i,e,n)})).catch(Is)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function To(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s;return r.__generator(this,(function(r){switch(r.label){case 0:n=_(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,ms(n.ju,e)];case 2:return s=r.sent(),Ao(n,i,null),Co(n,i),n.Sh.ki(i,"acknowledged"),[4,Oo(n,s)];case 3:return r.sent(),[3,6];case 4:return[4,Is(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Io(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,s;return r.__generator(this,(function(r){switch(r.label){case 0:i=_(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=_(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Sr.Oo(t,e).next((function(e){return w(null!==e),r=e.keys(),n.Sr.Wo(t,e)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Cc.kr(t,r)}))}))}(i.ju,e)];case 2:return s=r.sent(),Ao(i,e,n),Co(i,e),i.Sh.ki(e,"rejected",n),[4,Oo(i,s)];case 3:return r.sent(),[3,6];case 4:return[4,Is(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Co(t,e){(t.Lh.get(e)||[]).forEach((function(t){t.resolve()})),t.Lh.delete(e)}function Ao(t,e,n){var r=_(t),i=r.Oh[r.currentUser.ti()];if(i){var s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Oh[r.currentUser.ti()]=i}}function xo(t,e,n){void 0===n&&(n=null),t.Sh.Bi(e);for(var r=0,i=t.Fh.get(e);r<i.length;r++){var s=i[r];t.Nh.delete(s),n&&t.Ch.Wh(s,n)}t.Fh.delete(e),t.Uh&&t.Mh.Uc(e).forEach((function(e){t.Mh.Ho(e)||ko(t,e)}))}function ko(t,e){var n=t.$h.get(e);null!==n&&(zs(t.ph,n),t.$h=t.$h.remove(e),t.kh.delete(n),Ro(t))}function Do(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof ho?(t.Mh.Da(s.key,e),No(t,s)):s instanceof fo?(p("SyncEngine","Document no longer in limbo: "+s.key),t.Mh.Na(s.key,e),t.Mh.Ho(s.key)||ko(t,s.key)):v()}}function No(t,e){var n=e.key;t.$h.get(n)||(p("SyncEngine","New document in limbo: "+n),t.xh.push(n),Ro(t))}function Ro(t){for(;t.xh.length>0&&t.$h.size<t.Dh;){var e=t.xh.shift(),n=t.Bh.next();t.kh.set(n,new go(e)),t.$h=t.$h.ot(e,n),Bs(t.ph,new wt(qn(Pn(e.path)),n,2,Vr.ai))}}function Oo(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,s,o,a;return r.__generator(this,(function(u){switch(u.label){case 0:return i=_(t),s=[],o=[],a=[],i.Nh.m()?[3,3]:(i.Nh.forEach((function(t,r){a.push(i.Qh(r,e,n).then((function(t){if(t){i.Uh&&i.Sh.Qi(r.targetId,t.fromCache?"not-current":"current"),s.push(t);var e=ei.zr(r.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),i.Ch.yu(s),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,o,a,u,c,l;return r.__generator(this,(function(r){switch(r.label){case 0:n=_(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return pr.forEach(e,(function(e){return pr.forEach(e.Kr,(function(r){return n.persistence.No.Da(t,e.targetId,r)})).next((function(){return pr.forEach(e.Gr,(function(r){return n.persistence.No.Na(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!vr(i=r.sent()))throw i;return p("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(s=0,o=e;s<o.length;s++)u=(a=o[s]).targetId,a.fromCache||(c=n.bc.get(u),l=c.rt(c.nt),n.bc=n.bc.ot(u,l));return[2]}}))}))}(i.ju,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Po(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(s){switch(s.label){case 0:return(n=_(t)).currentUser.isEqual(e)?[3,3]:(p("SyncEngine","User change. New user:",e.ti()),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=n.Sr,s=n.Cc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n.Sr.Uo(t).next((function(o){return r=o,i=n.persistence.mc(e),s=new ti(n.Dc,i,n.persistence.Ic()),i.Uo(t)})).next((function(e){for(var n=[],i=[],o=Lt(),a=0,u=r;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)o=o.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];i.push(p.batchId);for(var m=0,g=p.mutations;m<g.length;m++)o=o.add(g[m].key)}return s.kr(t,o).next((function(t){return{jh:t,Kh:n,Gh:i}}))}))}))];case 1:return o=r.sent(),[2,(n.Sr=i,n.Cc=s,n.Vc.Nc(n.Cc),o)]}}))}))}(n.ju,e)]);case 1:return i=s.sent(),n.currentUser=e,function(t,e){t.Lh.forEach((function(t){t.forEach((function(t){t.reject(new h(l.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lh.clear()}(n),n.Sh.ji(e,i.Kh,i.Gh),[4,Oo(n,i.jh)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Lo(t,e){var n=_(t),r=n.kh.get(e);if(r&&r.Vh)return Lt().add(r.key);var i=Lt(),s=n.Fh.get(e);if(!s)return i;for(var o=0,a=s;o<a.length;o++){var u=n.Nh.get(a[o]);i=i.kt(u.view.dh)}return i}function Fo(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,bs((n=_(t)).ju,e.query,!0)];case 1:return i=r.sent(),s=e.view.Ph(i),[2,(n.Uh&&Do(n,e.targetId,s.Rh),s)]}}))}))}function Mo(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var s,o;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=_(t),r=_(n.Sr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Lo(t,e).next((function(e){return e?n.Cc.kr(t,e):pr.resolve(null)}))}))}((s=_(t)).ju,e)];case 1:return null===(o=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,eo(s.ph)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ao(s,e,i||null),Co(s,e),function(t,e){_(_(t).Sr).Ko(e)}(s.ju,e)):v(),r.label=4;case 4:return[4,Oo(s,o)];case 5:return r.sent(),[3,7];case 6:p("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function Vo(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,o,a,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:return Ho(n=_(t)),Go(n),!0!==e||!0===n.qh?[3,3]:(i=n.Sh.Ci(),[4,jo(n,i.A())]);case 1:return s=r.sent(),n.qh=!0,[4,uo(n.ph,!0)];case 2:for(r.sent(),o=0,a=s;o<a.length;o++)Bs(n.ph,a[o]);return[3,7];case 3:return!1!==e||!1===n.qh?[3,7]:(u=[],c=Promise.resolve(),n.Fh.forEach((function(t,e){n.Sh.qi(e)?u.push(e):c=c.then((function(){return xo(n,e),_s(n.ju,e,!0)})),zs(n.ph,e)})),[4,c]);case 4:return r.sent(),[4,jo(n,u)];case 5:return r.sent(),function(t){var e=_(t);e.kh.forEach((function(t,n){zs(e.ph,n)})),e.Mh.Qc(),e.kh=new Map,e.$h=new St(x.i)}(n),n.qh=!1,[4,uo(n.ph,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function jo(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,o,a,u,c,l,h,d,f,p,m;return r.__generator(this,(function(r){switch(r.label){case 0:n=_(t),i=[],s=[],o=0,a=e,r.label=1;case 1:return o<a.length?(c=void 0,(l=n.Fh.get(u=a[o]))&&0!==l.length?[4,ws(n.ju,qn(l[0]))]:[3,7]):[3,13];case 2:c=r.sent(),h=0,d=l,r.label=3;case 3:return h<d.length?(f=n.Nh.get(d[h]),[4,Fo(n,f)]):[3,6];case 4:(p=r.sent()).snapshot&&s.push(p.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Es(n.ju,u)];case 8:return m=r.sent(),[4,ws(n.ju,m)];case 9:return c=r.sent(),[4,wo(n,Uo(m),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Ch.yu(s),i)]}}))}))}function Uo(t){return On(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function qo(t){var e=_(t);return _(_(e.ju).persistence).pi()}function Bo(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var s,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return(s=_(t)).qh?(p("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!s.Fh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ss(s.ju)];case 3:return o=r.sent(),a=qt.Xt(e,"current"===n),[4,Oo(s,o,a)];case 4:return r.sent(),[3,8];case 5:return[4,_s(s.ju,e,!0)];case 6:return r.sent(),xo(s,e,i),[3,8];case 7:v(),r.label=8;case 8:return[2]}}))}))}function zo(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,s,o,a,u,c,l,h,d;return r.__generator(this,(function(f){switch(f.label){case 0:if(!(i=Ho(t)).qh)return[3,10];s=0,o=e,f.label=1;case 1:return s<o.length?i.Fh.has(a=o[s])?(p("SyncEngine","Adding an already active target "+a),[3,5]):[4,Es(i.ju,a)]:[3,6];case 2:return u=f.sent(),[4,ws(i.ju,u)];case 3:return c=f.sent(),[4,wo(i,Uo(u),c.targetId,!1)];case 4:f.sent(),Bs(i.ph,c),f.label=5;case 5:return s++,[3,1];case 6:l=function(t){return r.__generator(this,(function(e){switch(e.label){case 0:return i.Fh.has(t)?[4,_s(i.ju,t,!1).then((function(){zs(i.ph,t),xo(i,t)})).catch(Is)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,d=n,f.label=7;case 7:return h<d.length?[5,l(d[h])]:[3,10];case 8:f.sent(),f.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ho(t){var e=_(t);return e.ph.Gu.sh=bo.bind(null,e),e.ph.Gu.qe=Lo.bind(null,e),e.ph.Gu.nh=So.bind(null,e),e.Ch.yu=Or.bind(null,e.bh),e.Ch.Wh=Pr.bind(null,e.bh),e}function Go(t){var e=_(t);return e.ph.Gu.ih=To.bind(null,e),e.ph.Gu.rh=Io.bind(null,e),e}var $o=function(){function t(){}return t.prototype.Nc=function(t){this.zh=t},t.prototype.Lr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.p())}(e)||n.isEqual(ut.min())?this.Hh(t,e):this.zh.kr(t,r).next((function(o){var a=i.Yh(e,o);return(Ln(e)||Fn(e))&&i.Eh(e.an,a,r,n)?i.Hh(t,e):(f()<=s.LogLevel.DEBUG&&p("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Wn(e)),i.zh.Lr(t,e,n).next((function(t){return a.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Yh=function(t,e){var n=new Ct(Qn(t));return e.forEach((function(e,r){r instanceof kn&&Kn(t,r)&&(n=n.add(r))})),n},t.prototype.Eh=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.L(r)>0)},t.prototype.Hh=function(t,e){return f()<=s.LogLevel.DEBUG&&p("IndexFreeQueryEngine","Using full collection scan to execute query:",Wn(e)),this.zh.Lr(t,e,ut.min())},t}(),Wo=function(){function t(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Jh=1,this.Xh=new Ct(As.kc)}return t.prototype.$o=function(t){return pr.resolve(0===this.Sr.length)},t.prototype.ko=function(t,e,n,r){var i=this.Jh;this.Jh++;var s=new Qr(i,e,n,r);this.Sr.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.Xh=this.Xh.add(new As(u.key,i)),this.Dr.Mo(t,u.key.path.h())}return pr.resolve(s)},t.prototype.Oo=function(t,e){return pr.resolve(this.Zh(e))},t.prototype.Bo=function(t,e){var n=this.tl(e+1),r=n<0?0:n;return pr.resolve(this.Sr.length>r?this.Sr[r]:null)},t.prototype.qo=function(){return pr.resolve(0===this.Sr.length?-1:this.Jh-1)},t.prototype.Uo=function(t){return pr.resolve(this.Sr.slice())},t.prototype.Nr=function(t,e){var n=this,r=new As(e,0),i=new As(e,Number.POSITIVE_INFINITY),s=[];return this.Xh.Ft([r,i],(function(t){var e=n.Zh(t.jc);s.push(e)})),pr.resolve(s)},t.prototype.Or=function(t,e){var n=this,r=new Ct(Y);return e.forEach((function(t){var e=new As(t,0),i=new As(t,Number.POSITIVE_INFINITY);n.Xh.Ft([e,i],(function(t){r=r.add(t.jc)}))})),pr.resolve(this.el(r))},t.prototype.Wr=function(t,e){var n=e.path,r=n.length+1,i=n;x.F(i)||(i=i.child(""));var s=new As(new x(i),0),o=new Ct(Y);return this.Xh.xt((function(t){var e=t.key.path;return!!n.T(e)&&(e.length===r&&(o=o.add(t.jc)),!0)}),s),pr.resolve(this.el(o))},t.prototype.el=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Zh(t);null!==r&&n.push(r)})),n},t.prototype.Wo=function(t,e){var n=this;w(0===this.nl(e.batchId,"removed")),this.Sr.shift();var r=this.Xh;return pr.forEach(e.mutations,(function(i){var s=new As(i.key,e.batchId);return r=r.delete(s),n.No.Go(t,i.key)})).next((function(){n.Xh=r}))},t.prototype.Ko=function(t){},t.prototype.Ho=function(t,e){var n=new As(e,0),r=this.Xh.$t(n);return pr.resolve(e.isEqual(r&&r.key))},t.prototype.zo=function(t){return pr.resolve()},t.prototype.nl=function(t,e){return this.tl(t)},t.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},t.prototype.Zh=function(t){var e=this.tl(t);return e<0||e>=this.Sr.length?null:this.Sr[e]},t}(),Ko=function(){function t(t,e){this.Dr=t,this.sl=e,this.docs=new St(x.i),this.size=0}return t.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.sl(e);return this.docs=this.docs.ot(r,{ta:e,size:o,readTime:n}),this.size+=o-s,this.Dr.Mo(t,r.path.h())},t.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Rr=function(t,e){var n=this.docs.get(e);return pr.resolve(n?n.ta:null)},t.prototype.getEntries=function(t,e){var n=this,r=Dt();return e.forEach((function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ta:null)})),pr.resolve(r)},t.prototype.Lr=function(t,e,n){for(var r=Rt(),i=new x(e.path.child("")),s=this.docs.ft(i);s.At();){var o=s.It(),a=o.value,u=a.ta,c=a.readTime;if(!e.path.T(o.key.path))break;c.L(n)<=0||u instanceof kn&&Kn(e,u)&&(r=r.ot(u.key,u))}return pr.resolve(r)},t.prototype.il=function(t,e){return pr.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ra=function(t){return new Qo(this)},t.prototype.aa=function(t){return pr.resolve(this.size)},t}(),Qo=function(t){function e(e){var n=this;return(n=t.call(this)||this).ca=e,n}return r.__extends(e,t),e.prototype.yr=function(t){var e=this,n=[];return this.wr.forEach((function(r,i){i?n.push(e.ca.Er(t,i,e.readTime)):e.ca.Ar(r)})),pr.$n(n)},e.prototype.gr=function(t,e){return this.ca.Rr(t,e)},e.prototype.Pr=function(t,e){return this.ca.getEntries(t,e)},e}(Xr),Yo=function(){function t(t){this.persistence=t,this.rl=new ot((function(t){return pt(t)}),mt),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.ol=0,this.al=new Cs,this.targetCount=0,this.cl=es.fa()}return t.prototype.Ce=function(t,e){return this.rl.forEach((function(t,n){return e(n)})),pr.resolve()},t.prototype.Ea=function(t){return pr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ia=function(t){return pr.resolve(this.ol)},t.prototype.wa=function(t){return this.highestTargetId=this.cl.next(),pr.resolve(this.highestTargetId)},t.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),pr.resolve()},t.prototype.ga=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.cl=new es(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},t.prototype.Ra=function(t,e){return this.ga(e),this.targetCount+=1,pr.resolve()},t.prototype.ya=function(t,e){return this.ga(e),pr.resolve()},t.prototype.Va=function(t,e){return this.rl.delete(e.target),this.al.Uc(e.targetId),this.targetCount-=1,pr.resolve()},t.prototype.po=function(t,e,n){var r=this,i=0,s=[];return this.rl.forEach((function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.rl.delete(o),s.push(r.pa(t,a.targetId)),i++)})),pr.$n(s).next((function(){return i}))},t.prototype.ba=function(t){return pr.resolve(this.targetCount)},t.prototype.va=function(t,e){var n=this.rl.get(e)||null;return pr.resolve(n)},t.prototype.Sa=function(t,e,n){return this.al.Lc(e,n),pr.resolve()},t.prototype.Ca=function(t,e,n){this.al.qc(e,n);var r=this.persistence.No,i=[];return r&&e.forEach((function(e){i.push(r.Go(t,e))})),pr.$n(i)},t.prototype.pa=function(t,e){return this.al.Uc(e),pr.resolve()},t.prototype.Fa=function(t,e){var n=this.al.Wc(e);return pr.resolve(n)},t.prototype.Ho=function(t,e){return pr.resolve(this.al.Ho(e))},t}(),Xo=function(){function t(t){var e=this;this.ul={},this.Ma=new Vr(0),this.Oa=!1,this.Oa=!0,this.No=t(this),this.Ka=new Yo(this),this.Dr=new Pi,this.vr=function(t,n){return new Ko(t,(function(t){return e.No.hl(t)}))}(this.Dr)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Di=function(){return this.Oa=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),t.prototype.Za=function(){},t.prototype.tc=function(){},t.prototype.Ic=function(){return this.Dr},t.prototype.mc=function(t){var e=this.ul[t.ti()];return e||(e=new Wo(this.Dr,this.No),this.ul[t.ti()]=e),e},t.prototype.Tc=function(){return this.Ka},t.prototype.Ec=function(){return this.vr},t.prototype.runTransaction=function(t,e,n){var r=this;p("MemoryPersistence","Starting transaction:",t);var i=new Jo(this.Ma.next());return this.No.ll(),n(i).next((function(t){return r.No._l(i).next((function(){return t}))})).Fn().then((function(t){return i.br(),t}))},t.prototype.fl=function(t,e){return pr.kn(Object.values(this.ul).map((function(n){return function(){return n.Ho(t,e)}})))},t}(),Jo=function(t){function e(e){var n=this;return(n=t.call(this)||this).xa=e,n}return r.__extends(e,t),e}(Zr),Zo=function(){function t(t){this.persistence=t,this.dl=new Cs,this.wl=null}return t.ml=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw v()},enumerable:!1,configurable:!0}),t.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),pr.resolve()},t.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),pr.resolve()},t.prototype.Go=function(t,e){return this.Tl.add(e.toString()),pr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.dl.Uc(e.targetId).forEach((function(t){return n.Tl.add(t.toString())}));var r=this.persistence.Tc();return r.Fa(t,e.targetId).next((function(t){t.forEach((function(t){return n.Tl.add(t.toString())}))})).next((function(){return r.Va(t,e)}))},t.prototype.ll=function(){this.wl=new Set},t.prototype._l=function(t){var e=this,n=this.persistence.Ec().ra();return pr.forEach(this.Tl,(function(r){var i=x.D(r);return e.El(t,i).next((function(t){t||n.Ar(i)}))})).next((function(){return e.wl=null,n.apply(t)}))},t.prototype.yc=function(t,e){var n=this;return this.El(t,e).next((function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())}))},t.prototype.hl=function(t){return 0},t.prototype.El=function(t,e){var n=this;return pr.kn([function(){return pr.resolve(n.dl.Ho(e))},function(){return n.persistence.Tc().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},t}(),ta=function(){function t(t){this.Il=t.Il,this.Al=t.Al}return t.prototype.gu=function(t){this.Rl=t},t.prototype.Tu=function(t){this.gl=t},t.prototype.onMessage=function(t){this.Pl=t},t.prototype.close=function(){this.Al()},t.prototype.send=function(t){this.Il(t)},t.prototype.yl=function(){this.Rl()},t.prototype.Vl=function(t){this.gl(t)},t.prototype.pl=function(t){this.Pl(t)},t}(),ea={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},na=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.W=e.W,n}return r.__extends(e,t),e.prototype.Nl=function(t,e,n,r){return new Promise((function(i,s){var o=new a.XhrIo;o.listenOnce(a.EventType.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case a.ErrorCode.NO_ERROR:var e=o.getResponseJson();p("Connection","XHR received:",JSON.stringify(e)),i(e);break;case a.ErrorCode.TIMEOUT:p("Connection",'RPC "'+t+'" timed out'),s(new h(l.DEADLINE_EXCEEDED,"Request time out"));break;case a.ErrorCode.HTTP_ERROR:var n=o.getStatus();if(p("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(l).indexOf(e)>=0?e:l.UNKNOWN}(r.status);s(new h(u,r.message))}else s(new h(l.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new h(l.UNAVAILABLE,"Connection failed."));break;default:v()}}finally{p("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);o.send(e,"POST",u,n,15)}))},e.prototype.Pu=function(t,e){var n=[this.vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=a.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(i.initMessageHeaders,e),o.isMobileCordova()||o.isReactNative()||o.isElectron()||o.isIE()||o.isUWP()||o.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");p("Connection","Creating WebChannel: "+s,i);var u=r.createWebChannel(s,i),c=!1,d=!1,f=new ta({Il:function(t){d?p("Connection","Not sending because WebChannel is closed:",t):(c||(p("Connection","Opening WebChannel transport."),u.open(),c=!0),p("Connection","WebChannel sending:",t),u.send(t))},Al:function(){return u.close()}}),m=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return m(a.WebChannel.EventType.OPEN,(function(){d||p("Connection","WebChannel transport opened.")})),m(a.WebChannel.EventType.CLOSE,(function(){d||(d=!0,p("Connection","WebChannel transport closed"),f.Vl())})),m(a.WebChannel.EventType.ERROR,(function(t){d||(d=!0,g("Connection","WebChannel transport errored:",t),f.Vl(new h(l.UNAVAILABLE,"The operation could not be completed")))})),m(a.WebChannel.EventType.MESSAGE,(function(t){var e;if(!d){var n=t.data[0];w(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){p("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=yt[t];if(void 0!==e)return Et(e)}(i),o=r.message;void 0===s&&(s=l.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),d=!0,f.Vl(new h(s,o)),u.close()}else p("Connection","WebChannel received:",n),f.pl(n)}})),setTimeout((function(){f.yl()}),0),f},e}(function(){function t(t){this.bl=t,this.U=t.U,this.vl=(t.ssl?"https":"http")+"://"+t.host,this.Sl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return t.prototype.$u=function(t,e,n,r){var i=this.Dl(t,e);p("RestConnection","Sending: ",i,n);var s={};return this.Cl(s,r),this.Nl(t,i,s,n).then((function(t){return p("RestConnection","Received: ",t),t}),(function(e){throw g("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.ku=function(t,e,n,r){return this.$u(t,e,n,r)},t.prototype.Cl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.24.0",t["Content-Type"]="text/plain",e)for(var n in e.Kc)e.Kc.hasOwnProperty(n)&&(t[n]=e.Kc[n])},t.prototype.Dl=function(t,e){return this.vl+"/v1/"+e+":"+ea[t]},t}()),ra=function(){function t(){var t=this;this.Fl=function(){return t.xl()},this.$l=function(){return t.kl()},this.Ml=[],this.Ol()}return t.prototype.Zu=function(t){this.Ml.push(t)},t.prototype.Di=function(){window.removeEventListener("online",this.Fl),window.removeEventListener("offline",this.$l)},t.prototype.Ol=function(){window.addEventListener("online",this.Fl),window.addEventListener("offline",this.$l)},t.prototype.xl=function(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},t.prototype.kl=function(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ia=function(){function t(){}return t.prototype.Zu=function(t){},t.prototype.Di=function(){},t}();function sa(t){return new ge(t,!0)}var oa="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",aa=function(){function t(){}return t.prototype.initialize=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.Sh=this.Ll(t),this.persistence=this.Bl(t),[4,this.persistence.start()];case 1:return e.sent(),this.ql=this.Ul(t),this.ju=this.Ql(t),[2]}}))}))},t.prototype.Ul=function(t){return null},t.prototype.Ql=function(t){return e=this.persistence,n=new $o,new ps(e,n,t.Wl);var e,n},t.prototype.Bl=function(t){if(t.persistenceSettings.jl)throw new h(l.FAILED_PRECONDITION,oa);return new Xo(Zo.ml)},t.prototype.Ll=function(t){return new Kr},t.prototype.terminate=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}}))}))},t.prototype.clearPersistence=function(t,e){throw new h(l.FAILED_PRECONDITION,oa)},t}(),ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(s){switch(s.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return s.sent(),n=this.Kl.fi,this.Sh instanceof Wr?(this.Sh.fi={er:Mo.bind(null,n),nr:Bo.bind(null,n),sr:zo.bind(null,n),pi:qo.bind(null,n)},[4,this.Sh.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.Xa((function(t){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,Vo(this.Kl.fi,t)];case 1:return e.sent(),this.ql&&(t&&!this.ql.Ei?this.ql.start(this.ju):t||this.ql.stop()),[2]}}))}))}))];case 4:return s.sent(),[2]}}))}))},e.prototype.Ll=function(t){if(t.persistenceSettings.jl&&t.persistenceSettings.synchronizeTabs){var e=Tr();if(!Wr.Ln(e))throw new h(l.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=fs(t.bl.U,t.bl.persistenceKey);return new Wr(e,t.cs,n,t.clientId,t.Wl)}return new Kr},e}(function(t){function e(e){var n=this;return(n=t.call(this)||this).Kl=e,n}return r.__extends(e,t),e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ts(this.ju)];case 2:return n.sent(),[4,this.Kl.initialize(this,e)];case 3:return n.sent(),[4,Go(this.Kl.fi)];case 4:return n.sent(),[4,eo(this.Kl.ph)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ul=function(t){return new oi(this.persistence.No.wo,t.cs)},e.prototype.Bl=function(t){var e=fs(t.bl.U,t.bl.persistenceKey),n=sa(t.bl.U);return new us(t.persistenceSettings.synchronizeTabs,e,t.clientId,si.ao(t.persistenceSettings.cacheSizeBytes),t.cs,Tr(),Ir(),n,this.Sh,t.persistenceSettings.ka)},e.prototype.Ll=function(t){return new Kr},e.prototype.clearPersistence=function(t,e){return function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return mr.Ln()?[4,mr.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(fs(t,e))},e}(aa)),ca=function(){function t(){}return t.prototype.initialize=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.ju?[3,2]:(this.ju=t.ju,this.Sh=t.Sh,this.Ku=this.Gl(e),this.ph=this.zl(e),this.bh=this.Hl(e),this.fi=this.Yl(e),this.Sh.di=function(t){return Eo(n.fi,t,1)},this.ph.Gu.Jl=Po.bind(null,this.fi),[4,uo(this.ph,this.fi.Uh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.Hl=function(t){return new Dr},t.prototype.Gl=function(t){var e=sa(t.bl.U),n=new na(t.bl);return function(t,e,n){return new Fs(t,e,n)}(t.credentials,n,e)},t.prototype.zl=function(t){var e,n,r,i,s,o=this;return e=this.ju,n=this.Ku,r=t.cs,i=function(t){return Eo(o.fi,t,0)},s=ra.Ln()?new ra:new ia,new Vs(e,n,r,i,s)},t.prototype.Yl=function(t){return function(t,e,n,r,i,s,o){var a=new yo(t,e,n,r,i,s);return o&&(a.qh=!0),a}(this.ju,this.ph,this.bh,this.Sh,t.Wl,t.Dh,!t.persistenceSettings.jl||!t.persistenceSettings.synchronizeTabs)},t.prototype.terminate=function(){return qs(this.ph)},t}(),la=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Xl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Xl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Zl=function(){this.muted=!0},t.prototype.Xl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),ha=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new h(l.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+W(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(O("FieldPath","string",e,t[e]),0===t[e].length)throw new h(l.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.t_=new A(t)},da=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return r.__extends(e,t),e.documentId=function(){return new e(A.v().R())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","FieldPath",1,t);return this.t_.isEqual(t.t_)},e}(ha),fa=new RegExp("[~\\*/\\[\\]]"),pa=function(t){this.e_=t},ma=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.n_=function(t){if(2!==t.s_)throw t.i_(1===t.s_?this.e_+"() can only appear at the top level of your update data":this.e_+"() cannot be used with set() unless you pass {merge:true}");return t.We.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(pa);function ga(t,e,n){return new xa({s_:3,r_:e.settings.r_,methodName:t.e_,o_:n},e.U,e.serializer,e.ignoreUndefinedProperties)}var ya=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.n_=function(t){return new an(t.path,new Xe)},e.prototype.isEqual=function(t){return t instanceof e},e}(pa),va=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return r.__extends(e,t),e.prototype.n_=function(t){var e=ga(this,t,!0),n=this.a_.map((function(t){return Pa(t,e)})),r=new Je(n);return new an(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(pa),wa=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return r.__extends(e,t),e.prototype.n_=function(t){var e=ga(this,t,!0),n=this.a_.map((function(t){return Pa(t,e)})),r=new tn(n);return new an(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(pa),_a=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).c_=n,r}return r.__extends(e,t),e.prototype.n_=function(t){var e=new nn(t.serializer,we(t.serializer,this.c_));return new an(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(pa),ba=function(){function t(t,e){if(D("GeoPoint",arguments,2),O("GeoPoint","number",1,t),O("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new h(l.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new h(l.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.u_=t,this.h_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.u_===t.u_&&this.h_===t.h_},t.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},t.prototype.Y=function(t){return Y(this.u_,t.u_)||Y(this.h_,t.h_)},t}(),Ea=function(t){this.l_=t},Sa=/^__.*__$/,Ta=function(t,e,n){this.__=t,this.f_=e,this.d_=n},Ia=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[];return n.push(null!==this.We?new vn(t,this.data,this.We,e):new yn(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new _n(t,this.fieldTransforms)),n},t}(),Ca=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[new vn(t,this.data,this.We,e)];return this.fieldTransforms.length>0&&n.push(new _n(t,this.fieldTransforms)),n},t}();function Aa(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v()}}var xa=function(){function t(t,e,n,r,i,s){this.settings=t,this.U=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.m_(),this.fieldTransforms=i||[],this.We=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"s_",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),t.prototype.T_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},t.prototype.E_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.T_({path:n,o_:!1});return r.I_(t),r},t.prototype.A_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.T_({path:n,o_:!1});return r.m_(),r},t.prototype.R_=function(t){return this.T_({path:void 0,o_:!0})},t.prototype.i_=function(t){return Ua(t,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},t.prototype.contains=function(t){return void 0!==this.We.find((function(e){return t.T(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.T(e.field)}))},t.prototype.m_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},t.prototype.I_=function(t){if(0===t.length)throw this.i_("Document fields must not be empty");if(Aa(this.s_)&&Sa.test(t))throw this.i_('Document fields cannot begin and end with "__"')},t}(),ka=function(){function t(t,e,n){this.U=t,this.ignoreUndefinedProperties=e,this.serializer=n||sa(t)}return t.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new xa({s_:t,methodName:e,r_:n,path:A.P(),o_:!1,g_:r},this.U,this.serializer,this.ignoreUndefinedProperties)},t}();function Da(t,e,n,r,i,s){void 0===s&&(s={});var o=t.P_(s.merge||s.mergeFields?2:0,e,n,i);Ma("Data must be an object, but it was:",o,r);var a,u,c=La(r,o);if(s.merge)a=new on(o.We),u=o.fieldTransforms;else if(s.mergeFields){for(var d=[],f=0,p=s.mergeFields;f<p.length;f++){var m=p[f],g=void 0;if(m instanceof ha)g=m.t_;else{if("string"!=typeof m)throw v();g=ja(e,m,n)}if(!o.contains(g))throw new h(l.INVALID_ARGUMENT,"Field '"+g+"' is specified in your field mask but missing from your input data.");qa(d,g)||d.push(g)}a=new on(d),u=o.fieldTransforms.filter((function(t){return a.Ye(t.field)}))}else a=null,u=o.fieldTransforms;return new Ia(new In(c),a,u)}function Na(t,e,n,r){var i=t.P_(1,e,n);Ma("Data must be an object, but it was:",i,r);var s=[],o=new Cn;E(r,(function(t,r){var a=ja(e,t,n),u=i.A_(a);if(r instanceof ma||r instanceof Ea&&r.l_ instanceof ma)s.push(a);else{var c=Pa(r,u);null!=c&&(s.push(a),o.set(a,c))}}));var a=new on(s);return new Ca(o.Xe(),a,i.fieldTransforms)}function Ra(t,e,n,r,i,s){var o=t.P_(1,e,n),a=[Va(e,r,n)],u=[i];if(s.length%2!=0)throw new h(l.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<s.length;c+=2)a.push(Va(e,s[c])),u.push(s[c+1]);for(var d=[],f=new Cn,p=a.length-1;p>=0;--p)if(!qa(d,a[p])){var m=a[p],g=u[p],y=o.A_(m);if(g instanceof ma||g instanceof Ea&&g.l_ instanceof ma)d.push(m);else{var v=Pa(g,y);null!=v&&(d.push(m),f.set(m,v))}}var w=new on(d);return new Ca(f.Xe(),w,o.fieldTransforms)}function Oa(t,e,n,r){return void 0===r&&(r=!1),Pa(n,t.P_(r?4:3,e))}function Pa(t,e){if(t instanceof Ea&&(t=t.l_),Fa(t))return Ma("Unsupported field value:",e,t),La(t,e);if(t instanceof pa)return function(t,e){if(!Aa(e.s_))throw e.i_(t.e_+"() can only be used with update() and set()");if(!e.path)throw e.i_(t.e_+"() is not currently supported inside arrays");var n=t.n_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.We.push(e.path),t instanceof Array){if(e.settings.o_&&4!==e.s_)throw e.i_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=Pa(s[i],e.R_(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return we(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=at.fromDate(t);return{timestampValue:_e(e.serializer,n)}}if(t instanceof at){var r=new at(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:_e(e.serializer,r)}}if(t instanceof ba)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tt)return{bytesValue:be(e.serializer,t.q)};if(t instanceof Ta){var i=e.U,s=t.__;if(!s.isEqual(i))throw e.i_("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Te(t.__||e.U,t.f_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.i_("Unsupported field value: "+q(t))}(t,e)}function La(t,e){var n={};return S(t)?e.path&&e.path.length>0&&e.We.push(e.path):E(t,(function(t,r){var i=Pa(r,e.E_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Fa(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof at||t instanceof ba||t instanceof tt||t instanceof Ta||t instanceof pa)}function Ma(t,e,n){if(!Fa(n)||!U(n)){var r=q(n);throw e.i_("an object"===r?t+" a custom object":t+" "+r)}}function Va(t,e,n){if(e instanceof ha)return e.t_;if("string"==typeof e)return ja(t,e);throw Ua("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function ja(t,e,n){try{return function(t){if(t.search(fa)>=0)throw new h(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(da.bind.apply(da,r.__spreadArrays([void 0],t.split("."))))}catch(r){throw new h(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).t_}catch(e){throw Ua((i=e)instanceof Error?i.message:i.toString(),t,!1,void 0,n)}var i}function Ua(t,e,n,r,i){var s=r&&!r.m(),o=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new h(l.INVALID_ARGUMENT,(a+=". ")+t+u)}function qa(t,e){return t.some((function(t){return t.isEqual(e)}))}var Ba=function(){function t(t){this.Ku=t,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}return t.prototype.v_=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:if(this.S_(),this.mutations.length>0)throw new h(l.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,o,a,u;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=De(n.serializer)+"/documents",s={documents:e.map((function(t){return Ce(n.serializer,t)}))},[4,n.ku("BatchGetDocuments",i,s)];case 1:return o=r.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){w(!!e.found);var n=Ae(t,e.found.name),r=Se(e.found.updateTime),i=new In({mapValue:{fields:e.found.fields}});return new kn(n,r,i,{})}(t,e):"missing"in e?function(t,e){w(!!e.missing),w(!!e.readTime);var n=Ae(t,e.missing),r=Se(e.readTime);return new Dn(n,r)}(t,e):v()}(n.serializer,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());w(!!e),u.push(e)})),u)]}}))}))}(this.Ku,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof Dn||t instanceof kn?n.D_(t):v()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.w_(t,this.Ge(t))),this.b_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.w_(t,this.C_(t)))}catch(t){this.p_=t}this.b_.add(t.toString())},t.prototype.delete=function(t){this.write([new Sn(t,this.Ge(t))]),this.b_.add(t.toString())},t.prototype.commit=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(this.S_(),this.p_)throw this.p_;return t=this.y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=x.D(n);e.mutations.push(new Tn(r,e.Ge(r)))})),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=De(n.serializer)+"/documents",s={writes:e.map((function(t){return Oe(n.serializer,t)}))},[4,n.$u("Commit",i,s)];case 1:return r.sent(),[2]}}))}))}(this.Ku,this.mutations)];case 1:return n.sent(),this.V_=!0,[2]}}))}))},t.prototype.D_=function(t){var e;if(t instanceof kn)e=t.version;else{if(!(t instanceof Dn))throw v();e=ut.min()}var n=this.y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new h(l.ABORTED,"Document version changed between two reads.")}else this.y_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.y_.get(t.toString());return!this.b_.has(t.toString())&&e?cn.updateTime(e):cn.ze()},t.prototype.C_=function(t){var e=this.y_.get(t.toString());if(!this.b_.has(t.toString())&&e){if(e.isEqual(ut.min()))throw new h(l.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cn.updateTime(e)}return cn.exists(!0)},t.prototype.write=function(t){this.S_(),this.mutations=this.mutations.concat(t)},t.prototype.S_=function(){},t}(),za=function(){function t(t,e,n,r){this.cs=t,this.Ku=e,this.updateFunction=n,this.ls=r,this.N_=5,this.ys=new fr(this.cs,"transaction_retry")}return t.prototype.run=function(){this.F_()},t.prototype.F_=function(){var t=this;this.ys.gn((function(){return r.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return r.__generator(this,(function(r){return t=new Ba(this.Ku),(e=this.x_(t))&&e.then((function(e){n.cs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.k_(t)}))}))})).catch((function(t){n.k_(t)})),[2]}))}))}))},t.prototype.x_=function(t){try{var e=this.updateFunction(t);return!ct(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.k_=function(t){var e=this;this.N_>0&&this.M_(t)?(this.N_-=1,this.cs.ws((function(){return e.F_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.M_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!bt(e)}return!1},t}(),Ha=function(){function t(t,e){this.credentials=t,this.cs=e,this.clientId=Q.k(),this.O_=new dr}return t.prototype.start=function(t,e,n,i){var s=this;this.L_(),this.bl=t;var o=new dr,a=!1;return this.credentials.Hc((function(t){if(!a)return a=!0,p("FirestoreClient","Initializing. user=",t.uid),s.B_(e,n,i,t,o).then(s.O_.resolve,s.O_.reject);s.cs.Cs((function(){return function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=_(t)).cs.xs(),p("RemoteStore","RemoteStore received new credentials"),i=Ks(n),n.Yu.add(3),[4,Us(n)];case 1:return r.sent(),i&&n.th.set("Unknown"),[4,n.Gu.Jl(e)];case 2:return r.sent(),n.Yu.delete(3),[4,js(n)];case 3:return r.sent(),[2]}}))}))}(s.ph,t)}))})),this.cs.ws((function(){return s.O_.promise})),o.promise},t.prototype.enableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue((function(){return t.persistence.tc(!0),function(t){var e=_(t);return e.Yu.delete(0),js(e)}(t.ph)}))},t.prototype.B_=function(t,e,n,i,s){return r.__awaiter(this,void 0,void 0,(function(){var o,a,u=this;return r.__generator(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,t.initialize(o={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:i,Dh:100,persistenceSettings:n})];case 1:return c.sent(),[4,e.initialize(t,o)];case 2:return c.sent(),this.persistence=t.persistence,this.Sh=t.Sh,this.ju=t.ju,this.ql=t.ql,this.Ku=e.Ku,this.ph=e.ph,this.fi=e.fi,this.q_=e.bh,this.q_.Us=vo.bind(null,this.fi),this.q_.js=_o.bind(null,this.fi),this.persistence.Za((function(){return r.__awaiter(u,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),s.resolve(),[3,4];case 3:if(a=c.sent(),s.reject(a),!this.U_(a))throw a;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),this.B_(new aa,new ca,{jl:!1},i,s))];case 4:return[2]}}))}))},t.prototype.U_=function(t){return"FirebaseError"===t.name?t.code===l.FAILED_PRECONDITION||t.code===l.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.L_=function(){if(this.cs.ps)throw new h(l.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue((function(){return t.persistence.tc(!1),function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=_(t)).Yu.add(0),[4,Us(e)];case 1:return n.sent(),e.th.set("Offline"),[2]}}))}))}(t.ph)}))},t.prototype.terminate=function(){var t=this;this.cs.Ds();var e=new dr;return this.cs.bs((function(){return r.__awaiter(t,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,qs(this.ph)];case 1:return r.sent(),[4,this.Sh.Di()];case 2:return r.sent(),[4,this.persistence.Di()];case 3:return r.sent(),this.credentials.Yc(),e.resolve(),[3,5];case 4:return t=r.sent(),n=xr(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.L_();var e=new dr;return this.cs.ws((function(){return function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:Ks((n=_(t)).ph)||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=_(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Sr.qo(t)}))}(n.ju)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((s=n.Lh.get(i)||[]).push(e),n.Lh.set(i,s),[3,4]);case 3:return o=r.sent(),a=xr(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}(t.fi,e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.L_();var i=new la(n),s=new Fr(t,i,e);return this.cs.ws((function(){return Nr(r.q_,s)})),function(){i.Zl(),r.cs.ws((function(){return Rr(r.q_,s)}))}},t.prototype.Q_=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),e=new dr,[2,(this.cs.ws((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,s,o;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=_(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Cc.Cr(t,e)}))}(t,e)];case 1:return(i=r.sent())instanceof kn?n.resolve(i):i instanceof Dn?n.resolve(null):n.reject(new h(l.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return s=r.sent(),o=xr(s,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))}(n.ju,t,e)})),e.promise)]}}))}))},t.prototype.W_=function(t,e){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),n=new dr,[2,(this.cs.ws((function(){return function(t,e,n,r,i){var s=new la({next:function(s){e.ws((function(){return Rr(t,o)}));var a=s.docs.has(n);!a&&s.fromCache?i.reject(new h(l.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new h(l.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:function(t){return i.reject(t)}}),o=new Fr(Pn(n.path),s,{includeMetadataChanges:!0,Xs:!0});return Nr(t,o)}(i.q_,i.cs,t,e,n)})),n.promise)]}}))}))},t.prototype.j_=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),e=new dr,[2,(this.cs.ws((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,s,o,a,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,bs(t,e,!0)];case 1:return i=r.sent(),s=new po(e,i.Fc),o=s.wh(i.documents),a=s.yr(o,!1),n.resolve(a.snapshot),[3,3];case 2:return u=r.sent(),c=xr(u,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))}(n.ju,t,e)})),e.promise)]}}))}))},t.prototype.K_=function(t,e){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),n=new dr,[2,(this.cs.ws((function(){return function(t,e,n,r,i){var s=new la({next:function(n){e.ws((function(){return Rr(t,o)})),n.fromCache&&"server"===r.source?i.reject(new h(l.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),o=new Fr(n,s,{includeMetadataChanges:!0,Xs:!0});return Nr(t,o)}(i.q_,i.cs,t,e,n)})),n.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.L_();var n=new dr;return this.cs.ws((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,s,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:i=Go(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=_(t),i=at.now(),s=e.reduce((function(t,e){return t.add(e.key)}),Lt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Cc.kr(t,s).next((function(s){n=s;for(var o=[],a=0,u=e;a<u.length;a++){var c=u[a],l=pn(c,n.get(c.key));null!=l&&o.push(new vn(c.key,l,An(l.proto.mapValue),cn.exists(!0)))}return r.Sr.ko(t,i,o,e)}))})).then((function(t){var e=t.lr(n);return{batchId:t.batchId,wr:e}}))}(i.ju,e)];case 2:return s=r.sent(),i.Sh.xi(s.batchId),function(t,e,n){var r=t.Oh[t.currentUser.ti()];r||(r=new St(Y)),r=r.ot(e,n),t.Oh[t.currentUser.ti()]=r}(i,s.batchId,n),[4,Oo(i,s.wr)];case 3:return r.sent(),[4,eo(i.ph)];case 4:return r.sent(),[3,6];case 5:return o=r.sent(),a=xr(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}(e.fi,t,n)})),n.promise},t.prototype.U=function(){return this.bl.U},t.prototype.G_=function(t){var e=this;this.L_();var n=new la(t);return this.cs.ws((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,function(t,e){_(t).qs.add(e),e.next()}(this.q_,n)]}))}))})),function(){n.Zl(),e.cs.ws((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,function(t,e){_(t).qs.delete(e)}(this.q_,n)]}))}))}))}},Object.defineProperty(t.prototype,"z_",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.L_();var n=new dr;return this.cs.ws((function(){return new za(e.cs,e.Ku,t,n).run(),Promise.resolve()})),n.promise},t}();function Ga(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}var $a=function(){function t(t,e,n,r,i){this.U=t,this.timestampsInSnapshots=e,this.H_=n,this.Y_=r,this.J_=i}return t.prototype.X_=function(t){switch(Zt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return oe(t.integerValue||t.doubleValue);case 3:return this.Z_(t.timestampValue);case 4:return this.tf(t);case 5:return t.stringValue;case 6:return this.J_(ae(t.bytesValue));case 7:return this.ef(t.referenceValue);case 8:return this.nf(t.geoPointValue);case 9:return this.sf(t.arrayValue);case 10:return this.if(t.mapValue);default:throw v()}},t.prototype.if=function(t){var e=this,n={};return E(t.fields||{},(function(t,r){n[t]=e.X_(r)})),n},t.prototype.nf=function(t){return new ba(oe(t.latitude),oe(t.longitude))},t.prototype.sf=function(t){var e=this;return(t.values||[]).map((function(t){return e.X_(t)}))},t.prototype.tf=function(t){switch(this.H_){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Yt(n)?t(n):n}(t);return null==e?null:this.X_(e);case"estimate":return this.Z_(Xt(t));default:return null}},t.prototype.Z_=function(t){var e=se(t),n=new at(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.ef=function(t){var e=I.g(t);w($e(e));var n=new st(e.get(1),e.get(3)),r=new x(e.u(5));return n.isEqual(this.U)||m("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.Y_(r)},t}(),Wa=si.ho,Ka=function(){function t(t){var e,n,r,i,s;if(void 0===t.host){if(void 0!==t.ssl)throw new h(l.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else L("settings","non-empty string","host",t.host),this.host=t.host,F("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(z("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","experimentalAutoDetectLongPolling","ignoreUndefinedProperties"]),F("settings","object","credentials",t.credentials),this.credentials=t.credentials,F("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),F("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?m("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&m("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,F("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=si._o;else{if(t.cacheSizeBytes!==Wa&&t.cacheSizeBytes<si.lo)throw new h(l.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+si.lo);this.cacheSizeBytes=t.cacheSizeBytes}F("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i,F("settings","boolean","experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(s=t.experimentalAutoDetectLongPolling)&&void 0!==s&&s,function(t,e,n,r){if(!0===e&&!0===r)throw new h(l.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Qa=function(){function t(e,n,i,s){var o=this;if(void 0===i&&(i=new aa),void 0===s&&(s=new ca),this.rf=i,this.af=s,this.cf=null,this.uf=new Ar,this.INTERNAL={delete:function(){return r.__awaiter(o,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var a=e;this.cf=a,this.__=t._f(a),this.ff=a.name,this.df=new Ds(n)}else{var u=e;if(!u.projectId)throw new h(l.INVALID_ARGUMENT,"Must provide projectId");this.__=new st(u.projectId,u.database),this.ff="[DEFAULT]",this.df=new ks}this.wf=new Ka({})}return Object.defineProperty(t.prototype,"mf",{get:function(){return this.Tf||(this.Tf=new ka(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){D("Firestore.settings",arguments,1),O("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.wf),t)).merge;var e=new Ka(t);if(this.lf&&!this.wf.isEqual(e))throw new h(l.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.wf=e,void 0!==e.credentials&&(this.df=function(t){if(!t)return new ks;switch(t.type){case"gapi":var e=t.client;return w(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Rs(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new h(l.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},t.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.lf)throw new h(l.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&m("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new h(l.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:r,ka:i})},t.prototype.clearPersistence=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){if(void 0!==this.lf&&!this.lf.z_)throw new h(l.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new dr,[2,(this.uf.bs((function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"If",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){return this.hf(),Ga(t)?this.lf.G_(t):(O("Firestore.onSnapshotsInSync","function",1,t),this.lf.G_({next:t}))},t.prototype.hf=function(){return this.lf||this.Ef(new aa,new ca,{jl:!1}),this.lf},t.prototype.Af=function(){return new it(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},t.prototype.Ef=function(t,e,n){var r=this.Af();return this.lf=new Ha(this.df,this.uf),this.lf.start(r,t,e,n)},t._f=function(t){if(!Object.prototype.hasOwnProperty.call(t.options,"projectId"))throw new h(l.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e=t.options.projectId;if(!e||"string"!=typeof e)throw new h(l.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new st(e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.cf)throw new h(l.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return D("Firestore.collection",arguments,1),O("Firestore.collection","non-empty string",1,t),this.hf(),new lu(I.g(t),this,null)},t.prototype.doc=function(t){return D("Firestore.doc",arguments,1),O("Firestore.doc","non-empty string",1,t),this.hf(),Ja.Rf(I.g(t),this,null)},t.prototype.collectionGroup=function(t){if(D("Firestore.collectionGroup",arguments,1),O("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new h(l.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.hf(),new uu(function(t){return new Rn(I.P(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return D("Firestore.runTransaction",arguments,1),O("Firestore.runTransaction","function",1,t),this.hf().transaction((function(n){return t(new Ya(e,n))}))},t.prototype.batch=function(){return this.hf(),new Xa(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(f()){case s.LogLevel.DEBUG:return"debug";case s.LogLevel.ERROR:return"error";case s.LogLevel.SILENT:return"silent";case s.LogLevel.WARN:return"warn";case s.LogLevel.INFO:return"info";case s.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){D("Firestore.setLogLevel",arguments,1),V("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),d.setLogLevel(t)},t.prototype.gf=function(){return this.wf.timestampsInSnapshots},t.prototype.Pf=function(){return this.wf},t}(),Ya=function(){function t(t,e){this.yf=t,this.Vf=e}return t.prototype.get=function(t){var e=this;D("Transaction.get",arguments,1);var n=pu("Transaction.get",t,this.yf);return this.Vf.v_([n.f_]).then((function(t){if(!t||1!==t.length)return v();var r=t[0];if(r instanceof Dn)return new tu(e.yf,n.f_,null,!1,!1,n.d_);if(r instanceof kn)return new tu(e.yf,n.f_,r,!1,!1,n.d_);throw v()}))},t.prototype.set=function(t,e,n){R("Transaction.set",arguments,2,3);var r=pu("Transaction.set",t,this.yf);n=hu("Transaction.set",n);var i=gu(r.d_,e,n),s=Da(this.yf.mf,"Transaction.set",r.f_,i,null!==r.d_,n);return this.Vf.set(r.f_,s),this},t.prototype.update=function(t,e,n){for(var r,i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return"string"==typeof e||e instanceof da?(N("Transaction.update",arguments,3),r=pu("Transaction.update",t,this.yf),i=Ra(this.yf.mf,"Transaction.update",r.f_,e,n,s)):(D("Transaction.update",arguments,2),r=pu("Transaction.update",t,this.yf),i=Na(this.yf.mf,"Transaction.update",r.f_,e)),this.Vf.update(r.f_,i),this},t.prototype.delete=function(t){D("Transaction.delete",arguments,1);var e=pu("Transaction.delete",t,this.yf);return this.Vf.delete(e.f_),this},t}(),Xa=function(){function t(t){this.yf=t,this.pf=[],this.bf=!1}return t.prototype.set=function(t,e,n){R("WriteBatch.set",arguments,2,3),this.vf();var r=pu("WriteBatch.set",t,this.yf);n=hu("WriteBatch.set",n);var i=gu(r.d_,e,n),s=Da(this.yf.mf,"WriteBatch.set",r.f_,i,null!==r.d_,n);return this.pf=this.pf.concat(s.w_(r.f_,cn.ze())),this},t.prototype.update=function(t,e,n){for(var r,i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return this.vf(),"string"==typeof e||e instanceof da?(N("WriteBatch.update",arguments,3),r=pu("WriteBatch.update",t,this.yf),i=Ra(this.yf.mf,"WriteBatch.update",r.f_,e,n,s)):(D("WriteBatch.update",arguments,2),r=pu("WriteBatch.update",t,this.yf),i=Na(this.yf.mf,"WriteBatch.update",r.f_,e)),this.pf=this.pf.concat(i.w_(r.f_,cn.exists(!0))),this},t.prototype.delete=function(t){D("WriteBatch.delete",arguments,1),this.vf();var e=pu("WriteBatch.delete",t,this.yf);return this.pf=this.pf.concat(new Sn(e.f_,cn.ze())),this},t.prototype.commit=function(){return this.vf(),this.bf=!0,this.pf.length>0?this.yf.hf().write(this.pf):Promise.resolve()},t.prototype.vf=function(){if(this.bf)throw new h(l.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Ja=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.__,e,r)||this).f_=e,i.firestore=n,i.d_=r,i.lf=i.firestore.hf(),i}return r.__extends(e,t),e.Rf=function(t,n,r){if(t.length%2!=0)throw new h(l.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.R()+" has "+t.length);return new e(new x(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new lu(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(D("DocumentReference.collection",arguments,1),O("DocumentReference.collection","non-empty string",1,t),!t)throw new h(l.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=I.g(t);return new lu(this.f_.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw H("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.f_.isEqual(t.f_)&&this.d_===t.d_},e.prototype.set=function(t,e){R("DocumentReference.set",arguments,1,2),e=hu("DocumentReference.set",e);var n=gu(this.d_,t,e),r=Da(this.firestore.mf,"DocumentReference.set",this.f_,n,null!==this.d_,e);return this.lf.write(r.w_(this.f_,cn.ze()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof da?(N("DocumentReference.update",arguments,2),n=Ra(this.firestore.mf,"DocumentReference.update",this.f_,t,e,r)):(D("DocumentReference.update",arguments,1),n=Na(this.firestore.mf,"DocumentReference.update",this.f_,t)),this.lf.write(n.w_(this.f_,cn.exists(!0)))},e.prototype.delete=function(){return D("DocumentReference.delete",arguments,0),this.lf.write([new Sn(this.f_,cn.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];R("DocumentReference.onSnapshot",arguments,1,4);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Ga(i[a])||(z("DocumentReference.onSnapshot",o=i[a],["includeMetadataChanges"]),F("DocumentReference.onSnapshot","boolean","includeMetadataChanges",o.includeMetadataChanges),a++);var u={includeMetadataChanges:o.includeMetadataChanges};if(Ga(i[a])){var c=i[a];i[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else O("DocumentReference.onSnapshot","function",a,i[a]),P("DocumentReference.onSnapshot","function",a+1,i[a+1]),P("DocumentReference.onSnapshot","function",a+2,i[a+2]);var l={next:function(t){i[a]&&i[a](r.Sf(t))},error:i[a+1],complete:i[a+2]};return this.lf.listen(Pn(this.f_.path),u,l)},e.prototype.get=function(t){var e=this;R("DocumentReference.get",arguments,0,1),fu("DocumentReference.get",t);var n=this.firestore.hf();return t&&"cache"===t.source?n.Q_(this.f_).then((function(t){return new tu(e.firestore,e.f_,t,!0,t instanceof kn&&t.Je,e.d_)})):n.W_(this.f_,t).then((function(t){return e.Sf(t)}))},e.prototype.withConverter=function(t){return new e(this.f_,this.firestore,t)},e.prototype.Sf=function(t){var e=t.docs.get(this.f_);return new tu(this.firestore,this.f_,e,t.fromCache,t.hasPendingWrites,this.d_)},e}(Ta),Za=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),tu=function(){function t(t,e,n,r,i,s){this.yf=t,this.f_=e,this.Df=n,this.Cf=r,this.Nf=i,this.d_=s}return t.prototype.data=function(t){var e=this;if(R("DocumentSnapshot.data",arguments,0,1),t=du("DocumentSnapshot.data",t),this.Df){if(this.d_){var n=new eu(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(n,t)}return new $a(this.yf.__,this.yf.gf(),t.serverTimestamps||"none",(function(t){return new Ja(t,e.yf,null)}),(function(t){return new rt(t)})).X_(this.Df.rn())}},t.prototype.get=function(t,e){var n=this;if(R("DocumentSnapshot.get",arguments,1,2),e=du("DocumentSnapshot.get",e),this.Df){var r=this.Df.data().field(Va("DocumentSnapshot.get",t,this.f_));if(null!==r)return new $a(this.yf.__,this.yf.gf(),e.serverTimestamps||"none",(function(t){return new Ja(t,n.yf,n.d_)}),(function(t){return new rt(t)})).X_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ja(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Za(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","DocumentSnapshot",1,e);return this.yf===e.yf&&this.Cf===e.Cf&&this.f_.isEqual(e.f_)&&(null===this.Df?null===e.Df:this.Df.isEqual(e.Df))&&this.d_===e.d_},t}(),eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(tu);function nu(t,e,n,r,i,s,o){var a;if(i.p()){if("array-contains"===s||"array-contains-any"===s)throw new h(l.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){su(o,s);for(var u=[],c=0,d=o;c<d.length;c++)u.push(iu(r,t,d[c]));a={arrayValue:{values:u}}}else a=iu(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||su(o,s),a=Oa(n,e,o,"in"===s||"not-in"===s);var f=Yn.create(i,s,a);return function(t,e){if(e.hn()){var n=Vn(t);if(null!==n&&!n.isEqual(e.field))throw new h(l.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Mn(t);null!==r&&ou(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new h(l.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}function ru(t,e,n){if(null!==t.startAt)throw new h(l.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new h(l.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new cr(e,n);return function(t,e){if(null===Mn(t)){var n=Vn(t);null!==n&&ou(0,n,e.field)}}(t,r),r}function iu(t,e,n){if("string"==typeof n){if(""===n)throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!jn(e)&&-1!==n.indexOf("/"))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(I.g(n));if(!x.F(r))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ue(t,new x(r))}if(n instanceof Ta)return ue(t,n.f_);throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+q(n)+".")}function su(t,e){if(!Array.isArray(t)||0===t.length)throw new h(l.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new h(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(t.indexOf(null)>=0)throw new h(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new h(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function ou(t,e,n){if(!n.isEqual(e))throw new h(l.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function au(t){if(Fn(t)&&0===t.on.length)throw new h(l.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var uu=function(){function t(t,e,n){this.Ff=t,this.firestore=e,this.d_=n}return t.prototype.where=function(e,n,r){D("Query.where",arguments,3),B("Query.where",3,r);var i=V("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,n),s=Va("Query.where",e),o=nu(this.Ff,"Query.where",this.firestore.mf,this.firestore.__,s,i,r);return new t(function(t,e){var n=t.filters.concat([e]);return new Rn(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.Ff,o),this.firestore,this.d_)},t.prototype.orderBy=function(e,n){var r;if(R("Query.orderBy",arguments,1,2),P("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new h(l.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Va("Query.orderBy",e),s=ru(this.Ff,i,r);return new t(function(t,e){var n=t.on.concat([e]);return new Rn(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.Ff,s),this.firestore,this.d_)},t.prototype.limit=function(e){return D("Query.limit",arguments,1),O("Query.limit","number",1,e),G("Query.limit",1,e),new t(Bn(this.Ff,e,"F"),this.firestore,this.d_)},t.prototype.limitToLast=function(e){return D("Query.limitToLast",arguments,1),O("Query.limitToLast","number",1,e),G("Query.limitToLast",1,e),new t(Bn(this.Ff,e,"L"),this.firestore,this.d_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.startAt",arguments,1);var i=this.xf("Query.startAt",e,n,!0);return new t(zn(this.Ff,i),this.firestore,this.d_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.startAfter",arguments,1);var i=this.xf("Query.startAfter",e,n,!1);return new t(zn(this.Ff,i),this.firestore,this.d_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.endBefore",arguments,1);var i=this.xf("Query.endBefore",e,n,!0);return new t(Hn(this.Ff,i),this.firestore,this.d_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.endAt",arguments,1);var i=this.xf("Query.endAt",e,n,!1);return new t(Hn(this.Ff,i),this.firestore,this.d_)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","Query",1,e);return this.firestore===e.firestore&&Gn(this.Ff,e.Ff)&&this.d_===e.d_},t.prototype.withConverter=function(e){return new t(this.Ff,this.firestore,e)},t.prototype.xf=function(t,e,n,i){if(B(t,1,e),e instanceof tu)return D(t,r.__spreadArrays([e],n),1),function(t,e,n,r,i){if(!r)throw new h(l.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var s=[],o=0,a=Un(t);o<a.length;o++){var u=a[o];if(u.field.p())s.push(ue(e,r.key));else{var c=r.field(u.field);if(Yt(c))throw new h(l.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var d=u.field.R();throw new h(l.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+d+"' (used as the orderBy) does not exist.")}s.push(c)}}return new sr(s,i)}(this.Ff,this.firestore.__,t,e.Df,i);var s=[e].concat(n);return function(t,e,n,r,i,s){var o=t.on;if(i.length>o.length)throw new h(l.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.p()){if("string"!=typeof c)throw new h(l.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!jn(t)&&-1!==c.indexOf("/"))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var d=t.path.child(I.g(c));if(!x.F(d))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+d+"' is not because it contains an odd number of segments.");var f=new x(d);a.push(ue(e,f))}else{var p=Oa(n,r,c);a.push(p)}}return new sr(a,s)}(this.Ff,this.firestore.__,this.firestore.mf,t,s,i)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];R("Query.onSnapshot",arguments,1,4);var o={},a=0;if("object"!=typeof i[a]||Ga(i[a])||(z("Query.onSnapshot",o=i[a],["includeMetadataChanges"]),F("Query.onSnapshot","boolean","includeMetadataChanges",o.includeMetadataChanges),a++),Ga(i[a])){var u=i[a];i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else O("Query.onSnapshot","function",a,i[a]),P("Query.onSnapshot","function",a+1,i[a+1]),P("Query.onSnapshot","function",a+2,i[a+2]);var c={next:function(t){i[a]&&i[a](new cu(r.firestore,r.Ff,t,r.d_))},error:i[a+1],complete:i[a+2]};return au(this.Ff),this.firestore.hf().listen(this.Ff,o,c)},t.prototype.get=function(t){var e=this;R("Query.get",arguments,0,1),fu("Query.get",t),au(this.Ff);var n=this.firestore.hf();return(t&&"cache"===t.source?n.j_(this.Ff):n.K_(this.Ff,t)).then((function(t){return new cu(e.firestore,e.Ff,t,e.d_)}))},t}(),cu=function(){function t(t,e,n,r){this.yf=t,this.$f=e,this.kf=n,this.d_=r,this.Mf=null,this.Of=null,this.metadata=new Za(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;R("QuerySnapshot.forEach",arguments,1,2),O("QuerySnapshot.forEach","function",1,t),this.kf.docs.forEach((function(r){t.call(e,n.Lf(r,n.metadata.fromCache,n.kf.Wt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new uu(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(z("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),F("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.kf.Kt)throw new h(l.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Mf&&this.Of===e||(this.Mf=function(t,e,n){if(t.Qt.m()){var r=0;return t.docChanges.map((function(e){return{type:"added",doc:n(e.doc,t.fromCache,t.Wt.has(e.doc.key)),oldIndex:-1,newIndex:r++}}))}var i=t.Qt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Wt.has(e.doc.key)),s=-1,o=-1;return 0!==e.type&&(s=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(o=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:mu(e.type),doc:r,oldIndex:s,newIndex:o}}))}(this.kf,e,this.Lf.bind(this)),this.Of=e),this.Mf},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","QuerySnapshot",1,e);return this.yf===e.yf&&Gn(this.$f,e.$f)&&this.kf.isEqual(e.kf)&&this.d_===e.d_},t.prototype.Lf=function(t,e,n){return new eu(this.yf,t.key,t,e,n,this.d_)},t}(),lu=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Pn(e),n,r)||this).Bf=e,e.length%2!=1)throw new h(l.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.R()+" has "+e.length);return i}return r.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Ff.path.h();return t.m()?null:new Ja(new x(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){R("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Q.k()),O("CollectionReference.doc","non-empty string",1,t);var e=I.g(t);return Ja.Rf(this.Ff.path.child(e),this.firestore,this.d_)},e.prototype.add=function(t){D("CollectionReference.add",arguments,1);var e=this.d_?this.d_.toFirestore(t):t;O("CollectionReference.add","object",1,e);var n=this.doc();return new Ja(n.f_,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Bf,this.firestore,t)},e}(uu);function hu(t,e){if(void 0===e)return{merge:!1};if(z(t,e,["merge","mergeFields"]),F(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+q(r));for(var s=0;s<r.length;++s)if(!i(r[s]))throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+s+" was: "+q(r[s]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof da}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new h(l.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function du(t,e){return void 0===e?{}:(z(t,e,["serverTimestamps"]),M(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function fu(t,e){P(t,"object",1,e),e&&(z(t,e,["source"]),M(t,0,"source",e.source,["default","server","cache"]))}function pu(t,e,n){if(e instanceof Ta){if(e.firestore!==n)throw new h(l.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw H(t,"DocumentReference",1,e)}function mu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return v()}}function gu(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.serverTimestamp=function(){k("FieldValue.serverTimestamp",arguments);var t=new ya("serverTimestamp");return t.e_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){k("FieldValue.delete",arguments);var t=new ma("deleteField");return t.e_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];N("FieldValue.arrayUnion",arguments,1);var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N("arrayUnion()",arguments,1),new va("arrayUnion",t)}).apply(void 0,t);return r.e_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];N("FieldValue.arrayRemove",arguments,1);var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N("arrayRemove()",arguments,1),new wa("arrayRemove",t)}).apply(void 0,t);return r.e_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){O("FieldValue.increment","number",1,t),D("FieldValue.increment",arguments,1);var n=function(t){return new _a("increment",t)}(t);return n.e_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.l_.isEqual(t.l_)},e}(Ea),vu={Firestore:Qa,GeoPoint:ba,Timestamp:at,Blob:rt,Transaction:Ya,WriteBatch:Xa,DocumentReference:Ja,DocumentSnapshot:tu,Query:uu,QueryDocumentSnapshot:eu,QuerySnapshot:cu,CollectionReference:lu,FieldPath:da,FieldValue:yu,setLogLevel:Qa.setLogLevel,CACHE_SIZE_UNLIMITED:Wa};function wu(t){!function(t,e){t.INTERNAL.registerComponent(new u.Component("firestore",(function(t){return function(t,e){var n=new ca,r=new ua(n);return new Qa(t,e,r,n)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},vu)))}(t),t.registerVersion("@firebase/firestore","1.18.0")}wu(c.default),e.__PRIVATE_registerFirestore=wu},Wcq6:function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=r(n("/psV"));i.default.registerVersion("firebase","7.24.0","app"),t.exports=i.default},jebL:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return s})),n.d(e,"__rest",(function(){return o})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return h})),n.d(e,"__createBinding",(function(){return d})),n.d(e,"__exportStar",(function(){return f})),n.d(e,"__values",(function(){return p})),n.d(e,"__read",(function(){return m})),n.d(e,"__spread",(function(){return g})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__await",(function(){return v})),n.d(e,"__asyncGenerator",(function(){return w})),n.d(e,"__asyncDelegator",(function(){return _})),n.d(e,"__asyncValues",(function(){return b})),n.d(e,"__makeTemplateObject",(function(){return E})),n.d(e,"__importStar",(function(){return S})),n.d(e,"__importDefault",(function(){return T})),n.d(e,"__classPrivateFieldGet",(function(){return I})),n.d(e,"__classPrivateFieldSet",(function(){return C}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function f(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function w(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){s.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof v?Promise.resolve(n.value.v).then(u,c):l(s[0][2],n)}catch(r){l(s[0][3],r)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:v(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function E(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function I(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},kOjh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("jebL"),i=n("88ZB"),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=o);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:o,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var s=this.getOrInitializeService(i);if(!s){if(n)return null;throw Error("Service "+this.name+" is not available")}return s}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(o)}catch(h){}try{for(var i=r.__values(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=r.__read(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(r.__spread(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===o?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:o:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=s,e.ComponentContainer=u,e.Provider=a},nlpz:function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorCode",(function(){return Jn})),n.d(e,"EventType",(function(){return Zn})),n.d(e,"WebChannel",(function(){return tr})),n.d(e,"XhrIo",(function(){return er})),n.d(e,"createWebChannelTransport",(function(){return Xn}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var s,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=a||{},u=o||self;function c(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function h(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),p=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function y(t,e,n){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:g).apply(null,arguments)}function v(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now;function _(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function b(){this.j=this.j,this.i=this.i}b.prototype.j=!1,b.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,f)&&t[f]||(t[f]=++p)}(this)},b.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},S=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function I(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function C(t){return/^[\s\xa0]*$/.test(t)}var A,x=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function k(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:t>e?1:0}t:{var N=u.navigator;if(N){var R=N.userAgent;if(R){A=R;break t}}A=""}function O(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function P(t){var e={};for(var n in t)e[n]=t[n];return e}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<L.length;s++)n=L[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function M(t){return M[" "](t),t}M[" "]=c;var V,j,U=k(A,"Opera"),q=k(A,"Trident")||k(A,"MSIE"),B=k(A,"Edge"),z=B||q,H=k(A,"Gecko")&&!(k(A.toLowerCase(),"webkit")&&!k(A,"Edge"))&&!(k(A,"Trident")||k(A,"MSIE"))&&!k(A,"Edge"),G=k(A.toLowerCase(),"webkit")&&!k(A,"Edge");function $(){var t=u.document;return t?t.documentMode:void 0}t:{var W="",K=(j=A,H?/rv:([^\);]+)(\)|;)/.exec(j):B?/Edge\/([\d\.]+)/.exec(j):q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(j):G?/WebKit\/(\S+)/.exec(j):U?/(?:Version)[ \/]?(\S+)/.exec(j):void 0);if(K&&(W=K?K[1]:""),q){var Q=$();if(null!=Q&&Q>parseFloat(W)){V=String(Q);break t}}V=W}var Y={};function X(t){return function(t,e){var n=Y;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=x(String(V)).split("."),r=x(String(t)).split("."),i=Math.max(n.length,r.length),s=0;0==e&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=D(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||D(0==o[2].length,0==a[2].length)||D(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}var J=u.document&&q&&($()||parseInt(V,10))||void 0,Z=!q||9<=Number(J),tt=q&&!X("9"),et=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",c,e),u.removeEventListener("test",c,e)}catch(n){}return t}();function nt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function rt(t,e){if(nt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(H){t:{try{M(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:it[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}nt.prototype.b=function(){this.defaultPrevented=!0},_(rt,nt);var it={2:"touch",3:"pen",4:"mouse"};rt.prototype.b=function(){rt.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,tt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var st="closure_listenable_"+(1e6*Math.random()|0),ot=0;function at(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ot,this.Y=this.Z=!1}function ut(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ct(t){this.src=t,this.a={},this.b=0}function lt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],s=E(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ut(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ht(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.ca==r)return i}return-1}ct.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.a[s])||(t=this.a[s]=[],this.b++);var o=ht(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):((e=new at(e,this.src,s,!!r,i)).Z=n,t.push(e)),e};var dt="closure_lm_"+(1e6*Math.random()|0),ft={};function pt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,s){if(Array.isArray(n)){for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);return null}return r=Et(r),e&&e[st]?e.wa(n,r,d(i)?!!i.capture:!!i,s):mt(e,n,r,!0,i,s)}(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)pt(t,e[s],n,r,i);return null}return n=Et(n),t&&t[st]?t.va(e,n,d(r)?!!r.capture:!!r,i):mt(t,e,n,!1,r,i)}function mt(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=d(i)?!!i.capture:!!i;if(o&&!Z)return null;var a=_t(t);if(a||(t[dt]=a=new ct(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=wt,e=Z?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)et||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[st])lt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_t(e))?(lt(n,t),0==n.b&&(n.src=null,e[dt]=null)):ut(t)}}}function yt(t){return t in ft?ft[t]:ft[t]="on"+t}function vt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&gt(t),n.call(r,e)}function wt(t,e){if(t.Y)return!0;if(!Z){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return vt(t,e=new rt(e,this))}return vt(t,new rt(e,this))}function _t(t){return(t=t[dt])instanceof ct?t:null}var bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Et(t){return"function"==l(t)?t:(t[bt]||(t[bt]=function(e){return t.handleEvent(e)}),t[bt])}function St(){b.call(this),this.c=new ct(this),this.J=this,this.C=null}function Tt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,u=o.ca||o.src;o.Z&&lt(t.c,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}_(St,b),St.prototype[st]=!0,(s=St.prototype).addEventListener=function(t,e,n,r){pt(this,t,e,n,r)},s.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,s){if(Array.isArray(n))for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);else i=d(i)?!!i.capture:!!i,r=Et(r),e&&e[st]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=ht(o=e.a[n],r,i,s))&&(ut(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete e.a[n],e.b--))):e&&(e=_t(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ht(n,r,i,s)),(r=-1<e?n[e]:null)&&gt(r))}(this,t,e,n,r)},s.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new nt(t,n);else if(t instanceof nt)t.target=t.target||n;else{var i=t;F(t=new nt(r,n),i)}if(i=!0,e)for(var s=e.length-1;0<=s;s--){var o=t.a=e[s];i=Tt(o,r,!0,t)&&i}if(i=Tt(o=t.a=n,r,!0,t)&&i,i=Tt(o,r,!1,t)&&i,e)for(s=0;s<e.length;s++)i=Tt(o=t.a=e[s],r,!1,t)&&i;return i},s.G=function(){if(St.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ut(n[r]);delete e.a[t],e.b--}}this.C=null},s.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},s.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var It=u.JSON.stringify;function Ct(){this.b=this.a=null}var At,xt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new Dt}),(function(t){t.reset()}),100);function kt(){var t=Pt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Dt(){this.next=this.b=this.a=null}function Nt(t){u.setTimeout((function(){throw t}),0)}function Rt(t,e){At||function(){var t=u.Promise.resolve(void 0);At=function(){t.then(Lt)}}(),Ot||(At(),Ot=!0),Pt.add(t,e)}Ct.prototype.add=function(t,e){var n=xt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Dt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Dt.prototype.reset=function(){this.next=this.b=this.a=null};var Ot=!1,Pt=new Ct;function Lt(){for(var t;t=kt();){try{t.a.call(t.b)}catch(n){Nt(n)}var e=xt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Ot=!1}function Ft(t,e){St.call(this),this.b=t||1,this.a=e||u,this.f=y(this.Ya,this),this.g=w()}function Mt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Vt(t,e,n){if("function"==l(t))n&&(t=y(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=y(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function jt(t){t.a=Vt((function(){t.a=null,t.c&&(t.c=!1,jt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}_(Ft,St),(s=Ft.prototype).aa=!1,s.M=null,s.Ya=function(){if(this.aa){var t=w()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Mt(this),this.start()))}},s.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=w())},s.G=function(){Ft.S.G.call(this),Mt(this),delete this.a};var Ut=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:jt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(b);function qt(t){b.call(this),this.b=t,this.a={}}_(qt,b);var Bt=[];function zt(t,e,n,r){Array.isArray(n)||(n&&(Bt[0]=n.toString()),n=Bt);for(var i=0;i<n.length;i++){var s=pt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function Ht(t){O(t.a,(function(t,e){this.a.hasOwnProperty(e)&&gt(t)}),t),t.a={}}function Gt(){this.a=!0}function $t(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return It(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}qt.prototype.G=function(){qt.S.G.call(this),Ht(this)},qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gt.prototype.info=function(){};var Wt=null;function Kt(){return Wt=Wt||new St}function Qt(t){nt.call(this,"serverreachability",t)}function Yt(t){var e=Kt();e.dispatchEvent(new Qt(e,t))}function Xt(t){nt.call(this,"statevent",t)}function Jt(t){var e=Kt();e.dispatchEvent(new Xt(e,t))}function Zt(t){nt.call(this,"timingevent",t)}function te(t,e){if("function"!=l(t))throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){t()}),e)}_(Qt,nt),_(Xt,nt),_(Zt,nt);var ee={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},ne={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function re(){}function ie(){}re.prototype.a=null;var se,oe={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function ae(){nt.call(this,"d")}function ue(){nt.call(this,"c")}function ce(){}function le(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new qt(this),this.P=he,this.R=new Ft(t=z?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}_(ae,nt),_(ue,nt),_(ce,re),se=new ce;var he=45e3,de={},fe={};function pe(t,e,n){t.H=1,t.i=Fe(De(e)),t.j=n,t.I=!0,me(t,null)}function me(t,e){t.u=w(),ve(t),t.l=De(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Qe(n.b,"t",r),t.D=0,t.a=Hn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ut(y(t.Ca,t,t.a),t.O)),zt(t.J,t.a,"readystatechange",t.Wa),e=t.B?P(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Yt(1),function(t,e,n,r,i,s){t.info((function(){if(t.a)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function ge(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ye(t,n);if(i==fe){4==e&&(t.h=4,Jt(14),r=!1),$t(t.c,t.f,null,"[Incomplete Response]");break}if(i==de){t.h=4,Jt(15),$t(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}$t(t.c,t.f,i,null),Se(t,i)}4==e&&0==n.length&&(t.h=1,Jt(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fn(e),e.F=!0)):($t(t.c,t.f,n,"[Invalid Chunked Response]"),Ee(t),be(t))}function ye(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?fe:(n=Number(e.substring(n,r)),isNaN(n)?de:(r+=1)+n>e.length?fe:(e=e.substr(r,n),t.D=r+n,e))}function ve(t){t.U=w()+t.P,we(t,t.P)}function we(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=te(y(t.Ua,t),e)}function _e(t){t.o&&(u.clearTimeout(t.o),t.o=null)}function be(t){0==t.g.v||t.A||jn(t.g,t)}function Ee(t){_e(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Mt(t.R),Ht(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Se(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||nn(n.b,t)))if(n.I=t.N,!t.C&&nn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Vn(n),An(n)}Ln(n),Jt(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=te(y(n.Ra,n),6e3));if(1>=en(n.b)&&n.ea){try{n.ea()}catch(g){}n.ea=void 0}}else qn(n,11)}else if((t.C||n.a==t)&&Vn(n),!C(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var s=i[3];null!=s&&(n.ha=s,n.c.info("VER="+n.ha));var o=i[4];null!=o&&(n.pa=o,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(k(l,"spdy")||k(l,"quic")||k(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(rn(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Le(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=w()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=zn(u,u.C?u.ga:null,u.fa),f.C){sn(u.b,f);var p=f,m=u.D;m&&p.setTimeout(m),p.o&&(_e(p),ve(p)),u.a=f}else Pn(u);0<n.g.length&&Dn(n)}else"stop"!=i[0]&&"close"!=i[0]||qn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?qn(n,7):Cn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Yt(4)}catch(g){}}function Te(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)S(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(h(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Ie(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ie)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ce(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ae(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ae(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(s=le.prototype).setTimeout=function(t){this.P=t},s.Wa=function(t){t=t.target;var e=this.F;e&&3==En(t)?e.f():this.Ca(t)},s.Ca=function(t){try{if(t==this.a)t:{var e=En(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!z&&!this.a.$())){this.A||4!=e||7==n||Yt(8==n||0>=r?3:2),_e(this);var i=this.a.X();this.N=i;var s=this.a.$();if(this.b=200==i,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(o)){var u=o;break e}}u=null}if(!u){this.b=!1,this.h=3,Jt(12),Ee(this),be(this);break t}$t(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Se(this,u)}this.I?(ge(this,e,s),z&&this.b&&3==e&&(zt(this.J,this.R,"tick",this.Va),this.R.start())):($t(this.c,this.f,s,null),Se(this,s)),4==e&&Ee(this),this.b&&!this.A&&(4==e?jn(this.g,this):(this.b=!1,ve(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.h=3,Jt(12)):(this.h=0,Jt(13)),Ee(this),be(this)}}}catch(c){}},s.Va=function(){if(this.a){var t=En(this.a),e=this.a.$();this.D<e.length&&(_e(this),ge(this,t,e),this.b&&4!=t&&ve(this))}},s.cancel=function(){this.A=!0,Ee(this)},s.Ua=function(){this.o=null;var t=w();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Yt(3),Jt(17)),Ee(this),this.h=2,be(this)):we(this,this.U-t)},(s=Ie.prototype).K=function(){Ce(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},s.L=function(){return Ce(this),this.a.concat()},s.get=function(t,e){return Ae(this.b,t)?this.b[t]:e},s.set=function(t,e){Ae(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},s.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var xe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ke(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ke){this.a=void 0!==e?e:t.a,Ne(this,t.f),this.j=t.j,Re(this,t.c),Oe(this,t.h),this.g=t.g,e=t.b;var n=new Ge;n.c=e.c,e.a&&(n.a=new Ie(e.a),n.b=e.b),Pe(this,n),this.i=t.i}else t&&(n=String(t).match(xe))?(this.a=!!e,Ne(this,n[1]||"",!0),this.j=Me(n[2]||""),Re(this,n[3]||"",!0),Oe(this,n[4]),this.g=Me(n[5]||"",!0),Pe(this,n[6]||"",!0),this.i=Me(n[7]||"")):(this.a=!!e,this.b=new Ge(null,this.a))}function De(t){return new ke(t)}function Ne(t,e,n){t.f=n?Me(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Re(t,e,n){t.c=n?Me(e,!0):e}function Oe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Pe(t,e,n){e instanceof Ge?(t.b=e,function(t,e){e&&!t.f&&($e(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(We(this,e),Qe(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ve(e,ze)),t.b=new Ge(e,t.a))}function Le(t,e,n){t.b.set(e,n)}function Fe(t){return Le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),t}function Me(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ve(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,je),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function je(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ke.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ve(e,Ue,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ve(e,Ue,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ve(n,"/"==n.charAt(0)?Be:qe,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ve(n,He)),t.join("")};var Ue=/[#\/\?@]/g,qe=/[#\?:]/g,Be=/[#\?]/g,ze=/[#\?@]/g,He=/#/g;function Ge(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $e(t){t.a||(t.a=new Ie,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function We(t,e){$e(t),e=Ye(t,e),Ae(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ce(t)))}function Ke(t,e){return $e(t),e=Ye(t,e),Ae(t.a.b,e)}function Qe(t,e,n){We(t,e),0<n.length&&(t.c=null,t.a.set(Ye(t,e),I(n)),t.b+=n.length)}function Ye(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Xe(t,e){this.b=t,this.a=e}function Je(t){this.g=t||Ze,t=u.PerformanceNavigationTiming?0<(t=u.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(s=Ge.prototype).add=function(t,e){$e(this),this.c=null,t=Ye(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},s.forEach=function(t,e){$e(this),this.a.forEach((function(n,r){S(n,(function(n){t.call(e,n,r,this)}),this)}),this)},s.L=function(){$e(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},s.K=function(t){$e(this);var e=[];if("string"==typeof t)Ke(this,t)&&(e=T(e,this.a.get(Ye(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},s.set=function(t,e){return $e(this),this.c=null,Ke(this,t=Ye(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},s.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},s.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};var Ze=10;function tn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function en(t){return t.b?1:t.a?t.a.size:0}function nn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function rn(t,e){t.a?t.a.add(e):t.b=e}function sn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function on(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var s=i(t.a.values()),o=s.next();!o.done;o=s.next())r=r.concat(o.value.s)}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r}return I(t.c)}function an(){}function un(){this.a=new an}function cn(t,e,n){var r=n||"";try{Te(t,(function(t,n){var i=t;d(t)&&(i=It(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ln(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}Je.prototype.cancel=function(){var t,e;if(this.c=on(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},an.prototype.stringify=function(t){return u.JSON.stringify(t,void 0)},an.prototype.parse=function(t){return u.JSON.parse(t,void 0)};var hn=u.JSON.parse;function dn(t){St.call(this),this.headers=new Ie,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=fn,this.D=this.F=!1}_(dn,St);var fn="",pn=/^https?$/i,mn=["POST","PUT"];function gn(t){return"content-type"==t.toLowerCase()}function yn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,vn(t),_n(t)}function vn(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function wn(t){if(t.b&&void 0!==a&&(!t.s[1]||4!=En(t)||2!=t.X()))if(t.l&&4==En(t))Vt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==En(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.B).match(xe)[1]||null;if(!s&&u.self&&u.self.location){var o=u.self.location.protocol;s=o.substr(0,o.length-1)}i=!pn.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<En(t)?t.a.statusText:""}catch(l){c=""}t.f=c+" ["+t.X()+"]",vn(t)}}finally{_n(t)}}}function _n(t,e){if(t.a){bn(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function bn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(u.clearTimeout(t.m),t.m=null)}function En(t){return t.a?t.a.readyState:0}function Sn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return O(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Le(t,e,n))}function Tn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function In(t){this.pa=0,this.g=[],this.c=new Gt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Tn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Tn("baseRetryDelayMs",5e3,t),this.Ma=Tn("retryDelaySeedMs",1e4,t),this.Ja=Tn("forwardChannelMaxRetries",2,t),this.ma=Tn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Je(t&&t.concurrentRequestLimit),this.ka=new un,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Cn(t){if(xn(t),3==t.v){var e=t.R++,n=De(t.B);Le(n,"SID",t.J),Le(n,"RID",e),Le(n,"TYPE","terminate"),Rn(t,n),(e=new le(t,t.c,e,void 0)).H=2,e.i=Fe(De(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(e.i.toString(),"")),!n&&u.Image&&((new Image).src=e.i,n=!0),n||(e.a=Hn(e.g,null),e.a.ba(e.i)),e.u=w(),ve(e)}Bn(t)}function An(t){t.a&&(Fn(t),t.a.cancel(),t.a=null)}function xn(t){An(t),t.j&&(u.clearTimeout(t.j),t.j=null),Vn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&u.clearTimeout(t.h),t.h=null)}function kn(t,e){t.g.push(new Xe(t.La++,e)),3==t.v&&Dn(t)}function Dn(t){tn(t.b)||t.h||(t.h=!0,Rt(t.Ba,t),t.u=0)}function Nn(t,e){var n;n=e?e.f:t.R++;var r=De(t.B);Le(r,"SID",t.J),Le(r,"RID",n),Le(r,"AID",t.P),Rn(t,r),t.i&&t.l&&Sn(r,t.i,t.l),n=new le(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=On(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),rn(t.b,n),pe(n,r,e)}function Rn(t,e){t.f&&Te({},(function(t,n){Le(e,n,t)}))}function On(t,e,n){n=Math.min(t.g.length,n);var r=t.f?y(t.f.Ha,t.f,t):null;t:for(var i=t.g,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].b)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=s))s=Math.max(0,i[u].b-100),a=!1;else try{cn(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Pn(t){t.a||t.j||(t.U=1,Rt(t.Aa,t),t.o=0)}function Ln(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=te(y(t.Aa,t),Un(t,t.o)),t.o++,0))}function Fn(t){null!=t.s&&(u.clearTimeout(t.s),t.s=null)}function Mn(t){t.a=new le(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=De(t.la);Le(e,"RID","rpc"),Le(e,"SID",t.J),Le(e,"CI",t.H?"0":"1"),Le(e,"AID",t.P),Rn(t,e),Le(e,"TYPE","xmlhttp"),t.i&&t.l&&Sn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Fe(De(e)),n.j=null,n.I=!0,me(n,t)}function Vn(t){null!=t.m&&(u.clearTimeout(t.m),t.m=null)}function jn(t,e){var n=null;if(t.a==e){Vn(t),Fn(t),t.a=null;var r=2}else{if(!nn(t.b,e))return;n=e.s,sn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=w()-e.u;var i=t.u;(r=Kt()).dispatchEvent(new Zt(r,n,e,i)),Dn(t)}else Pn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(en(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=te(y(t.Ba,t,e),Un(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ln(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:qn(t,5);break;case 4:qn(t,10);break;case 3:qn(t,6);break;default:qn(t,2)}}function Un(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function qn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=y(t.Xa,t);n||(n=new ke("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||Ne(n,"https"),Fe(n)),function(t,e){var n=new Gt;if(u.Image){var r=new Image;r.onload=v(ln,n,r,"TestLoadImage: loaded",!0,e),r.onerror=v(ln,n,r,"TestLoadImage: error",!1,e),r.onabort=v(ln,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=v(ln,n,r,"TestLoadImage: timeout",!1,e),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Jt(2);t.v=0,t.f&&t.f.ra(e),Bn(t),xn(t)}function Bn(t){t.v=0,t.I=-1,t.f&&(0==on(t.b).length&&0==t.g.length||(t.b.c.length=0,I(t.g),t.g.length=0),t.f.qa())}function zn(t,e,n){var r=function(t){return t instanceof ke?De(t):new ke(t,void 0)}(n);if(""!=r.c)e&&Re(r,e+"."+r.c),Oe(r,r.h);else{var i=u.location;r=function(t,e,n,r){var i=new ke(null,void 0);return t&&Ne(i,t),e&&Re(i,e),n&&Oe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&O(t.W,(function(t,e){Le(r,e,t)})),n=t.na,(e=t.A)&&n&&Le(r,e,n),Le(r,"VER",t.ha),Rn(t,r),r}function Hn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dn(t.Ka)).F=t.C,e}function Gn(){}function $n(){if(q&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function Wn(t,e){St.call(this),this.a=new In(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!C(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!C(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Yn(this)}function Kn(t){ae.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Qn(){ue.call(this),this.status=1}function Yn(t){this.a=t}(s=dn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:se),this.a.onreadystatechange=y(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(s){return void yn(this,s)}t=n||"";var i=new Ie(this.headers);r&&Te(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=gn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=u.FormData&&t instanceof u.FormData,!(0<=E(mn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{bn(this),0<this.o&&((this.D=function(t){return q&&X(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=y(this.xa,this)):this.m=Vt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(s){yn(this,s)}},s.xa=function(){void 0!==a&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},s.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),_n(this))},s.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_n(this,!0)),dn.S.G.call(this)},s.za=function(){this.j||(this.A||this.l||this.g?wn(this):this.Ta())},s.Ta=function(){wn(this)},s.X=function(){try{return 2<En(this)?this.a.status:-1}catch(j){return-1}},s.$=function(){try{return this.a?this.a.responseText:""}catch(j){return""}},s.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),hn(e)}},s.ua=function(){return this.h},s.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(s=In.prototype).ha=8,s.v=1,s.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new le(this,this.c,t,void 0),r=this.l;if(this.O&&(r?F(r=P(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var s=this.g[i];if(void 0===(s="__data__"in s.a&&"string"==typeof(s=s.a.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=On(this,n,e),Le(i=De(this.B),"RID",t),Le(i,"CVER",22),this.A&&Le(i,"X-HTTP-Session-Id",this.A),Rn(this,i),this.i&&r&&Sn(i,this.i,r),rn(this.b,n),this.Ga&&Le(i,"TYPE","init"),this.da?(Le(i,"$req",e),Le(i,"SID","null"),n.V=!0,pe(n,i,null)):pe(n,i,e),this.v=2}}else 3==this.v&&(t?Nn(this,t):0==this.g.length||tn(this.b)||Nn(this))},s.Aa=function(){if(this.j=null,Mn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=te(y(this.Sa,this),t)}},s.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,An(this),Mn(this))},s.Ra=function(){null!=this.m&&(this.m=null,An(this),Ln(this),Jt(19))},s.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),Jt(2)):(this.c.info("Failed to ping google.com"),Jt(1))},(s=Gn.prototype).ta=function(){},s.sa=function(){},s.ra=function(){},s.qa=function(){},s.Ha=function(){},$n.prototype.a=function(t,e){return new Wn(t,e)},_(Wn,St),(s=Wn.prototype).addEventListener=function(t,e,n,r){Wn.S.addEventListener.call(this,t,e,n,r)},s.removeEventListener=function(t,e,n,r){Wn.S.removeEventListener.call(this,t,e,n,r)},s.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;Jt(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=zn(t,null,t.fa),Dn(t)},s.close=function(){Cn(this.a)},s.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,kn(this.a,e)}else this.g?((e={}).__data__=It(t),kn(this.a,e)):kn(this.a,t)},s.G=function(){this.a.f=null,delete this.f,Cn(this.a),delete this.a,Wn.S.G.call(this)},_(Kn,ae),_(Qn,ue),_(Yn,Gn),Yn.prototype.ta=function(){this.a.dispatchEvent("a")},Yn.prototype.sa=function(t){this.a.dispatchEvent(new Kn(t))},Yn.prototype.ra=function(t){this.a.dispatchEvent(new Qn(t))},Yn.prototype.qa=function(){this.a.dispatchEvent("b")},$n.prototype.createWebChannel=$n.prototype.a,Wn.prototype.send=Wn.prototype.Pa,Wn.prototype.open=Wn.prototype.Oa,Wn.prototype.close=Wn.prototype.close,ee.NO_ERROR=0,ee.TIMEOUT=8,ee.HTTP_ERROR=6,ne.COMPLETE="complete",ie.EventType=oe,oe.OPEN="a",oe.CLOSE="b",oe.ERROR="c",oe.MESSAGE="d",St.prototype.listen=St.prototype.va,dn.prototype.listenOnce=dn.prototype.wa,dn.prototype.getLastError=dn.prototype.Qa,dn.prototype.getLastErrorCode=dn.prototype.ua,dn.prototype.getStatus=dn.prototype.X,dn.prototype.getResponseJson=dn.prototype.Na,dn.prototype.getResponseText=dn.prototype.$,dn.prototype.send=dn.prototype.ba;var Xn=function(){return new $n},Jn=ee,Zn=ne,tr=ie,er=dn;e.default={createWebChannelTransport:Xn,ErrorCode:Jn,EventType:Zn,WebChannel:tr,XhrIo:er}},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const l=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:s,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(a){e=a instanceof l?d(a.errors):[a]}}if(u(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(c(n))try{n.unsubscribe()}catch(a){e=e||[],a instanceof l?e=e.concat(d(a.errors)):e.push(a)}}}if(e)throw new l(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,t,e,n)}}[f](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class m extends p{constructor(t,e,n,i){let s;super(),this._parentSubscriber=t;let o=this;r(e)?s=e:e&&(s=e.next,n=e.error,i=e.complete,e!==a&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(t){return t}let v=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[f])return t[f]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=w(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[g](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=w(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function w(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const _=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class b extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class E extends p{constructor(t){super(t),this.destination=t}}let S=(()=>{class t extends v{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new E(this)}lift(t){const e=new T(this,this);return e.operator=t,e}next(t){if(this.closed)throw new _;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new _;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new _;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new _;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new _;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new b(this,t))}asObservable(){const t=new v;return t.source=this,t}}return t.create=(t,e)=>new T(t,e),t})();class T extends S{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function I(t){return t&&"function"==typeof t.schedule}function C(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new A(t,e))}}class A{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new x(t,this.project,this.thisArg))}}class x extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const k=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const N=D(),R=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function O(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const P=t=>{if(t&&"function"==typeof t[g])return r=t,t=>{const e=r[g]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(R(t))return k(t);if(O(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t);if(t&&"function"==typeof t[N])return e=t,t=>{const n=e[N]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,r};function L(t,e){return new v(n=>{const r=new h;let i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function F(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[g]}(t))return function(t,e){return new v(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[g]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(O(t))return function(t,e){return new v(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(R(t))return L(t,e);if(function(t){return t&&"function"==typeof t[N]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new v(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[N](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof v?t:new v(P(t))}class M extends p{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class V extends p{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function j(t,e){if(e.closed)return;if(t instanceof v)return t.subscribe(e);let n;try{n=P(t)(e)}catch(r){e.error(r)}return n}function U(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(U((n,r)=>F(t(n,r)).pipe(C((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new B(t,this.project,this.concurrent))}}class B extends V{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new M(this),n=this.destination;n.add(e);const r=j(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function z(t=Number.POSITIVE_INFINITY){return U(y,t)}function H(t,e){return e?L(t,e):new v(k(t))}function G(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return I(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof v?t[0]:z(e)(H(t,n))}function $(){return function(t){return t.lift(new W(t))}}class W{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new K(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class K extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Q extends v{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new X(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return $()(this)}}const Y=(()=>{const t=Q.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class X extends E{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function J(){return new S}function Z(t){return{toString:t}.toString()}const tt="__parameters__";function et(t,e,n){return Z(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(tt)?t[tt]:Object.defineProperty(t,tt,{value:[]})[tt];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const nt=et("Inject",t=>({token:t})),rt=et("Optional"),it=et("Self"),st=et("SkipSelf");var ot=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function at(t){for(let e in t)if(t[e]===at)return e;throw Error("Could not find renamed property on target object.")}function ut(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ct(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function lt(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function ht(t){return dt(t,t[pt])||dt(t,t[yt])}function dt(t,e){return e&&e.token===t?e:null}function ft(t){return t&&(t.hasOwnProperty(mt)||t.hasOwnProperty(vt))?t[mt]:null}const pt=at({"\u0275prov":at}),mt=at({"\u0275inj":at}),gt=at({"\u0275provFallback":at}),yt=at({ngInjectableDef:at}),vt=at({ngInjectorDef:at});function wt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(wt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function _t(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const bt=at({__forward_ref__:at});function Et(t){return t.__forward_ref__=Et,t.toString=function(){return wt(this())},t}function St(t){return Tt(t)?t():t}function Tt(t){return"function"==typeof t&&t.hasOwnProperty(bt)&&t.__forward_ref__===Et}const It="undefined"!=typeof globalThis&&globalThis,Ct="undefined"!=typeof window&&window,At="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xt="undefined"!=typeof global&&global,kt=It||xt||Ct||At,Dt=at({"\u0275cmp":at}),Nt=at({"\u0275dir":at}),Rt=at({"\u0275pipe":at}),Ot=at({"\u0275mod":at}),Pt=at({"\u0275loc":at}),Lt=at({"\u0275fac":at}),Ft=at({__NG_ELEMENT_ID__:at});class Mt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ct({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const Vt=new Mt("INJECTOR",-1),jt={},Ut=/\n/gm,qt="__source",Bt=at({provide:String,useValue:at});let zt,Ht=void 0;function Gt(t){const e=Ht;return Ht=t,e}function $t(t){const e=zt;return zt=t,e}function Wt(t,e=ot.Default){if(void 0===Ht)throw new Error("inject() must be called from an injection context");return null===Ht?Yt(t,void 0,e):Ht.get(t,e&ot.Optional?null:void 0,e)}function Kt(t,e=ot.Default){return(zt||Wt)(St(t),e)}const Qt=Kt;function Yt(t,e,n){const r=ht(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ot.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${wt(t)}]`)}function Xt(t){const e=[];for(let n=0;n<t.length;n++){const r=St(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=ot.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof rt||"Optional"===i.ngMetadataName||i===rt?n|=ot.Optional:i instanceof st||"SkipSelf"===i.ngMetadataName||i===st?n|=ot.SkipSelf:i instanceof it||"Self"===i.ngMetadataName||i===it?n|=ot.Self:t=i instanceof nt||i===nt?i.token:i}e.push(Kt(t,n))}else e.push(Kt(r))}return e}class Jt{get(t,e=jt){if(e===jt){const e=new Error(`NullInjectorError: No provider for ${wt(t)}!`);throw e.name="NullInjectorError",e}return e}}class Zt{}class te{}function ee(t,e){t.forEach(t=>Array.isArray(t)?ee(t,e):e(t))}function ne(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function re(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ie(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function se(t,e,n){let r=ae(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function oe(t,e){const n=ae(t,e);if(n>=0)return t[1|n]}function ae(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}var ue=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),ce=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const le={},he=[];let de=0;function fe(t){return Z(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ue.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||he,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ce.Emulated,id:"c",styles:t.styles||he,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=de++,n.inputs=ve(t.inputs,e),n.outputs=ve(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(pe):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(me):null,n})}function pe(t){return be(t)||function(t){return t[Nt]||null}(t)}function me(t){return function(t){return t[Rt]||null}(t)}const ge={};function ye(t){const e={type:t.type,bootstrap:t.bootstrap||he,declarations:t.declarations||he,imports:t.imports||he,exports:t.exports||he,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&Z(()=>{ge[t.id]=t.type}),e}function ve(t,e){if(null==t)return le;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const we=fe;function _e(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function be(t){return t[Dt]||null}function Ee(t,e){return t.hasOwnProperty(Lt)?t[Lt]:null}function Se(t,e){const n=t[Ot]||null;if(!n&&!0===e)throw new Error(`Type ${wt(t)} does not have '\u0275mod' property.`);return n}const Te=20,Ie=10;function Ce(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ae(t){return Array.isArray(t)&&!0===t[1]}function xe(t){return 0!=(8&t.flags)}function ke(t){return 2==(2&t.flags)}function De(t){return 1==(1&t.flags)}function Ne(t){return null!==t.template}function Re(t){return 0!=(512&t[2])}function Oe(t){return"string"==typeof t?t:null==t?"":""+t}function Pe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Oe(t)}const Le=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kt))();function Fe(t){return t instanceof Function?t():t}function Me(t,e){const n=e?" in "+e:"";throw new Error(`No provider for ${Pe(t)} found${n}`)}class Ve{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function je(){return Ue}function Ue(t){return t.type.prototype.ngOnChanges&&(t.setInput=Be),qe}function qe(){const t=ze(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===le)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Be(t,e,n,r){const i=ze(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:le,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new Ve(u&&u.currentValue,e,o===le),t[r]=e}function ze(t){return t.__ngSimpleChanges__||null}je.ngInherit=!0;const He="http://www.w3.org/2000/svg";let Ge=void 0;function $e(t){return!!t.listen}const We={createRenderer:(t,e)=>void 0!==Ge?Ge:"undefined"!=typeof document?document:void 0};function Ke(t){for(;Array.isArray(t);)t=t[0];return t}function Qe(t,e){return Ke(e[t+Te])}function Ye(t,e){return Ke(e[t.index])}function Xe(t,e){return t.data[e+Te]}function Je(t,e){const n=e[t];return Ce(n)?n:n[0]}function Ze(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function tn(t){return 4==(4&t[2])}function en(t){return 128==(128&t[2])}function nn(t,e){return null===t||null==e?null:t[e]}function rn(t){t[18]=0}function sn(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const on={lFrame:In(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function an(){return on.bindingsEnabled}function un(){return on.lFrame.lView}function cn(){return on.lFrame.tView}function ln(t){on.lFrame.contextLView=t}function hn(){return on.lFrame.currentTNode}function dn(t,e){on.lFrame.currentTNode=t,on.lFrame.isParent=e}function fn(){return on.lFrame.isParent}function pn(){on.lFrame.isParent=!1}function mn(){return on.isInCheckNoChangesMode}function gn(t){on.isInCheckNoChangesMode=t}function yn(){return on.lFrame.bindingIndex++}function vn(t,e){const n=on.lFrame;n.bindingIndex=n.bindingRootIndex=t,wn(e)}function wn(t){on.lFrame.currentDirectiveIndex=t}function _n(){return on.lFrame.currentQueryIndex}function bn(t){on.lFrame.currentQueryIndex=t}function En(t,e){const n=Tn();on.lFrame=n,n.currentTNode=e,n.lView=t}function Sn(t){const e=Tn(),n=t[1];on.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex}function Tn(){const t=on.lFrame,e=null===t?null:t.child;return null===e?In(t):e}function In(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Cn(){const t=on.lFrame;return on.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const An=Cn;function xn(){const t=Cn();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function kn(){return on.lFrame.selectedIndex}function Dn(t){on.lFrame.selectedIndex=t}function Nn(){const t=on.lFrame;return Xe(t.tView,t.selectedIndex)}function Rn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function On(t,e,n){Fn(t,e,3,n)}function Pn(t,e,n,r){(3&t[2])===n&&Fn(t,e,n,r)}function Ln(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Fn(t,e,n,r){const i=null!=r?r:-1;let s=0;for(let o=void 0!==r?65535&t[18]:0;o<e.length;o++)if("number"==typeof e[o+1]){if(s=e[o],null!=r&&s>=r)break}else e[o]<0&&(t[18]+=65536),(s<i||-1==i)&&(Mn(t,n,e,o),t[18]=(4294901760&t[18])+o+2),o++}function Mn(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,s.call(o)):s.call(o)}const Vn=-1;class jn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Un(t,e,n){const r=$e(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];Bn(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function qn(t){return 3===t||4===t||6===t}function Bn(t){return 64===t.charCodeAt(0)}function zn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Hn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Hn(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Gn(t){return t!==Vn}function $n(t){return 32767&t}function Wn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Kn=!0;function Qn(t){const e=Kn;return Kn=t,e}let Yn=0;function Xn(t,e){const n=Zn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Jn(r.data,t),Jn(e,null),Jn(r.blueprint,null));const i=tr(t,e),s=t.injectorIndex;if(Gn(i)){const t=$n(i),n=Wn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Jn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Zn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function tr(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Vn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Vn}function er(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ft)&&(r=n[Ft]),null==r&&(r=n[Ft]=Yn++);const i=255&r,s=1<<i,o=64&i,a=32&i,u=e.data;128&i?o?a?u[t+7]|=s:u[t+6]|=s:a?u[t+5]|=s:u[t+4]|=s:o?a?u[t+3]|=s:u[t+2]|=s:a?u[t+1]|=s:u[t]|=s}(t,e,n)}function nr(t,e,n,r=ot.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ft)?t[Ft]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){En(e,t);try{const t=i();if(null!=t||r&ot.Optional)return t;Me(n)}finally{An()}}else if("number"==typeof i){if(-1===i)return new cr(t,e);let s=null,o=Zn(t,e),a=Vn,u=r&ot.Host?e[16][6]:null;for((-1===o||r&ot.SkipSelf)&&(a=-1===o?tr(t,e):e[o+8],a!==Vn&&ur(r,!1)?(s=e[1],o=$n(a),e=Wn(a,e)):o=-1);-1!==o;){const t=e[1];if(ar(i,o,t.data)){const t=ir(o,e,n,s,r,u);if(t!==rr)return t}a=e[o+8],a!==Vn&&ur(r,e[1].data[o+8]===u)&&ar(i,o,e)?(s=t,o=$n(a),e=Wn(a,e)):o=-1}}}if(r&ot.Optional&&void 0===i&&(i=null),0==(r&(ot.Self|ot.Host))){const t=e[9],s=$t(void 0);try{return t?t.get(n,i,r&ot.Optional):Yt(n,i,r&ot.Optional)}finally{$t(s)}}if(r&ot.Optional)return i;Me(n,"NodeInjector")}const rr={};function ir(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=sr(a,o,n,null==r?ke(a)&&Kn:r!=o&&2===a.type,i&ot.Host&&s===a);return null!==u?or(e,o,u,a):rr}function sr(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&Ne(t)&&t.type===n)return u}return null}function or(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof jn){const o=i;o.resolving&&function(t,e){throw new Error("Circular dependency in DI detected for "+t)}(Pe(s[n]));const a=Qn(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?$t(o.injectImpl):null;En(t,r);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=Ue(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&$t(u),Qn(a),o.resolving=!1,An()}}return i}function ar(t,e,n){const r=64&t,i=32&t;let s;return s=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(s&1<<t)}function ur(t,e){return!(t&ot.Self||t&ot.Host&&e)}class cr{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return nr(this._tNode,this._lView,t,void 0,e)}}function lr(t){const e=t;if(Tt(t))return()=>{const t=lr(St(e));return t?t():null};let n=Ee(e);if(null===n){const t=ft(e);n=t&&t.factory}return n||null}function hr(t){return Z(()=>{const e=t.prototype.constructor,n=e[Lt]||lr(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Lt]||lr(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function dr(t){return t.ngDebugContext}function fr(t){return t.ngOriginalError}function pr(t,...e){t.error(...e)}class mr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||pr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?dr(t)?dr(t):this._findContext(fr(t)):null}_findOriginalError(t){let e=fr(t);for(;e&&fr(e);)e=fr(e);return e}}let gr=!0,yr=!1;function vr(){return yr=!0,gr}function wr(t,e){t.__ngContext__=e}function _r(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const br="ng-template";function Er(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==_r(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Sr(t){return 0===t.type&&t.tagName!==br}function Tr(t,e,n){return e===(0!==t.type||n?t.tagName:br)}function Ir(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(qn(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Tr(t,u,n)||""===u&&1===e.length){if(Cr(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Er(t.attrs,c,n)){if(Cr(r))return!1;o=!0}continue}const l=Ar(8&r?"class":u,i,Sr(t),n);if(-1===l){if(Cr(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==_r(e,c,0)||2&r&&c!==t){if(Cr(r))return!1;o=!0}}}}else{if(!o&&!Cr(r)&&!Cr(u))return!1;if(o&&Cr(u))continue;o=!1,r=u|1&r}}return Cr(r)||o}function Cr(t){return 0==(1&t)}function Ar(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function xr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Ir(t,e[r],n))return!0;return!1}function kr(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Dr(t,e){return t?":not("+e.trim()+")":e}function Nr(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Cr(o)||(e+=Dr(s,i),i=""),r=o,s=s||!Cr(r);n++}return""!==i&&(e+=Dr(s,i)),e}const Rr={};function Or(t){const e=t[3];return Ae(e)?e[3]:e}function Pr(t){return Fr(t[13])}function Lr(t){return Fr(t[4])}function Fr(t){for(;null!==t&&!Ae(t);)t=t[4];return t}function Mr(t){Vr(cn(),un(),kn()+t,mn())}function Vr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&On(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Pn(e,r,0,n)}Dn(n)}function jr(t,e){return t<<17|e<<2}function Ur(t){return t>>17&32767}function qr(t){return 2|t}function Br(t){return(131068&t)>>2}function zr(t,e){return-131069&t|e<<2}function Hr(t){return 1|t}function Gr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];bn(i),n.contentQueries(2,e[s],s)}}}function $r(t,e,n){return $e(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Wr(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,rn(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function Kr(t,e,n,r,i){const s=e+Te,o=t.data[s]||function(t,e,n,r,i){const s=hn(),o=fn(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o&&null==s.child&&null!==a.parent?s.child=a:o||(s.next=a)),a}(t,s,n,r,i);return dn(o,!0),o}function Qr(t,e,n){Sn(e);try{const r=t.viewQuery;null!==r&&Ci(1,r,n);const i=t.template;null!==i&&Jr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Gr(t,e),t.staticViewQueries&&Ci(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)bi(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,xn()}}function Yr(t,e,n,r){const i=e[2];if(256==(256&i))return;Sn(e);const s=mn();try{rn(e),on.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Jr(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&On(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Pn(e,n,0,null),Ln(e,0)}if(function(t){for(let e=Pr(t);null!==e;e=Lr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&sn(r,1),n[2]|=1024}}}(e),function(t){for(let e=Pr(t);null!==e;e=Lr(e))for(let t=Ie;t<e.length;t++){const n=e[t],r=n[1];en(n)&&Yr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Gr(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&On(e,n)}else{const n=t.contentHooks;null!==n&&Pn(e,n,1),Ln(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,s=-1;for(let t=0;t<n.length;t++){const o=n[t];"number"==typeof o?o<=0?(s=0-o,Dn(s),r+=9+n[++t],i=r):r+=o:(null!==o&&(vn(r,i),o(2,e[i])),i++)}}}finally{Dn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)_i(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ci(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&On(e,n)}else{const n=t.viewHooks;null!==n&&Pn(e,n,2),Ln(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,sn(e[3],-1))}finally{xn()}}function Xr(t,e,n,r){const i=e[10],s=!mn(),o=tn(e);try{s&&!o&&i.begin&&i.begin(),o&&Qr(t,e,r),Yr(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function Jr(t,e,n,r,i){const s=kn();try{Dn(-1),2&r&&e.length>Te&&Vr(t,e,0,mn()),n(r,i)}finally{Dn(s)}}function Zr(t,e,n){if(xe(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function ti(t,e,n){an()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Xn(n,e),wr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=Ne(r);s&&gi(e,n,r);const u=or(e,t,a,n);wr(u,e),null!==o&&yi(0,a-i,u,r,0,o),s&&(Je(n.index,e)[8]=u)}}(t,e,n,Ye(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=t.expandoInstructions,o=t.firstCreatePass,a=n.index-Te,u=on.lFrame.currentDirectiveIndex;try{Dn(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];wn(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?li(r,i):o&&s.push(null)}}finally{Dn(-1),wn(u)}}(t,e,n))}function ei(t,e,n=Ye){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function ni(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ri(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ri(t,e,n,r,i,s,o,a,u,c){const l=Te+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Rr);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function ii(t,e,n,r){const i=xi(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function si(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function oi(t,e,n,r,i,s,o,a){const u=Ye(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(Di(t,n,c,r,i),ke(e)&&function(t,e){const n=Je(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):2===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.tagName||"",r):i,$e(s)?s.setProperty(u,r,i):Bn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ai(t,e,n,r){let i=!1;if(an()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];xr(n,o.selectors,!1)&&(i||(i=[]),er(Xn(n,e),t,o.type),Ne(o)?(di(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){let r=0;i=!0,pi(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}hi(t,n,s.length);let a=!1,u=!1;for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=zn(n.mergedAttrs,c.hostAttrs),mi(t,e,c),fi(t.data.length-1,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-Te),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-Te),u=!0),ui(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Sr(e)?null:vi(n,i);s.push(c),o=si(n,u,o),a=si(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n),ci(t,e,r)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=zn(n.mergedAttrs,n.attrs),i}function ui(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function ci(t,e,n){for(let r=0;r<n;r++)e.push(Rr),t.blueprint.push(Rr),t.data.push(null)}function li(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function hi(t,e,n){const r=Te-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function di(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function fi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ne(e)&&(n[""]=t)}}function pi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function mi(t,e,n){t.data.push(n);const r=n.factory||(n.factory=Ee(n.type)),i=new jn(r,Ne(n),null);t.blueprint.push(i),e.push(i)}function gi(t,e,n){const r=Ye(e,t),i=ni(n),s=t[10],o=Ei(t,Wr(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function yi(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function vi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function wi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function _i(t,e){const n=Je(e,t);if(en(n)){const t=n[1];80&n[2]?Yr(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=Pr(e);null!==r;r=Lr(r))for(let e=Ie;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Yr(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Je(n[r],e);en(i)&&i[5]>0&&t(i)}}(n)}}function bi(t,e){const n=Je(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Qr(r,n,n[8])}function Ei(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Si(t){for(;t;){t[2]|=64;const e=Or(t);if(Re(t)&&!e)return t;t=e}return null}function Ti(t,e,n){const r=e[10];r.begin&&r.begin();try{Yr(t,e,t.template,n)}catch(i){throw ki(e,i),i}finally{r.end&&r.end()}}function Ii(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Ze(n),i=r[1];Xr(i,r,i.template,n)}}(t[8])}function Ci(t,e,n){bn(0),e(t,n)}const Ai=(()=>Promise.resolve(null))();function xi(t){return t[7]||(t[7]=[])}function ki(t,e){const n=t[9],r=n?n.get(mr,null):null;r&&r.handleError(e)}function Di(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ni(t,e,n,r,i){if(null!=r){let s,o=!1;Ae(r)?s=r:Ce(r)&&(o=!0,r=r[0]);const a=Ke(r);0===t&&null!==n?null==i?Vi(e,n,a):Mi(e,n,a,i||null):1===t&&null!==n?Mi(e,n,a,i||null):2===t?function(t,e,n){const r=Ui(t,e);r&&function(t,e,n,r){$e(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==Ke(n)&&Ni(e,t,r,s,i);for(let o=Ie;o<n.length;o++){const i=n[o];Hi(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Ri(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,sn(i,-1)),n.splice(r,1)}function Oi(t,e){if(t.length<=Ie)return;const n=Ie+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Ri(s,r),e>0&&(t[n-1][4]=r[4]);const o=re(t,Ie+e);Hi(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Pi(t,e){if(!(256&e[2])){const n=e[11];$e(n)&&n.destroyNode&&Hi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Li(t[1],t);for(;e;){let n=null;if(Ce(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Ce(e)&&Li(e[1],e),e=e[3];null===e&&(e=t),Ce(e)&&Li(e[1],e),n=e&&e[4]}e=n}}(e)}}function Li(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof jn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],s="function"==typeof i?i(e):Ke(e[i]),o=t[n[r+2]],a=n[r+3];"boolean"==typeof a?s.removeEventListener(n[r],o,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&$e(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Ae(e[3])){n!==e[3]&&Ri(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Fi(t,e,n){let r=e.parent;for(;null!=r&&(3===r.type||4===r.type);)r=(e=r).parent;if(null===r)return n[0];if(e&&4===e.type&&4&e.flags)return Ye(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==ce.ShadowDom&&n!==ce.Native)return null}return Ye(r,n)}function Mi(t,e,n,r){$e(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function Vi(t,e,n){$e(t)?t.appendChild(e,n):e.appendChild(n)}function ji(t,e,n,r){null!==r?Mi(t,e,n,r):Vi(t,e,n)}function Ui(t,e){return $e(t)?t.parentNode(e):e.parentNode}function qi(t,e){return 3===t.type||4===t.type?Ye(t,e):null}function Bi(t,e,n,r){const i=Fi(t,r,e);if(null!=i){const t=e[11],s=qi(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)ji(t,i,n[e],s);else ji(t,i,n,s)}}function zi(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;o&&0===e&&(a&&wr(Ke(a),r),n.flags|=4),64!=(64&n.flags)&&(3===u||4===u?(zi(t,e,n.child,r,i,s,!1),Ni(e,t,i,a,s)):1===u?Gi(t,e,r,n,i,s):Ni(e,t,i,a,s)),n=o?n.projectionNext:n.next}}function Hi(t,e,n,r,i,s){zi(n,r,t.firstChild,e,i,s,!1)}function Gi(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ni(e,t,i,a[u],s);else zi(t,e,a,o[3],i,s,!0)}function $i(t,e,n){$e(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Wi(t,e,n){$e(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Ki{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return function t(e,n,r,i,s=!1){for(;null!==r;){const o=n[r.index];if(null!==o&&i.push(Ke(o)),Ae(o))for(let e=Ie;e<o.length;e++){const n=o[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(3===a||4===a)t(e,n,r.child,i);else if(1===a){const e=n[16],s=e[6].projection[r.projection];if(Array.isArray(s))i.push(...s);else{const n=Or(e);t(n[1],n,s,i,!0)}}r=s?r.projectionNext:r.next}return i}(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Pi(this._lView[1],this._lView)}onDestroy(t){ii(this._lView[1],this._lView,null,t)}markForCheck(){Si(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ti(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){gn(!0);try{Ti(t,e,n)}finally{gn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Hi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Qi extends Ki{constructor(t){super(t),this._view=t}detectChanges(){Ii(this._view)}checkNoChanges(){!function(t){gn(!0);try{Ii(t)}finally{gn(!1)}}(this._view)}get context(){return null}}let Yi,Xi,Ji;function Zi(t,e,n){return Yi||(Yi=class extends t{}),new Yi(Ye(e,n))}function ts(t,e,n,r){return Xi||(Xi=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Wr(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Qr(e,n,t),new Ki(n)}}),0===n.type?new Xi(r,n,Zi(e,n,r)):null}function es(t,e,n,r){let i;Ji||(Ji=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Zi(e,this._hostTNode,this._hostView)}get injector(){return new cr(this._hostTNode,this._hostView)}get parentInjector(){const t=tr(this._hostTNode,this._hostView);if(Gn(t)){const e=Wn(t,this._hostView),n=$n(t);return new cr(e[1].data[n+8],e)}return new cr(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-Ie}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(Zt,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ae(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ji(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=Ie+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-Ie?(e[4]=n[i],ne(n,Ie+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=function t(e,n){const r=Ie+e+1;if(r<n.length){const e=n[r],i=e[1].firstChild;if(null!==i)return function e(n,r){if(null!==r){const i=r.type;if(2===i)return Ye(r,n);if(0===i)return t(-1,n[r.index]);if(3===i||4===i){const i=r.child;if(null!==i)return e(n,i);{const e=n[r.index];return Ae(e)?t(-1,e):Ke(e)}}{const t=n[16],i=t[6],s=Or(t),o=i.projection[r.projection];return null!=o?e(s,o):e(n,r.next)}}return null}(e,i)}return n[7]}(i,s),a=n[11],u=Ui(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,Hi(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(this),ne(s[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Oi(this._lContainer,e);n&&(re(this._lContainer[8],e),Pi(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Oi(this._lContainer,e);return n&&null!=re(this._lContainer[8],e)?new Ki(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const s=r[n.index];if(Ae(s))i=s;else{let t;if(3===n.type)t=Ke(s);else if(t=r[11].createComment(""),Re(r)){const e=r[11],i=Ye(n,r);Mi(e,Ui(e,i),t,function(t,e){return $e(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Bi(r[1],r,t,n);r[n.index]=i=wi(s,r,t,n),Ei(r,i)}return new Ji(i,n,r)}let ns=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>rs(),t})();const rs=function(t=!1){return function(t,e,n){if(!n&&ke(t)){const n=Je(t.index,e);return new Ki(n,n)}return 2===t.type||0===t.type||3===t.type||4===t.type?new Ki(e[16],e):null}(hn(),un(),t)},is=Function,ss=new Mt("Set Injector scope."),os={},as={},us=[];let cs=void 0;function ls(){return void 0===cs&&(cs=new Jt),cs}function hs(t,e=null,n=null,r){return new ds(t,n,e||ls(),r)}class ds{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ee(e,n=>this.processProvider(n,t,e)),ee([t],t=>this.processInjectorType(t,[],i)),this.records.set(Vt,ms(void 0,this));const s=this.records.get(ss);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:wt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=jt,n=ot.Default){this.assertNotDestroyed();const r=Gt(this);try{if(!(n&ot.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Mt)&&ht(t);e=n&&this.injectableDefInScope(n)?ms(fs(t),os):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&ot.Self?ls():this.parent).get(t,e=n&ot.Optional&&e===jt?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(wt(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[qt]&&i.unshift(e[qt]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=wt(e);if(Array.isArray(e))i=e.map(wt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):wt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ut,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{Gt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(wt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=St(t)))return!1;let r=ft(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=ft(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{ee(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ee(r,t=>this.processProvider(t,n,r||us))}}this.injectorDefTypes.add(s),this.records.set(s,ms(r.factory,os));const a=r.providers;if(null!=a&&!o){const e=t;ee(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ys(t=St(t))?t:St(t&&t.provide);const i=function(t,e,n){return gs(t)?ms(void 0,t.useValue):ms(ps(t),os)}(t);if(ys(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ms(void 0,os,!0),e.factory=()=>Xt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===os&&(e.value=as,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function fs(t){const e=ht(t),n=null!==e?e.factory:Ee(t);if(null!==n)return n;const r=ft(t);if(null!==r)return r.factory;if(t instanceof Mt)throw new Error(`Token ${wt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=ie(e,"?");throw new Error(`Can't resolve all parameters for ${wt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[pt]||t[yt]||t[gt]&&t[gt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ps(t,e,n){let r=void 0;if(ys(t)){const e=St(t);return Ee(e)||fs(e)}if(gs(t))r=()=>St(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Xt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Kt(St(t.useExisting));else{const e=St(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Ee(e)||fs(e);r=()=>new e(...Xt(t.deps))}var i;return r}function ms(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gs(t){return null!==t&&"object"==typeof t&&Bt in t}function ys(t){return"function"==typeof t}const vs=function(t,e,n){return function(t,e=null,n=null,r){const i=hs(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ws=(()=>{class t{static create(t,e){return Array.isArray(t)?vs(t,e,""):vs(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=jt,t.NULL=new Jt,t.\u0275prov=ct({token:t,providedIn:"any",factory:()=>Kt(Vt)}),t.__NG_ELEMENT_ID__=-1,t})();const _s=new Mt("AnalyzeForEntryComponents");function bs(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=_t(i,t):2==s&&(r=_t(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Es(t,e){const n=Ze(t)[1],r=n.data.length-1;Rn(n,{directiveStart:r,directiveEnd:r+1})}function Ss(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Ne(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Ts(t.inputs),e.declaredInputs=Ts(t.declaredInputs),e.outputs=Ts(t.outputs);const n=i.hostBindings;n&&As(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&Is(t,s),o&&Cs(t,o),ut(t.inputs,i.inputs),ut(t.declaredInputs,i.declaredInputs),ut(t.outputs,i.outputs),Ne(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Ss&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=zn(i.hostAttrs,n=zn(n,i.hostAttrs))}}(r)}function Ts(t){return t===le?{}:t===he?[]:t}function Is(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Cs(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function As(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let xs=null;function ks(){if(!xs){const t=kt.Symbol;if(t&&t.iterator)xs=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(xs=n)}}}return xs}class Ds{constructor(t){this.wrapped=t}static wrap(t){return new Ds(t)}static unwrap(t){return Ds.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ds}}function Ns(t){return!!Rs(t)&&(Array.isArray(t)||!(t instanceof Map)&&ks()in t)}function Rs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Os(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ps(t,e,n,r){const i=un();return Os(i,yn(),e)&&(cn(),function(t,e,n,r,i,s){const o=Ye(t,e),a=e[11];if(null==r)$e(a)?a.removeAttribute(o,n,s):o.removeAttribute(n);else{const e=null==i?Oe(r):i(r,t.tagName||"",n);$e(a)?a.setAttribute(o,n,e,s):s?o.setAttributeNS(s,n,e):o.setAttribute(n,e)}}(Nn(),i,t,e,n,r)),Ps}function Ls(t,e,n,r){return Os(t,yn(),n)?e+Oe(n)+r:Rr}function Fs(t,e,n,r,i,s,o,a){const u=un(),c=cn(),l=t+Te,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=Kr(e,t,0,o||null,nn(c,a));ai(e,n,l,nn(c,u)),Rn(e,l);const h=l.tViews=ri(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,s,o):c.data[l];dn(h,!1);const d=u[11].createComment("");Bi(c,u,d,h),wr(d,u),Ei(u,u[l]=wi(d,u,d,h)),De(h)&&ti(c,u,h),null!=o&&ei(u,h,a)}function Ms(t,e=ot.Default){const n=un();return null===n?Kt(t,e):nr(hn(),n,St(t),e)}function Vs(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(qn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(hn(),t)}function js(t,e,n){const r=un();return Os(r,yn(),e)&&oi(cn(),Nn(),r,t,e,r[11],n,!1),js}function Us(t,e,n,r,i){const s=i?"class":"style";Di(t,n,e.inputs[s],s,r)}function qs(t,e,n,r){const i=un(),s=cn(),o=Te+t,a=i[11],u=i[o]=$r(e,a,on.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=Kr(e,t,2,i,nn(a,s));return ai(e,n,u,nn(a,o)),null!==u.attrs&&bs(u,u.attrs,!1),null!==u.mergedAttrs&&bs(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,s,i,0,e,n,r):s.data[o];dn(c,!0);const l=c.mergedAttrs;null!==l&&Un(a,u,l);const h=c.classes;null!==h&&Wi(a,u,h);const d=c.styles;null!==d&&$i(a,u,d),Bi(s,i,u,c),0===on.lFrame.elementDepthCount&&wr(u,i),on.lFrame.elementDepthCount++,De(c)&&(ti(s,i,c),Zr(s,c,i)),null!==r&&ei(i,c)}function Bs(){let t=hn();fn()?pn():(t=t.parent,dn(t,!1));const e=t;on.lFrame.elementDepthCount--;const n=cn();n.firstCreatePass&&(Rn(n,t),xe(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Us(n,e,un(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Us(n,e,un(),e.stylesWithoutHost,!1)}function zs(t,e,n,r){qs(t,e,n,r),Bs()}function Hs(t,e,n){const r=un(),i=cn(),s=t+Te,o=i.firstCreatePass?function(t,e,n,r,i){const s=e.consts,o=nn(s,r),a=Kr(e,t,3,"ng-container",o);return null!==o&&bs(a,o,!0),ai(e,n,a,nn(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(t,i,r,e,n):i.data[s];dn(o,!0);const a=r[s]=r[11].createComment("");Bi(i,r,a,o),wr(a,r),De(o)&&(ti(i,r,o),Zr(i,o,r)),null!=n&&ei(r,o)}function Gs(){let t=hn();const e=cn();fn()?pn():(t=t.parent,dn(t,!1)),e.firstCreatePass&&(Rn(e,t),xe(t)&&e.queries.elementEnd(t))}function $s(t,e,n){Hs(t,e,n),Gs()}function Ws(){return un()}function Ks(t){return!!t&&"function"==typeof t.then}function Qs(t){return!!t&&"function"==typeof t.subscribe}function Ys(t,e,n=!1,r){const i=un(),s=cn(),o=hn();return function(t,e,n,r,i,s,o=!1,a){const u=De(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=xi(e);let h=!0;if(2===r.type){const d=Ye(r,e),f=a?a(d):le,p=f.target||d,m=l.length,g=a?t=>a(Ke(t[r.index])).target:r.index;if($e(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Js(r,e,s,!1);const t=n.listen(f.name||p,i,s);l.push(s,t),c&&c.push(i,g,m,m+1)}}else s=Js(r,e,s,!0),p.addEventListener(i,s,o),l.push(s),c&&c.push(i,g,m,o)}const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,n,r),Ys}function Xs(t,e,n){try{return!1!==e(n)}catch(r){return ki(t,r),!1}}function Js(t,e,n,r){return function i(s){if(s===Function)return n;const o=2&t.flags?Je(t.index,e):e;0==(32&e[2])&&Si(o);let a=Xs(e,n,s),u=i.__ngNextListenerFn__;for(;u;)a=Xs(e,u,s)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Zs(t=1){return function(t){return(on.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,on.lFrame.contextLView))[8]}(t)}function to(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?xr(t,s,!0):kr(r,s))return i}else n=i}return n}function eo(t){const e=un()[16][6];if(!e.projection){const n=e.projection=ie(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?to(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function no(t,e=0,n){const r=un(),i=cn(),s=Kr(i,t,1,null,n||null);null===s.projection&&(s.projection=e),pn(),function(t,e,n){Gi(e[11],0,e,n,Fi(t,n,e),qi(n.parent||e[6],e))}(i,r,s)}function ro(t,e,n){return io(t,"",e,"",n),ro}function io(t,e,n,r,i){const s=un(),o=Ls(s,e,n,r);return o!==Rr&&oi(cn(),Nn(),s,t,o,s[11],i,!1),io}const so=[];function oo(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Ur(s):Br(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];ao(t[a],e)&&(u=!0,t[a+1]=r?Hr(n):qr(n)),a=r?Ur(n):Br(n)}u&&(t[n+1]=r?qr(s):Hr(s))}function ao(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ae(t,e)>=0}function uo(t,e){return function(t,e,n,r){const i=un(),s=cn(),o=function(t){const e=on.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();s.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[kn()+Te],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(s)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=on.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=e.residualClasses;if(null===i)0===e.classBindings&&(n=lo(n=co(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=co(i,t,e,n,r),null===s){let n=function(t,e,n){const r=e.classBindings;if(0!==Br(r))return t[Ur(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=co(null,t,e,n[1],r),n=lo(n,e.attrs,r),function(t,e,n,r){t[Ur(e.classBindings)]=r}(t,e,0,n))}else s=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=lo(r,t[s].hostAttrs,true);return lo(r,e.attrs,true)}(t,e)}return void 0!==s&&(e.residualClasses=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=e.classBindings,a=Ur(o),u=Br(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ae(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Ur(t[a+1]);t[r+1]=jr(e,a),0!==e&&(t[e+1]=zr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=jr(a,0),0!==a&&(t[a+1]=zr(t[a+1],r)),a=r;else t[r+1]=jr(u,0),0===a?a=r:t[u+1]=zr(t[u+1],r),u=r;l&&(t[r+1]=qr(t[r+1])),oo(t,c,r,!0),oo(t,c,r,!1),function(t,e,n,r,i){const s=t.residualClasses;null!=s&&"string"==typeof e&&ae(s,e)>=0&&(n[r+1]=Hr(n[r+1]))}(e,c,t,r),o=jr(a,u),e.classBindings=o}(i,s,e,n,o)}}(s,t,o,true),e!==Rr&&Os(i,o,e)&&function(t,e,n,r,i,s,o,a){if(2!==e.type)return;const u=t.data,c=u[a+1];fo(1==(1&c)?ho(u,e,n,i,Br(c),o):void 0)||(fo(s)||function(t){return 2==(2&t)}(c)&&(s=ho(u,null,n,i,a,o)),function(t,e,n,r,i){const s=$e(t);i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r)}(r,0,Qe(kn(),n),i,s))}(s,s.data[kn()+Te],i,i[11],t,i[o+1]=function(t,e){return null==t||"object"==typeof t&&(t=wt(function(t){return t instanceof class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}?t.changingThisBreaksApplicationSecurity:t}(t))),t}(e),true,o)}(t,e),uo}function co(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=lo(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function lo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),se(t,o,!!n||e[++s]))}return void 0===t?null:t}function ho(t,e,n,r,i,s){const o=null===e;let a=void 0;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===Rr&&(l=c?so:void 0);let h=c?oe(l,r):u===r?l:void 0;if(s&&!fo(h)&&(h=oe(e,r)),fo(h)&&(a=h,o))return a;const d=t[i+1];i=o?Ur(d):Br(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=oe(t,r))}return a}function fo(t){return void 0!==t}function po(t,e=""){const n=un(),r=cn(),i=t+Te,s=r.firstCreatePass?Kr(r,t,2,null,null):r.data[i],o=n[i]=function(t,e){return $e(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Bi(r,n,o,s),dn(s,!1)}function mo(t){return go("",t,""),mo}function go(t,e,n){const r=un(),i=Ls(r,t,e,n);return i!==Rr&&function(t,e,n){const r=Qe(e,t),i=t[11];$e(i)?i.setValue(r,n):r.textContent=n}(r,kn(),i),go}const yo=void 0;var vo=["en",[["a","p"],["AM","PM"],yo],[["AM","PM"],yo,yo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yo,"{1} 'at' {0}",yo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let wo={};function _o(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=bo(e);if(n)return n;const r=e.split("-")[0];if(n=bo(r),n)return n;if("en"===r)return vo;throw new Error(`Missing locale data for the locale "${t}".`)}function bo(t){return t in wo||(wo[t]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[t]),wo[t]}var Eo=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const So="en-US";let To=So;function Io(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(To=t.toLowerCase().replace(/_/g,"-"))}function Co(t,e,n,r,i){if(t=St(t),Array.isArray(t))for(let s=0;s<t.length;s++)Co(t[s],e,n,r,i);else{const s=cn(),o=un();let a=ys(t)?t:St(t.provide),u=ps(t);const c=hn(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(ys(t)||!t.multi){const r=new jn(u,i,Ms),f=ko(a,e,i?l:l+d,h);-1===f?(er(Xn(c,o),s,a),Ao(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=ko(a,e,l+d,h),p=ko(a,e,l,l+d),m=f>=0&&n[f],g=p>=0&&n[p];if(i&&!g||!i&&!m){er(Xn(c,o),s,a);const l=function(t,e,n,r,i){const s=new jn(t,n,Ms);return s.multi=[],s.index=e,s.componentProviders=0,xo(s,i,r&&!n),s}(i?No:Do,n.length,i,r,u);!i&&g&&(n[p].providerFactory=l),Ao(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else Ao(s,t,f>-1?f:p,xo(n[i?p:f],u,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function Ao(t,e,n,r){const i=ys(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function xo(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ko(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Do(t,e,n,r){return Ro(this.multi,[])}function No(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=or(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),Ro(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Ro(i,s);return s}function Ro(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Oo(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=cn();if(r.firstCreatePass){const i=Ne(t);Co(n,r.data,r.blueprint,i,!0),Co(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Po{}class Lo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${wt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Fo=(()=>{class t{}return t.NULL=new Lo,t})(),Mo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Vo(t),t})();const Vo=function(t){return Zi(t,hn(),un())};class jo{}var Uo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let qo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Bo(),t})();const Bo=function(){const t=un(),e=Je(hn().index,t);return function(t){const e=t[11];if($e(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Ce(e)?e:t)};let zo=(()=>{class t{}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>null}),t})();class Ho{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Go=new Ho("10.2.5");class $o{constructor(){}supports(t){return Ns(t)}create(t){return new Ko(t)}}const Wo=(t,e)=>e;class Ko{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Wo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<Jo(n,r,i)?e:n,o=Jo(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ns(t))throw new Error(`Error trying to diff '${wt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ks()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Qo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Xo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Xo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Qo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Xo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Yo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Jo(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Zo{constructor(){}supports(t){return t instanceof Map||Rs(t)}create(){return new ta}}class ta{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Rs(t)))throw new Error(`Error trying to diff '${wt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ea(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ea{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let na=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>new t([new $o])}),t})(),ra=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>new t([new Zo])}),t})();const ia=[new Zo],sa=new na([new $o]),oa=new ra(ia);let aa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ua(t,Mo),t})();const ua=function(t,e){return ts(t,e,hn(),un())};let ca=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>la(t,Mo),t})();const la=function(t,e){return es(t,e,hn(),un())},ha={};class da extends Fo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=be(t);return new ma(e,this.ngModule)}}function fa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const pa=new Mt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Le});class ma extends Po{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Nr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return fa(this.componentDef.inputs)}get outputs(){return fa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,ha,i);return s!==ha||r===ha?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(jo,We),o=i.get(zo,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if($e(t))return t.selectRootElement(e,n===ce.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):$r(u,s.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?He:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Le,clean:Ai,playerHandler:null,flags:0},d=ri(0,null,null,1,0,null,null,null,null,null),f=Wr(null,d,h,l,null,null,s,a,o,i);let p,m;Sn(f);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=Kr(o,0,2,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(bs(a,u,!0),null!==t&&(Un(i,t,u),null!==a.classes&&Wi(i,t,a.classes),null!==a.styles&&$i(i,t,a.styles)));const c=r.createRenderer(t,e),l=Wr(n,ni(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(er(Xn(a,n),o,e.type),di(o,a),pi(a,n.length,1)),Ei(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)Un(a,c,["ng-version",Go.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Cr(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Un(a,c,t),e&&e.length>0&&Wi(a,c,e.join(" "))}if(m=Xe(d,0),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=hn();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),hi(t,r,1),mi(t,e,n));const i=or(e,t,e.length-1,r);wr(i,e);const s=Ye(r,e);return s&&wr(s,e),i}(s,n,e);r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries&&e.contentQueries(1,o,n.length-1);const a=hn();if(s.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Dn(a.index-Te);const t=n[1];ui(t,e),ci(t,n,e.hostVars),li(e,o)}return o}(t,this.componentDef,f,h,[Es]),Qr(d,f,null)}finally{xn()}return new ga(this.componentType,p,Zi(Mo,m,f),f,m)}}class ga extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Qi(r),this.componentType=t}get injector(){return new cr(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const ya=new Map;class va extends Zt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new da(this);const n=Se(t),r=t[Pt]||null;r&&Io(r),this._bootstrapComponents=Fe(n.bootstrap),this._r3Injector=hs(t,e,[{provide:Zt,useValue:this},{provide:Fo,useValue:this.componentFactoryResolver}],wt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ws.THROW_IF_NOT_FOUND,n=ot.Default){return t===ws||t===Zt||t===Vt?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class wa extends te{constructor(t){super(),this.moduleType=t,null!==Se(t)&&function(t){const e=new Set;!function t(n){const r=Se(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${wt(e)} vs ${wt(e.name)}`)}(i,ya.get(i),n),ya.set(i,n));const s=Fe(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new va(this.moduleType,t)}}function _a(t,e){const n=cn();let r;const i=t+Te;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Ee(r.type)),o=$t(Ms);try{const e=Qn(!1),r=s();return Qn(e),function(t,e,n,r){const i=n+Te;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,un(),t,r),r}finally{$t(o)}}function ba(t,e,n){const r=un(),i=function(t,e){return t[e+Te]}(r,t);return function(t,e){return Ds.isWrapped(e)&&(e=Ds.unwrap(e),t[on.lFrame.bindingIndex]=Rr),e}(r,function(t,e){return t[1].data[e+Te].pure}(r,t)?function(t,e,n,r,i,s){const o=e+n;return Os(t,o,i)?function(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function(t,e){const n=t[e];return n===Rr?void 0:n}(t,o+1)}(r,function(){const t=on.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,i.transform,n,i):i.transform(n))}const Ea=class extends S{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(r,i,s);return t instanceof h&&t.add(o),o}};function Sa(){return this._results[ks()]()}class Ta{constructor(){this.dirty=!0,this._results=[],this.changes=new Ea,this.length=0;const t=ks(),e=Ta.prototype;e[t]||(e[t]=Sa)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ia{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ia(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ca{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ca(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==qa(t,e).matches&&this.queries[e].setDirty()}}class Aa{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class xa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new xa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ka{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new ka(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&3===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Da(e,i)),this.matchTNodeWithReadOption(t,e,sr(e,t,i,!1,!1))}else n===aa?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,sr(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Mo||r===ca||r===aa&&0===e.type)this.addMatch(e.index,-2);else{const n=sr(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Da(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Na(t,e,n,r){return-1===n?function(t,e){return 2===t.type||3===t.type?Zi(Mo,t,e):0===t.type?ts(aa,Mo,t,e):null}(e,t):-2===n?function(t,e,n){return n===Mo?Zi(Mo,e,t):n===aa?ts(aa,Mo,e,t):n===ca?es(ca,Mo,e,t):void 0}(t,e,r):or(t,t[1],n,e)}function Ra(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:Na(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Oa(t){const e=un(),n=cn(),r=_n();bn(r+1);const i=qa(n,r);if(t.dirty&&tn(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?function t(e,n,r,i){const s=e.queries.getByIndex(r),o=s.matches;if(null!==o){const a=Ra(e,n,s,r);for(let e=0;e<o.length;e+=2){const r=o[e];if(r>0)i.push(a[e/2]);else{const s=o[e+1],a=n[-r];for(let e=Ie;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,s,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,s,i)}}}}}return i}(n,e,r,[]):Ra(n,e,i,r);t.reset(s),t.notifyOnChanges()}return!0}return!1}function Pa(t,e,n){Fa(cn(),un(),t,e,n,!0)}function La(t,e,n){Fa(cn(),un(),t,e,n,!1)}function Fa(t,e,n,r,i,s){t.firstCreatePass&&(Ua(t,new Aa(n,r,s,i),-1),s&&(t.staticViewQueries=!0)),ja(t,e)}function Ma(t,e,n,r){!function(t,e,n,r,i,s,o,a){t.firstCreatePass&&(Ua(t,new Aa(n,r,false,i),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),ja(t,e)}(cn(),un(),e,n,r,0,hn(),t)}function Va(){return t=un(),e=_n(),t[19].queries[e].queryList;var t,e}function ja(t,e){const n=new Ta;ii(t,e,n,n.destroy),null===e[19]&&(e[19]=new Ca),e[19].queries.push(new Ia(n))}function Ua(t,e,n){null===t.queries&&(t.queries=new xa),t.queries.track(new ka(e,n))}function qa(t,e){return t.queries.getByIndex(e)}const Ba=new Mt("Application Initializer");let za=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ks(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ba,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Ha=new Mt("AppId"),Ga={provide:Ha,useFactory:function(){return`${$a()}${$a()}${$a()}`},deps:[]};function $a(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Wa=new Mt("Platform Initializer"),Ka=new Mt("Platform ID"),Qa=new Mt("appBootstrapListener");let Ya=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Xa=new Mt("LocaleId"),Ja=new Mt("DefaultCurrencyCode");class Za{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const tu=function(t){return new wa(t)},eu=tu,nu=function(t){return Promise.resolve(tu(t))},ru=function(t){const e=tu(t),n=Fe(Se(t).declarations).reduce((t,e)=>{const n=be(e);return n&&t.push(new ma(n)),t},[]);return new Za(e,n)},iu=ru,su=function(t){return Promise.resolve(ru(t))};let ou=(()=>{class t{constructor(){this.compileModuleSync=eu,this.compileModuleAsync=nu,this.compileModuleAndAllComponentsSync=iu,this.compileModuleAndAllComponentsAsync=su}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const au=(()=>Promise.resolve(0))();function uu(t){"undefined"==typeof Zone?au.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class cu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ea(!1),this.onMicrotaskEmpty=new Ea(!1),this.onStable=new Ea(!1),this.onError=new Ea(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=kt.requestAnimationFrame,e=kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(kt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,fu(t),du(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),fu(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,s,o,a)=>{try{return pu(t),n.invokeTask(i,s,o,a)}finally{e&&"eventTask"===s.type&&e(),mu(t)}},onInvoke:(e,n,r,i,s,o,a)=>{try{return pu(t),e.invoke(r,i,s,o,a)}finally{mu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,fu(t),du(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(cu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,hu,lu,lu);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function lu(){}const hu={};function du(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function pu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mu(t){t._nesting--,du(t)}class gu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ea,this.onMicrotaskEmpty=new Ea,this.onStable=new Ea,this.onError=new Ea}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let yu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cu.assertNotInAngularZone(),uu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())uu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Kt(cu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),vu=(()=>{class t{constructor(){this._applications=new Map,bu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return bu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class wu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let _u,bu=new wu;const Eu=new Mt("AllowMultipleToken");class Su{constructor(t,e){this.name=t,this.token=e}}function Tu(t,e,n=[]){const r="Platform: "+e,i=new Mt(r);return(e=[])=>{let s=Iu();if(!s||s.injector.get(Eu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:ss,useValue:"platform"});!function(t){if(_u&&!_u.destroyed&&!_u.injector.get(Eu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_u=t.get(Cu);const e=t.get(Wa,null);e&&e.forEach(t=>t())}(ws.create({providers:t,name:r}))}return function(t){const e=Iu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Iu(){return _u&&!_u.destroyed?_u:null}let Cu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new gu:("zone.js"===t?void 0:t)||new cu({enableLongStackTrace:vr(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:cu,useValue:n}];return n.run(()=>{const e=ws.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(mr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>ku(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{s.handleError(t)}})),function(t,e,n){try{const r=n();return Ks(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(za);return t.runInitializers(),t.donePromise.then(()=>(Io(i.injector.get(Xa,So)||So),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Au({},e);return function(t,e,n){const r=new wa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(xu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${wt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Kt(ws))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function Au(t,e){return Array.isArray(e)?e.reduce(Au,t):Object.assign(Object.assign({},t),e)}let xu=(()=>{class t{constructor(t,e,n,r,i,s){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=vr(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new v(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new v(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{cu.assertNotInAngularZone(),uu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{cu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=G(o,a.pipe(t=>{return $()((e=J,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,Y);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Po?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Zt),i=n.create(ws.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const s=i.injector.get(yu,null);return s&&i.injector.get(vu).registerApplication(i.location.nativeElement,s),this._loadComponent(i),vr()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;ku(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Qa,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),ku(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Kt(cu),Kt(Ya),Kt(ws),Kt(mr),Kt(Fo),Kt(za))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function ku(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Du{}class Nu{}const Ru={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ou=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Ru}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Pu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Pu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Kt(ou),Kt(Nu,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function Pu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Lu=Tu(null,"core",[{provide:Ka,useValue:"unknown"},{provide:Cu,deps:[ws]},{provide:vu,deps:[]},{provide:Ya,deps:[]}]),Fu=[{provide:xu,useClass:xu,deps:[cu,Ya,ws,mr,Fo,za]},{provide:pa,deps:[cu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:za,useClass:za,deps:[[new rt,Ba]]},{provide:ou,useClass:ou,deps:[]},Ga,{provide:na,useFactory:function(){return sa},deps:[]},{provide:ra,useFactory:function(){return oa},deps:[]},{provide:Xa,useFactory:function(t){return Io(t=t||"undefined"!=typeof $localize&&$localize.locale||So),t},deps:[[new nt(Xa),new rt,new st]]},{provide:Ja,useValue:"USD"}];let Mu=(()=>{class t{constructor(t){}}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Kt(xu))},providers:Fu}),t})(),Vu=null;function ju(){return Vu}const Uu=new Mt("DocumentToken");let qu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:Bu,token:t,providedIn:"platform"}),t})();function Bu(){return Kt(Hu)}const zu=new Mt("Location Initialized");let Hu=(()=>{class t extends qu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=ju().getLocation(),this._history=ju().getHistory()}getBaseHrefFromDOM(){return ju().getBaseHref(this._doc)}onPopState(t){ju().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){ju().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Gu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Gu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Kt(Uu))},t.\u0275prov=ct({factory:$u,token:t,providedIn:"platform"}),t})();function Gu(){return!!window.history.pushState}function $u(){return new Hu(Kt(Uu))}function Wu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Ku(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Qu(t){return t&&"?"!==t[0]?"?"+t:t}let Yu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:Xu,token:t,providedIn:"root"}),t})();function Xu(t){const e=Kt(Uu).location;return new Zu(Kt(qu),e&&e.origin||"")}const Ju=new Mt("appBaseHref");let Zu=(()=>{class t extends Yu{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Wu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Qu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Qu(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Qu(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Kt(qu),Kt(Ju,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),tc=(()=>{class t extends Yu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Wu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Qu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Qu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Kt(qu),Kt(Ju,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),ec=(()=>{class t{constructor(t,e){this._subject=new Ea,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Ku(rc(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Qu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,rc(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Kt(Yu),Kt(qu))},t.normalizeQueryParams=Qu,t.joinWithSlash=Wu,t.stripTrailingSlash=Ku,t.\u0275prov=ct({factory:nc,token:t,providedIn:"root"}),t})();function nc(){return new ec(Kt(Yu),Kt(qu))}function rc(t){return t.replace(/\/index.html$/,"")}var ic=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),sc=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),oc=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),ac=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),uc=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),cc=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function lc(t,e){return mc(_o(t)[Eo.DateFormat],e)}function hc(t,e){return mc(_o(t)[Eo.TimeFormat],e)}function dc(t,e){return mc(_o(t)[Eo.DateTimeFormat],e)}function fc(t,e){const n=_o(t),r=n[Eo.NumberSymbols][e];if(void 0===r){if(e===cc.CurrencyDecimal)return n[Eo.NumberSymbols][cc.Decimal];if(e===cc.CurrencyGroup)return n[Eo.NumberSymbols][cc.Group]}return r}function pc(t){if(!t[Eo.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Eo.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function mc(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function gc(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const yc=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,vc={},wc=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var _c=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),bc=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),Ec=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function Sc(t,e,n,r){let i=function(t){if(Rc(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(yc))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,u,c),e}(n)}const e=new Date(t);if(!Rc(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const r=function(t){return _o(t)[Eo.LocaleId]}(e);if(vc[r]=vc[r]||{},vc[r][n])return vc[r][n];let i="";switch(n){case"shortDate":i=lc(e,uc.Short);break;case"mediumDate":i=lc(e,uc.Medium);break;case"longDate":i=lc(e,uc.Long);break;case"fullDate":i=lc(e,uc.Full);break;case"shortTime":i=hc(e,uc.Short);break;case"mediumTime":i=hc(e,uc.Medium);break;case"longTime":i=hc(e,uc.Long);break;case"fullTime":i=hc(e,uc.Full);break;case"short":const n=t(e,"shortTime"),r=t(e,"shortDate");i=Tc(dc(e,uc.Short),[n,r]);break;case"medium":const s=t(e,"mediumTime"),o=t(e,"mediumDate");i=Tc(dc(e,uc.Medium),[s,o]);break;case"long":const a=t(e,"longTime"),u=t(e,"longDate");i=Tc(dc(e,uc.Long),[a,u]);break;case"full":const c=t(e,"fullTime"),l=t(e,"fullDate");i=Tc(dc(e,uc.Full),[c,l])}return i&&(vc[r][n]=i),i}(n,e)||e;let s,o=[];for(;e;){if(s=wc.exec(e),!s){o.push(e);break}{o=o.concat(s.slice(1));const t=o.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=Nc(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Nc(e,r)-r))}(i,r));let u="";return o.forEach(t=>{const e=function(t){if(Dc[t])return Dc[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ac(Ec.Eras,ac.Abbreviated);break;case"GGGG":e=Ac(Ec.Eras,ac.Wide);break;case"GGGGG":e=Ac(Ec.Eras,ac.Narrow);break;case"y":e=Cc(bc.FullYear,1,0,!1,!0);break;case"yy":e=Cc(bc.FullYear,2,0,!0,!0);break;case"yyy":e=Cc(bc.FullYear,3,0,!1,!0);break;case"yyyy":e=Cc(bc.FullYear,4,0,!1,!0);break;case"M":case"L":e=Cc(bc.Month,1,1);break;case"MM":case"LL":e=Cc(bc.Month,2,1);break;case"MMM":e=Ac(Ec.Months,ac.Abbreviated);break;case"MMMM":e=Ac(Ec.Months,ac.Wide);break;case"MMMMM":e=Ac(Ec.Months,ac.Narrow);break;case"LLL":e=Ac(Ec.Months,ac.Abbreviated,oc.Standalone);break;case"LLLL":e=Ac(Ec.Months,ac.Wide,oc.Standalone);break;case"LLLLL":e=Ac(Ec.Months,ac.Narrow,oc.Standalone);break;case"w":e=kc(1);break;case"ww":e=kc(2);break;case"W":e=kc(1,!0);break;case"d":e=Cc(bc.Date,1);break;case"dd":e=Cc(bc.Date,2);break;case"E":case"EE":case"EEE":e=Ac(Ec.Days,ac.Abbreviated);break;case"EEEE":e=Ac(Ec.Days,ac.Wide);break;case"EEEEE":e=Ac(Ec.Days,ac.Narrow);break;case"EEEEEE":e=Ac(Ec.Days,ac.Short);break;case"a":case"aa":case"aaa":e=Ac(Ec.DayPeriods,ac.Abbreviated);break;case"aaaa":e=Ac(Ec.DayPeriods,ac.Wide);break;case"aaaaa":e=Ac(Ec.DayPeriods,ac.Narrow);break;case"b":case"bb":case"bbb":e=Ac(Ec.DayPeriods,ac.Abbreviated,oc.Standalone,!0);break;case"bbbb":e=Ac(Ec.DayPeriods,ac.Wide,oc.Standalone,!0);break;case"bbbbb":e=Ac(Ec.DayPeriods,ac.Narrow,oc.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ac(Ec.DayPeriods,ac.Abbreviated,oc.Format,!0);break;case"BBBB":e=Ac(Ec.DayPeriods,ac.Wide,oc.Format,!0);break;case"BBBBB":e=Ac(Ec.DayPeriods,ac.Narrow,oc.Format,!0);break;case"h":e=Cc(bc.Hours,1,-12);break;case"hh":e=Cc(bc.Hours,2,-12);break;case"H":e=Cc(bc.Hours,1);break;case"HH":e=Cc(bc.Hours,2);break;case"m":e=Cc(bc.Minutes,1);break;case"mm":e=Cc(bc.Minutes,2);break;case"s":e=Cc(bc.Seconds,1);break;case"ss":e=Cc(bc.Seconds,2);break;case"S":e=Cc(bc.FractionalSeconds,1);break;case"SS":e=Cc(bc.FractionalSeconds,2);break;case"SSS":e=Cc(bc.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=xc(_c.Short);break;case"ZZZZZ":e=xc(_c.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=xc(_c.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=xc(_c.Long);break;default:return null}return Dc[t]=e,e}(t);u+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Tc(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t}function Ic(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),s+o}function Cc(t,e,n=0,r=!1,i=!1){return function(s,o){let a=function(t,e){switch(t){case bc.FullYear:return e.getFullYear();case bc.Month:return e.getMonth();case bc.Date:return e.getDate();case bc.Hours:return e.getHours();case bc.Minutes:return e.getMinutes();case bc.Seconds:return e.getSeconds();case bc.FractionalSeconds:return e.getMilliseconds();case bc.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===bc.Hours)0===a&&-12===n&&(a=12);else if(t===bc.FractionalSeconds)return u=e,Ic(a,3).substr(0,u);var u;const c=fc(o,cc.MinusSign);return Ic(a,e,c,r,i)}}function Ac(t,e,n=oc.Format,r=!1){return function(i,s){return function(t,e,n,r,i,s){switch(n){case Ec.Months:return function(t,e,n){const r=_o(t),i=mc([r[Eo.MonthsFormat],r[Eo.MonthsStandalone]],e);return mc(i,n)}(e,i,r)[t.getMonth()];case Ec.Days:return function(t,e,n){const r=_o(t),i=mc([r[Eo.DaysFormat],r[Eo.DaysStandalone]],e);return mc(i,n)}(e,i,r)[t.getDay()];case Ec.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(s){const t=function(t){const e=_o(t);return pc(e),(e[Eo.ExtraData][2]||[]).map(t=>"string"==typeof t?gc(t):[gc(t[0]),gc(t[1])])}(e),n=function(t,e,n){const r=_o(t);pc(r);const i=mc([r[Eo.ExtraData][0],r[Eo.ExtraData][1]],e)||[];return mc(i,n)||[]}(e,i,r),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=o>=e.hours&&a>=e.minutes,i=o<n.hours||o===n.hours&&a<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===o&&t.minutes===a)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const r=_o(t),i=mc([r[Eo.DayPeriodsFormat],r[Eo.DayPeriodsStandalone]],e);return mc(i,n)}(e,i,r)[o<12?0:1];case Ec.Eras:return function(t,e){return mc(_o(t)[Eo.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(i,s,t,e,n,r)}}function xc(t){return function(e,n,r){const i=-1*r,s=fc(n,cc.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case _c.Short:return(i>=0?"+":"")+Ic(o,2,s)+Ic(Math.abs(i%60),2,s);case _c.ShortGMT:return"GMT"+(i>=0?"+":"")+Ic(o,1,s);case _c.Long:return"GMT"+(i>=0?"+":"")+Ic(o,2,s)+":"+Ic(Math.abs(i%60),2,s);case _c.Extended:return 0===r?"Z":(i>=0?"+":"")+Ic(o,2,s)+":"+Ic(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}function kc(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=(s=n,new Date(s.getFullYear(),s.getMonth(),s.getDate()+(4-s.getDay()))),e=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}var s;return Ic(i,t,fc(r,cc.MinusSign))}}const Dc={};function Nc(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Rc(t){return t instanceof Date&&!isNaN(t.valueOf())}const Oc=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Pc=".",Lc="0";function Fc(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class Mc{}let Vc=(()=>{class t extends Mc{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return _o(t)[Eo.PluralCase]}(e||this.locale)(t)){case sc.Zero:return"zero";case sc.One:return"one";case sc.Two:return"two";case sc.Few:return"few";case sc.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Kt(Xa))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class jc{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Uc=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){vr()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new jc(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new qc(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new qc(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ms(ca),Ms(aa),Ms(na))},t.\u0275dir=we({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class qc{constructor(t,e){this.record=t,this.view=e}}let Bc=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new zc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Hc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Hc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ms(ca),Ms(aa))},t.\u0275dir=we({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class zc{constructor(){this.$implicit=null,this.ngIf=null}}function Hc(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${wt(e)}'.`)}let Gc=(()=>{class t{constructor(t){this._locale=t}transform(e,n,r){if(function(t){return null==t||""===t||t!=t}(e))return null;r=r||this._locale;try{return function(t,e,n){return function(t,e,n,r,i,s,o=!1){let a="",u=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,s,o=Math.abs(t)+"",a=0;for((n=o.indexOf(Pc))>-1&&(o=o.replace(Pc,"")),(r=o.search(/e/i))>0?(n<0&&(n=r),n+=+o.slice(r+1),o=o.substring(0,r)):n<0&&(n=o.length),r=0;o.charAt(r)===Lc;r++);if(r===(s=o.length))e=[0],n=1;else{for(s--;o.charAt(s)===Lc;)s--;for(n-=r,e=[],i=0;r<=s;r++,i++)e[i]=Number(o.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);o&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let l=e.minInt,h=e.minFrac,d=e.maxFrac;if(s){const t=s.match(Oc);if(null===t)throw new Error(s+" is not a valid digit info");const e=t[1],n=t[3],r=t[5];null!=e&&(l=Fc(e)),null!=n&&(h=Fc(n)),null!=r?d=Fc(r):null!=n&&h>d&&(d=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const s=Math.min(Math.max(e,i),n);let o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let t=o;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let t=1;t<o;t++)r[t]=0}if(a>=5)if(o-1<0){for(let e=0;e>o;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=0!==s;const c=e+t.integerLen,l=r.reduceRight((function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),e>=10?1:0}),0);l&&(r.unshift(l),t.integerLen++)}(c,h,d);let f=c.digits,p=c.integerLen;const m=c.exponent;let g=[];for(u=f.every(t=>!t);p<l;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?g=f.splice(p,f.length):(g=f,f=[0]);const y=[];for(f.length>=e.lgSize&&y.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)y.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(fc(n,r)),g.length&&(a+=fc(n,i)+g.join("")),m&&(a+=fc(n,cc.Exponential)+"+"+m)}else a=fc(n,cc.Infinity);return a=t<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(Pc)?i.split(Pc):[i.substring(0,i.lastIndexOf(Lc)+1),i.substring(i.lastIndexOf(Lc)+1)],a=o[0],u=o[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<u.length;l++){const t=u.charAt(l);t===Lc?n.minFrac=n.maxFrac=l+1:"#"===t?n.maxFrac=l+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const t=i.length-n.posPre.length-n.posSuf.length,e=s.indexOf("#");n.negPre=s.substr(0,e).replace(/'/g,""),n.negSuf=s.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return _o(t)[Eo.NumberFormats][e]}(e,ic.Decimal),fc(e,cc.MinusSign)),e,cc.Group,cc.Decimal,n)}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(t+" is not a number");return t}(e),r,n)}catch(i){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${wt(t)}'`)}(t,i.message)}}}return t.\u0275fac=function(e){return new(e||t)(Ms(Xa))},t.\u0275pipe=_e({name:"number",type:t,pure:!0}),t})(),$c=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[{provide:Mc,useClass:Vc}]}),t})(),Wc=(()=>{class t{}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>new Kc(Kt(Uu),window,Kt(mr))}),t})();class Kc{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=Qc(this.window.history)||Qc(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function Qc(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Yc extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Yc,Vu||(Vu=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Jc||(Jc=document.querySelector("base"),Jc)?Jc.getAttribute("href"):null;return null==e?null:(n=e,Xc||(Xc=document.createElement("a")),Xc.setAttribute("href",n),"/"===Xc.pathname.charAt(0)?Xc.pathname:"/"+Xc.pathname);var n}resetBaseElement(){Jc=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Xc,Jc=null;const Zc=new Mt("TRANSITION_ID"),tl=[{provide:Ba,useFactory:function(t,e,n){return()=>{n.get(za).donePromise.then(()=>{const n=ju();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Zc,Uu,ws],multi:!0}];class el{static init(){var t;t=new el,bu=t}addToWindow(t){kt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},kt.getAllAngularTestabilities=()=>t.getAllTestabilities(),kt.getAllAngularRootElements=()=>t.getAllRootElements(),kt.frameworkStabilizers||(kt.frameworkStabilizers=[]),kt.frameworkStabilizers.push(t=>{const e=kt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(i)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?ju().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const nl=new Mt("EventManagerPlugins");let rl=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(Kt(nl),Kt(cu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class il{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=ju().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let sl=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),ol=(()=>{class t extends sl{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>ju().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Kt(Uu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const al={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ul=/%COMP%/g;function cl(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?cl(t,i,n):(i=i.replace(ul,t),n.push(i))}return n}function ll(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let hl=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new dl(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case ce.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new fl(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case ce.Native:case ce.ShadowDom:return new pl(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=cl(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Kt(rl),Kt(ol),Kt(Ha))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class dl{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(al[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=al[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=al[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&Uo.DashCase?t.style.setProperty(e,n,r&Uo.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Uo.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ll(n)):this.eventManager.addEventListener(t,e,ll(n))}}class fl extends dl{constructor(t,e,n,r){super(t),this.component=n;const i=cl(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(ul,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ul,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class pl extends dl{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===ce.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=cl(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ml=(()=>{class t extends il{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Kt(Uu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const gl=["alt","control","meta","shift"],yl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},wl={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let _l=(()=>{class t extends il{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ju().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(gl.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&vl.hasOwnProperty(e)&&(e=vl[e]))}return yl[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),gl.forEach(r=>{r!=n&&(0,wl[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Kt(Uu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const bl=Tu(Lu,"browser",[{provide:Ka,useValue:"browser"},{provide:Wa,useValue:function(){Yc.makeCurrent(),el.init()},multi:!0},{provide:Uu,useFactory:function(){return function(t){Ge=t}(document),document},deps:[]}]),El=[[],{provide:ss,useValue:"root"},{provide:mr,useFactory:function(){return new mr},deps:[]},{provide:nl,useClass:ml,multi:!0,deps:[Uu,cu,Ka]},{provide:nl,useClass:_l,multi:!0,deps:[Uu]},[],{provide:hl,useClass:hl,deps:[rl,ol,Ha]},{provide:jo,useExisting:hl},{provide:sl,useExisting:ol},{provide:ol,useClass:ol,deps:[Uu]},{provide:yu,useClass:yu,deps:[cu]},{provide:rl,useClass:rl,deps:[nl,cu]},[]];let Sl=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Ha,useValue:e.appId},{provide:Zc,useExisting:Ha},tl]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Kt(t,12))},providers:El,imports:[$c,Mu]}),t})();function Tl(...t){let e=t[t.length-1];return I(e)?(t.pop(),L(t,e)):H(t)}"undefined"!=typeof window&&window;class Il extends S{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _;return this._value}next(t){super.next(this._value=t)}}class Cl extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Al extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function xl(t,e,n,r,i=new Al(t,n,r)){if(!i.closed)return e instanceof v?e.subscribe(i):P(e)(i)}const kl={};function Dl(...t){let e=void 0,n=void 0;return I(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),H(t,n).lift(new Nl(e))}class Nl{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Rl(t,this.resultSelector))}}class Rl extends Cl{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(kl),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(xl(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===kl?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Ol=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Pl=new v(t=>t.complete());function Ll(t){return t?function(t){return new v(e=>t.schedule(()=>e.complete()))}(t):Pl}function Fl(t){return new v(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?F(n):Ll()).subscribe(e)})}function Ml(){return z(1)}function Vl(t,e){return function(n){return n.lift(new jl(t,e))}}class jl{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Ul(t,this.predicate,this.thisArg))}}class Ul extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const ql=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Bl(t){return function(e){return 0===t?Ll():e.lift(new zl(t))}}class zl{constructor(t){if(this.total=t,this.total<0)throw new ql}call(t,e){return e.subscribe(new Hl(t,this.total))}}class Hl extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Gl(t=Kl){return e=>e.lift(new $l(t))}class $l{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Wl(t,this.errorFactory))}}class Wl extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Kl(){return new Ol}function Ql(t=null){return e=>e.lift(new Yl(t))}class Yl{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Xl(t,this.defaultValue))}}class Xl extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Jl(t,e){return"function"==typeof e?n=>n.pipe(Jl((n,r)=>F(t(n,r)).pipe(C((t,i)=>e(n,t,r,i))))):e=>e.lift(new Zl(t))}class Zl{constructor(t){this.project=t}call(t,e){return e.subscribe(new th(t,this.project))}}class th extends V{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new M(this),r=this.destination;r.add(n),this.innerSubscription=j(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function eh(t){return e=>0===t?Ll():e.lift(new nh(t))}class nh{constructor(t){if(this.total=t,this.total<0)throw new ql}call(t,e){return e.subscribe(new rh(t,this.total))}}class rh extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function ih(...t){return Ml()(Tl(...t))}function sh(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new oh(t,e,n))}}class oh{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ah(t,this.accumulator,this.seed,this.hasSeed))}}class ah extends p{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function uh(t){return function(e){const n=new ch(t),r=e.lift(n);return n.caught=r}}class ch{constructor(t){this.selector=t}call(t,e){return e.subscribe(new lh(t,this.selector,this.caught))}}class lh extends V{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new M(this);this.add(r);const i=j(n,r);i!==r&&this.add(i)}}}function hh(t,e){return U(t,e,1)}function dh(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Vl((e,n)=>t(e,n,r)):y,eh(1),n?Ql(e):Gl(()=>new Ol))}function fh(){}function ph(t,e,n){return function(r){return r.lift(new mh(t,e,n))}}class mh{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new gh(t,this.nextOrObserver,this.error,this.complete))}}class gh extends p{constructor(t,e,n,i){super(t),this._tapNext=fh,this._tapError=fh,this._tapComplete=fh,this._tapError=n||fh,this._tapComplete=i||fh,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||fh,this._tapError=e.error||fh,this._tapComplete=e.complete||fh)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class yh{constructor(t){this.callback=t}call(t,e){return e.subscribe(new vh(t,this.callback))}}class vh extends p{constructor(t,e){super(t),this.add(new h(e))}}class wh{constructor(t,e){this.id=t,this.url=e}}class _h extends wh{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bh extends wh{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Eh extends wh{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Sh extends wh{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Th extends wh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ih extends wh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ch extends wh{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ah extends wh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xh extends wh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kh{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Dh{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Nh{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rh{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oh{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ph{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lh{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Fh="primary";class Mh{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Vh(t){return new Mh(t)}function jh(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Uh(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function qh(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Bh(t[i],e[i]))return!1;return!0}function Bh(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function zh(t){return Array.prototype.concat.apply([],t)}function Hh(t){return t.length>0?t[t.length-1]:null}function Gh(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function $h(t){return Qs(t)?t:Ks(t)?F(Promise.resolve(t)):Tl(t)}function Wh(t,e,n){return n?function(t,e){return qh(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Xh(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Bh(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Xh(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Xh(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Xh(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,s)}}(e,n,n.segments)}(t.root,e.root)}class Kh{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vh(this.queryParams)),this._queryParamMap}toString(){return ed.serialize(this)}}class Qh{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Gh(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nd(this)}}class Yh{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Vh(this.parameters)),this._parameterMap}toString(){return ud(this)}}function Xh(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Jh(t,e){let n=[];return Gh(t.children,(t,r)=>{r===Fh&&(n=n.concat(e(t,r)))}),Gh(t.children,(t,r)=>{r!==Fh&&(n=n.concat(e(t,r)))}),n}class Zh{}class td{parse(t){const e=new fd(t);return new Kh(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return nd(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return Gh(e.children,(e,n)=>{n!==Fh&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Jh(e,(n,r)=>r===Fh?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${nd(e)}/${n[0]}`:`${nd(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${id(e)}=${id(t)}`).join("&"):`${id(e)}=${id(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const ed=new td;function nd(t){return t.segments.map(t=>ud(t)).join("/")}function rd(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function id(t){return rd(t).replace(/%3B/gi,";")}function sd(t){return rd(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function od(t){return decodeURIComponent(t)}function ad(t){return od(t.replace(/\+/g,"%20"))}function ud(t){return`${sd(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${sd(t)}=${sd(e[t])}`).join("")}`;var e}const cd=/^[^\/()?;=#]+/;function ld(t){const e=t.match(cd);return e?e[0]:""}const hd=/^[^=?&#]+/,dd=/^[^?&#]+/;class fd{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qh([],{}):new Qh([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Qh(t,e)),n}parseSegment(){const t=ld(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Yh(od(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ld(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=ld(this.remaining);t&&(n=t,this.capture(n))}t[od(e)]=od(n)}parseQueryParam(t){const e=function(t){const e=t.match(hd);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(dd);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=ad(e),i=ad(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ld(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Fh);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Qh([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class pd{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=md(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=md(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=gd(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return gd(t,this._root).map(t=>t.value)}}function md(t,e){if(t===e.value)return e;for(const n of e.children){const e=md(t,n);if(e)return e}return null}function gd(t,e){if(t===e.value)return[e];for(const n of e.children){const r=gd(t,n);if(r.length)return r.unshift(e),r}return[]}class yd{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function vd(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class wd extends pd{constructor(t,e){super(t),this.snapshot=e,Id(this,t)}toString(){return this.snapshot.toString()}}function _d(t,e){const n=function(t,e){const n=new Sd([],{},{},"",{},Fh,e,null,t.root,-1,{});return new Td("",new yd(n,[]))}(t,e),r=new Il([new Yh("",{})]),i=new Il({}),s=new Il({}),o=new Il({}),a=new Il(""),u=new bd(r,i,o,a,s,Fh,e,n.root);return u.snapshot=n.root,new wd(new yd(u,[]),n)}class bd{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(C(t=>Vh(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(C(t=>Vh(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ed(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Sd{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Td extends pd{constructor(t,e){super(e),this.url=t,Id(this,e)}toString(){return Cd(this._root)}}function Id(t,e){e.value._routerState=t,e.children.forEach(e=>Id(t,e))}function Cd(t){const e=t.children.length>0?` { ${t.children.map(Cd).join(", ")} } `:"";return`${t.value}${e}`}function Ad(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,qh(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),qh(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!qh(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),qh(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function xd(t,e){var n,r;return qh(t.params,e.params)&&Xh(n=t.url,r=e.url)&&n.every((t,e)=>qh(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||xd(t.parent,e.parent))}function kd(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Dd(t){return"object"==typeof t&&null!=t&&t.outlets}function Nd(t,e,n,r,i){let s={};return r&&Gh(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new Kh(n.root===t?e:function t(e,n,r){const i={};return Gh(e.children,(e,s)=>{i[s]=e===n?r:t(e,n,r)}),new Qh(e.segments,i)}(n.root,t,e),s,i)}class Rd{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&kd(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Dd);if(r&&r!==Hh(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Od{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Pd(t,e,n){if(t||(t=new Qh([],{})),0===t.segments.length&&t.hasChildren())return Ld(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(Dd(o))break;const a=""+o,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!jd(a,u,e))return s;r+=2}else{if(!jd(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Qh(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Qh(t.segments.slice(r.pathIndex),t.children),Ld(e,0,i)}return r.match&&0===i.length?new Qh(t.segments,{}):r.match&&!t.hasChildren()?Fd(t,e,n):r.match?Ld(t,0,i):Fd(t,e,n)}function Ld(t,e,n){if(0===n.length)return new Qh(t.segments,{});{const r=function(t){return Dd(t[0])?t[0].outlets:{[Fh]:t}}(n),i={};return Gh(r,(n,r)=>{null!==n&&(i[r]=Pd(t.children[r],e,n))}),Gh(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Qh(t.segments,i)}}function Fd(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Dd(s)){const t=Md(s.outlets);return new Qh(r,t)}if(0===i&&kd(n[0])){r.push(new Yh(t.segments[e].path,n[0])),i++;continue}const o=Dd(s)?s.outlets.primary:""+s,a=i<n.length-1?n[i+1]:null;o&&a&&kd(a)?(r.push(new Yh(o,Vd(a))),i+=2):(r.push(new Yh(o,{})),i++)}return new Qh(r,{})}function Md(t){const e={};return Gh(t,(t,n)=>{null!==t&&(e[n]=Fd(new Qh([],{}),0,t))}),e}function Vd(t){const e={};return Gh(t,(t,n)=>e[n]=""+t),e}function jd(t,e,n){return t==n.path&&qh(e,n.parameters)}class Ud{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ad(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=vd(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Gh(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=vd(t),i=t.value.component?n.children:e;Gh(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=vd(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ph(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Rh(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Ad(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),qd(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function qd(t){Ad(t.value),t.children.forEach(qd)}class Bd{constructor(t,e){this.routes=t,this.module=e}}function zd(t){return"function"==typeof t}function Hd(t){return t instanceof Kh}const Gd=Symbol("INITIAL_VALUE");function $d(){return Jl(t=>Dl(...t.map(t=>t.pipe(eh(1),function(...t){const e=t[t.length-1];return I(e)?(t.pop(),n=>ih(t,n,e)):e=>ih(t,e)}(Gd)))).pipe(sh((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Gd)return t;if(r===Gd&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Hd(r))return r}return t},t)},Gd),Vl(t=>t!==Gd),C(t=>Hd(t)?t:!0===t),eh(1)))}class Wd{constructor(t){this.segmentGroup=t||null}}class Kd{constructor(t){this.urlTree=t}}function Qd(t){return new v(e=>e.error(new Wd(t)))}function Yd(t){return new v(e=>e.error(new Kd(t)))}function Xd(t){return new v(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Jd{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Zt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Fh).pipe(C(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(uh(t=>{if(t instanceof Kd)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Wd)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Fh).pipe(C(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(uh(t=>{if(t instanceof Wd)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Qh([],{[Fh]:t}):t;return new Kh(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(C(t=>new Qh([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Tl({});const n=[],r=[],i={};return Gh(t,(t,s)=>{const o=e(s,t).pipe(C(t=>i[s]=t));s===Fh?n.push(o):r.push(o)}),Tl.apply(null,n.concat(r)).pipe(Ml(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Vl((e,n)=>t(e,n,r)):y,Bl(1),n?Ql(e):Gl(()=>new Ol))}(),C(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,s){return Tl(...n).pipe(hh(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(uh(t=>{if(t instanceof Wd)return Tl(null);throw t}))),dh(t=>!!t),uh((t,n)=>{if(t instanceof Ol||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Tl(new Qh([],{}));throw new Wd(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return nf(r)!==s?Qd(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):Qd(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Yd(i):this.lineralizeSegments(n,i).pipe(U(n=>{const i=new Qh(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Zd(e,r,i);if(!o)return Qd(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Yd(l):this.lineralizeSegments(r,l).pipe(U(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(C(t=>(n._loadedConfig=t,new Qh(r,{})))):Tl(new Qh(r,{}));const{matched:i,consumedSegments:s,lastChild:o}=Zd(e,n,r);if(!i)return Qd(e);const a=r.slice(o);return this.getChildConfig(t,n,r).pipe(U(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:o}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>ef(t,e,n)&&nf(n)!==Fh)}(t,n,r)?{segmentGroup:tf(new Qh(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&nf(r)!==Fh&&(n[nf(r)]=new Qh([],{}));return n}(r,new Qh(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>ef(t,e,n))}(t,n,r)?{segmentGroup:tf(new Qh(t.segments,function(t,e,n,r){const i={};for(const s of n)ef(t,e,s)&&!r[nf(s)]&&(i[nf(s)]=new Qh([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,a,r);return 0===o.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(C(t=>new Qh(s,t))):0===r.length&&0===o.length?Tl(new Qh(s,{})):this.expandSegment(n,i,r,o,Fh,!0).pipe(C(t=>new Qh(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Tl(new Bd(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Tl(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(U(n=>n?this.configLoader.load(t.injector,e).pipe(C(t=>(e._loadedConfig=t,t))):function(t){return new v(e=>e.error(jh(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Tl(new Bd([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Tl(r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&zd(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!zd(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return $h(s)})).pipe($d(),ph(t=>{if(!Hd(t))return;const e=jh(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),C(t=>!0===t)):Tl(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Tl(n);if(r.numberOfChildren>1||!r.children.primary)return Xd(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Kh(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Gh(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return Gh(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new Qh(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Zd(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||Uh)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function tf(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Qh(t.segments.concat(e.segments),e.children)}return t}function ef(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function nf(t){return t.outlet||Fh}class rf{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class sf{constructor(t,e){this.component=t,this.route=e}}function of(t,e,n){const r=t._root;return function t(e,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=vd(n);return e.children.forEach(e=>{!function(e,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Xh(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Xh(t.url,e.url)||!qh(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xd(t,e)||!qh(t.queryParams,e.queryParams);case"paramsChange":default:return!xd(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new rf(i)):(o.data=a.data,o._resolvedData=a._resolvedData),t(e,n,o.component?u?u.children:null:r,i,s),c&&u&&u.outlet&&u.outlet.isActivated&&s.canDeactivateChecks.push(new sf(u.outlet.component,a))}else a&&uf(n,u,s),s.canActivateChecks.push(new rf(i)),t(e,null,o.component?u?u.children:null:r,i,s)}(e,o[e.value.outlet],r,i.concat([e.value]),s),delete o[e.value.outlet]}),Gh(o,(t,e)=>uf(t,r.getContext(e),s)),s}(r,e?e._root:null,n,[r.value])}function af(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function uf(t,e,n){const r=vd(t),i=t.value;Gh(r,(t,r)=>{uf(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new sf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function cf(t,e){return null!==t&&e&&e(new Oh(t)),Tl(!0)}function lf(t,e){return null!==t&&e&&e(new Nh(t)),Tl(!0)}function hf(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Tl(r.map(r=>Fl(()=>{const i=af(r,e,n);let s;if(function(t){return t&&zd(t.canActivate)}(i))s=$h(i.canActivate(e,t));else{if(!zd(i))throw new Error("Invalid CanActivate guard");s=$h(i(e,t))}return s.pipe(dh())}))).pipe($d()):Tl(!0)}function df(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Fl(()=>Tl(e.guards.map(i=>{const s=af(i,e.node,n);let o;if(function(t){return t&&zd(t.canActivateChild)}(s))o=$h(s.canActivateChild(r,t));else{if(!zd(s))throw new Error("Invalid CanActivateChild guard");o=$h(s(r,t))}return o.pipe(dh())})).pipe($d())));return Tl(i).pipe($d())}class ff{}class pf{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){try{const t=yf(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Fh),n=new Sd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Fh,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new yd(n,e),i=new Td(this.url,r);return this.inheritParamsAndData(i._root),Tl(i)}catch(t){return new v(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Ed(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Jh(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===Fh?-1:e.value.outlet===Fh?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const s of t)try{return this.processSegmentAgainstRoute(s,e,n,r)}catch(i){if(!(i instanceof ff))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new ff}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new ff;if((t.outlet||Fh)!==r)throw new ff;let i,s=[],o=[];if("**"===t.path){const s=n.length>0?Hh(n).parameters:{};i=new Sd(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_f(t),r,t.component,t,mf(e),gf(e)+n.length,bf(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new ff;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||Uh)(n,t,e);if(!r)throw new ff;const i={};Gh(r.posParams,(t,e)=>{i[e]=t.path});const s=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s}}(e,t,n);s=a.consumedSegments,o=n.slice(a.lastChild),i=new Sd(s,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_f(t),r,t.component,t,mf(e),gf(e)+s.length,bf(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=yf(e,s,o,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new yd(i,t)]}if(0===a.length&&0===c.length)return[new yd(i,[])];const l=this.processSegment(a,u,c,Fh);return[new yd(i,l)]}}function mf(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gf(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function yf(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>vf(t,e,n)&&wf(n)!==Fh)}(t,n,r)){const i=new Qh(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&wf(s)!==Fh){const n=new Qh([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[wf(s)]=n}return i}(t,e,r,new Qh(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>vf(t,e,n))}(t,n,r)){const s=new Qh(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(vf(t,n,a)&&!i[wf(a)]){const n=new Qh([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[wf(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Qh(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function vf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function wf(t){return t.outlet||Fh}function _f(t){return t.data||{}}function bf(t){return t.resolve||{}}function Ef(t){return function(e){return e.pipe(Jl(e=>{const n=t(e);return n?F(n).pipe(C(()=>e)):F([e])}))}}class Sf extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}let Tf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&zs(0,"router-outlet")},directives:function(){return[Vf]},encapsulation:2}),t})();function If(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Cf(r,Af(e,r))}}function Cf(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==Fh)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&If(t.children,e)}function Af(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function xf(t){const e=t.children&&t.children.map(xf),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Fh&&(n.component=Tf),n}const kf=new Mt("ROUTES");class Df{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(C(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Bd(zh(r.injector.get(kf)).map(xf),r)}))}loadModuleFactory(t){return"string"==typeof t?F(this.loader.load(t)):$h(t()).pipe(U(t=>t instanceof te?Tl(t):F(this.compiler.compileModuleAsync(t))))}}class Nf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Rf,this.attachRef=null}}class Rf{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Nf,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Of{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Pf(t){throw t}function Lf(t,e,n){return e.parse("/")}function Ff(t,e){return Tl(null)}let Mf=(()=>{class t{constructor(t,e,n,r,i,s,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new S,this.errorHandler=Pf,this.malformedUriErrorHandler=Lf,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ff,afterPreactivation:Ff},this.urlHandlingStrategy=new Of,this.routeReuseStrategy=new Sf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Zt),this.console=i.get(Ya);const u=i.get(cu);this.isNgZoneEnabled=u instanceof cu,this.resetConfig(a),this.currentUrlTree=new Kh(new Qh([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Df(s,o,t=>this.triggerEvent(new kh(t)),t=>this.triggerEvent(new Dh(t))),this.routerState=_d(this.currentUrlTree,this.rootComponentType),this.transitions=new Il({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Vl(t=>0!==t.id),C(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Jl(t=>{let n=!1,r=!1;return Tl(t).pipe(ph(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Jl(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Tl(t).pipe(Jl(t=>{const n=this.transitions.getValue();return e.next(new _h(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Pl:[t]}),Jl(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,function(t){return t.pipe(Jl(t=>function(t,e,n,r,i){return new Jd(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe(C(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),ph(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(s){return s.pipe(U(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){return new pf(t,e,n,r,i,s).recognize()}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(C(t=>Object.assign(Object.assign({},s),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),ph(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),ph(t=>{const n=new Th(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new _h(n,this.serializeUrl(r),i,s);e.next(a);const u=_d(r,this.rootComponentType).snapshot;return Tl(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Pl}),Ef(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),ph(t=>{const e=new Ih(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),C(t=>Object.assign(Object.assign({},t),{guards:of(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(U(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Tl(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return F(t).pipe(U(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Tl(s.map(s=>{const o=af(s,e,i);let a;if(function(t){return t&&zd(t.canDeactivate)}(o))a=$h(o.canDeactivate(t,e,n,r));else{if(!zd(o))throw new Error("Invalid CanDeactivate guard");a=$h(o(t,e,n,r))}return a.pipe(dh())})).pipe($d()):Tl(!0)}(t.component,t.route,n,e,r)),dh(t=>!0!==t,!0))}(o,r,i,t).pipe(U(n=>n&&"boolean"==typeof n?function(t,e,n,r){return F(e).pipe(hh(e=>F([lf(e.route.parent,r),cf(e.route,r),df(t,e.path,n),hf(t,e.route,n)]).pipe(Ml(),dh(t=>!0!==t,!0))),dh(t=>!0!==t,!0))}(r,s,t,e):Tl(n)),C(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),ph(t=>{if(Hd(t.guardsResult)){const e=jh(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),ph(t=>{const e=new Ch(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Vl(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Eh(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ef(t=>{if(t.guards.canActivateChecks.length)return Tl(t).pipe(ph(t=>{const e=new Ah(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Jl(t=>{let n=!1;return Tl(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(U(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Tl(t);let s=0;return F(n).pipe(hh(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Tl({});const s={};return F(i).pipe(U(i=>function(t,e,n,r){const i=af(t,e,r);return $h(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(ph(t=>{s[i]=t}))),Bl(1),U(()=>Object.keys(s).length===i.length?Tl(s):Pl))}(t._resolve,t,e,r).pipe(C(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Ed(t,n).resolve),null)))}(t.route,e,r,i)),ph(()=>s++),Bl(1),U(e=>s===n.length?Tl(t):Pl))}))}),ph({next:()=>n=!0,complete:()=>{if(!n){const n=new Eh(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),ph(t=>{const e=new xh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ef(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),C(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const s=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new yd(i,s)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new bd(new Il((i=n.value).url),new Il(i.params),new Il(i.queryParams),new Il(i.fragment),new Il(i.data),i.outlet,i.component,i),s=n.children.map(n=>t(e,n));return new yd(r,s)}}var i}(t,e._root,n?n._root:void 0);return new wd(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),ph(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),C(t=>(new Ud(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),ph({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Eh(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new yh(i))),uh(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Hd(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Eh(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Sh(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(s){t.reject(s)}}var i;return Pl}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){If(t),this.config=t.map(xf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:s,queryParamsHandling:o,preserveFragment:a}=e;vr()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,c=a?this.currentUrlTree.fragment:i;let l=null;if(o)switch(o){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}else l=s?this.currentUrlTree.queryParams:r||null;return null!==l&&(l=this.removeEmptyProps(l)),function(t,e,n,r,i){if(0===n.length)return Nd(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Rd(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Gh(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Rd(n,e,r)}(n);if(s.toRoot())return Nd(e.root,new Qh([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new Od(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Od(t,t===e.root,0)}const r=kd(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Od(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?Ld(o.segmentGroup,o.index,s.commands):Pd(o.segmentGroup,o.index,s.commands);return Nd(o.segmentGroup,a,e,r,i)}(u,this.currentUrlTree,t,l,c)}navigateByUrl(t,e={skipLocationChange:!1}){vr()&&this.isNgZoneEnabled&&!cu.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Hd(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(Hd(t))return Wh(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Wh(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new bh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(Kt(is),Kt(Zh),Kt(Rf),Kt(ec),Kt(ws),Kt(Du),Kt(ou),Kt(void 0))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Vf=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ea,this.deactivateEvents=new Ea,this.name=r||Fh,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new jf(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Ms(Rf),Ms(ca),Ms(Fo),Vs("name"),Ms(ns))},t.\u0275dir=we({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class jf{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===bd?this.route:t===Rf?this.childContexts:this.parent.get(t,e)}}class Uf{}class qf{preload(t,e){return Tl(null)}}let Bf=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Df(e,n,e=>t.triggerEvent(new kh(e)),e=>t.triggerEvent(new Dh(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Vl(t=>t instanceof bh),hh(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Zt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return F(n).pipe(z(),C(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(U(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Kt(Mf),Kt(Du),Kt(ou),Kt(ws),Kt(Uf))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),zf=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _h?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof bh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Lh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Lh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Mf),Kt(Wc),Kt(void 0))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Hf=new Mt("ROUTER_CONFIGURATION"),Gf=new Mt("ROUTER_FORROOT_GUARD"),$f=[ec,{provide:Zh,useClass:td},{provide:Mf,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new Mf(null,t,e,n,r,i,s,zh(o));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),a.errorHandler&&(l.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(l.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=ju();l.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(l.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(l.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(l.relativeLinkResolution=a.relativeLinkResolution),l},deps:[Zh,Rf,ec,ws,Du,ou,kf,Hf,[class{},new rt],[class{},new rt]]},Rf,{provide:bd,useFactory:function(t){return t.routerState.root},deps:[Mf]},{provide:Du,useClass:Ou},Bf,qf,class{preload(t,e){return e().pipe(uh(()=>Tl(null)))}},{provide:Hf,useValue:{enableTracing:!1}}];function Wf(){return new Su("Router",Mf)}let Kf=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[$f,Jf(e),{provide:Gf,useFactory:Xf,deps:[[Mf,new rt,new st]]},{provide:Hf,useValue:n||{}},{provide:Yu,useFactory:Yf,deps:[qu,[new nt(Ju),new rt],Hf]},{provide:zf,useFactory:Qf,deps:[Mf,Wc,Hf]},{provide:Uf,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:qf},{provide:Su,multi:!0,useFactory:Wf},[Zf,{provide:Ba,multi:!0,useFactory:tp,deps:[Zf]},{provide:np,useFactory:ep,deps:[Zf]},{provide:Qa,multi:!0,useExisting:np}]]}}static forChild(e){return{ngModule:t,providers:[Jf(e)]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Kt(Gf,8),Kt(Mf,8))}}),t})();function Qf(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new zf(t,e,n)}function Yf(t,e,n={}){return n.useHash?new tc(t,e):new Zu(t,e)}function Xf(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Jf(t){return[{provide:_s,multi:!0,useValue:t},{provide:kf,multi:!0,useValue:t}]}let Zf=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new S}appInitializer(){return this.injector.get(zu,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Mf),r=this.injector.get(Hf);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Tl(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Hf),n=this.injector.get(Bf),r=this.injector.get(zf),i=this.injector.get(Mf),s=this.injector.get(xu);t===s.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Kt(ws))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function tp(t){return t.appInitializer.bind(t)}function ep(t){return t.bootstrapListener.bind(t)}const np=new Mt("Router Initializer");function rp(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))}function ip(t){return null!=t&&""+t!="false"}function sp(t){return t instanceof Mo?t.nativeElement:t}let op;try{op="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(WE){op=!1}let ap,up,cp=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!op)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ka))},t.\u0275prov=ct({factory:function(){return new t(Kt(Ka))},token:t,providedIn:"root"}),t})(),lp=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)}}),t})();function hp(t){return function(){if(null==ap&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ap=!0}))}finally{ap=ap||!1}return ap}()?t:!!t.capture}class dp extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class fp extends dp{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let pp=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class mp extends pp{constructor(t,e=pp.now){super(t,()=>mp.delegate&&mp.delegate!==this?mp.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return mp.delegate&&mp.delegate!==this?mp.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const gp=new mp(fp);function yp(t){return 0===t.buttons}"undefined"!=typeof Element&&Element;const vp=new Mt("cdk-focus-monitor-default-options"),wp=hp({passive:!0,capture:!0});let _p=(()=>{class t{constructor(t,e,n,r){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=yp(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=bp(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=bp(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){const n=sp(t);if(!this._platform.isBrowser||1!==n.nodeType)return Tl(null);const r=function(t){if(function(){if(null==up){const t="undefined"!=typeof document?document.head:null;up=!(!t||!t.createShadowRoot&&!t.attachShadow)}return up}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;const s={checkChildren:e,subject:new S,rootNode:r};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(t){const e=sp(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=sp(t);this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n)}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=bp(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);if(!n||!n.checkChildren&&e!==bp(t))return;const r=this._getFocusOrigin(t);this._setClasses(e,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,wp),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,wp)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,wp),t.addEventListener("mousedown",this._documentMousedownListener,wp),t.addEventListener("touchstart",this._documentTouchstartListener,wp),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,wp),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,wp),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,wp),t.removeEventListener("mousedown",this._documentMousedownListener,wp),t.removeEventListener("touchstart",this._documentTouchstartListener,wp),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}return t.\u0275fac=function(e){return new(e||t)(Kt(cu),Kt(cp),Kt(Uu,8),Kt(vp,8))},t.\u0275prov=ct({factory:function(){return new t(Kt(cu),Kt(cp),Kt(Uu,8),Kt(vp,8))},token:t,providedIn:"root"}),t})();function bp(t){return t.composedPath?t.composedPath()[0]:t.target}const Ep="cdk-high-contrast-black-on-white",Sp="cdk-high-contrast-white-on-black",Tp="cdk-high-contrast-active";let Ip=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Tp),t.remove(Ep),t.remove(Sp);const e=this.getHighContrastMode();1===e?(t.add(Tp),t.add(Ep)):2===e&&(t.add(Tp),t.add(Sp))}}}return t.\u0275fac=function(e){return new(e||t)(Kt(cp),Kt(Uu))},t.\u0275prov=ct({factory:function(){return new t(Kt(cp),Kt(Uu))},token:t,providedIn:"root"}),t})();const Cp=new Mt("cdk-dir-doc",{providedIn:"root",factory:function(){return Qt(Uu)}});let Ap=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new Ea,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Cp,8))},t.\u0275prov=ct({factory:function(){return new t(Kt(Cp,8))},token:t,providedIn:"root"}),t})(),xp=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)}}),t})();const kp=new Ho("10.2.7");class Dp{}const Np="*";function Rp(t,e){return{type:7,name:t,definitions:e,options:{}}}function Op(t,e=null){return{type:4,styles:e,timings:t}}function Pp(t,e=null){return{type:2,steps:t,options:e}}function Lp(t){return{type:6,styles:t,offset:null}}function Fp(t,e,n){return{type:0,name:t,styles:e,options:n}}function Mp(t){return{type:5,steps:t}}function Vp(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function jp(t=null){return{type:9,options:t}}function Up(t,e,n=null){return{type:11,selector:t,animation:e,options:n}}function qp(t){Promise.resolve(null).then(t)}class Bp{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){qp(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class zp{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?qp(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Hp(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Gp(t){switch(t.length){case 0:return new Bp;case 1:return t[0];default:return new zp(t)}}function $p(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case Np:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function Wp(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Kp(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Kp(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Kp(n,"destroy",t)))}}function Kp(t,e,n){const r=n.totalTime,i=Qp(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function Qp(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Yp(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function Xp(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Jp=(t,e)=>!1,Zp=(t,e)=>!1,tm=(t,e,n)=>[];const em=Hp();(em||"undefined"!=typeof Element)&&(Jp=(t,e)=>t.contains(e),Zp=(()=>{if(em||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Zp}})(),tm=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let nm=null,rm=!1;function im(t){nm||(nm=("undefined"!=typeof document?document.body:null)||{},rm=!!nm.style&&"WebkitAppearance"in nm.style);let e=!0;return nm.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in nm.style,!e&&rm)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in nm.style),e}const sm=Zp,om=Jp,am=tm;function um(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let cm=(()=>{class t{validateStyleProperty(t){return im(t)}matchesElement(t,e){return sm(t,e)}containsElement(t,e){return om(t,e)}query(t,e,n){return am(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new Bp(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),lm=(()=>{class t{}return t.NOOP=new cm,t})();const hm="ng-enter",dm="ng-leave",fm="ng-trigger",pm=".ng-trigger",mm="ng-animating",gm=".ng-animating";function ym(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:vm(parseFloat(e[1]),e[2])}function vm(t,e){switch(e){case"s":return 1e3*t;default:return t}}function wm(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=vm(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=vm(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function _m(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function bm(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else _m(t,n);return n}function Em(t,e,n){return n?e+":"+n+";":""}function Sm(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Em(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Em(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Tm(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Rm(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),Hp()&&Sm(t))}function Im(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Rm(e);t.style[n]=""}),Hp()&&Sm(t))}function Cm(t){return Array.isArray(t)?1==t.length?t[0]:Pp(t):t}const Am=new RegExp("{{\\s*(.+?)\\s*}}","g");function xm(t){let e=[];if("string"==typeof t){let n;for(;n=Am.exec(t);)e.push(n[1]);Am.lastIndex=0}return e}function km(t,e,n){const r=t.toString(),i=r.replace(Am,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function Dm(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Nm=/-+([a-z0-9])/g;function Rm(t){return t.replace(Nm,(...t)=>t[1].toUpperCase())}function Om(t,e){return 0===t||0===e}function Pm(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach((function(e){n[e]=Fm(t,e)}))}}return e}function Lm(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function Fm(t,e){return window.getComputedStyle(t)[e]}const Mm="*";function Vm(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(qm(i,o)),"<"!=s[0]||i==Mm&&o==Mm||e.push(qm(o,i))}(t,n,e)):n.push(t),n}const jm=new Set(["true","1"]),Um=new Set(["false","0"]);function qm(t,e){const n=jm.has(t)||Um.has(t),r=jm.has(e)||Um.has(e);return(i,s)=>{let o=t==Mm||t==i,a=e==Mm||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?jm.has(t):Um.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?jm.has(e):Um.has(e)),o&&a}}const Bm=new RegExp("s*:selfs*,?","g");function zm(t,e,n){return new Hm(t).build(e,n)}class Hm{constructor(t){this._driver=t}build(t,e){const n=new Gm(e);return this._resetContextStyleTimingState(n),Lm(this,Cm(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if($m(t)){const e=t;Object.keys(e).forEach(t=>{xm(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Dm(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Lm(this,Cm(t.animation),e);return{type:1,matchers:Vm(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Wm(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Lm(this,t,e)),options:Wm(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Lm(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:Wm(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Km(wm(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Km(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||wm(r,e),Km(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Lp({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=Lp(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Np?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if($m(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=xm(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if($m(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if($m(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Lm(this,Cm(t.animation),e),options:Wm(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Wm(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Wm(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Bm,"")),[t=t.replace(/@\*/g,pm).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,gm),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,Yp(e.collectedStyles,e.currentQuerySelector,{});const o=Lm(this,Cm(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:Wm(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:wm(t.timings,e.errors,!0);return{type:12,animation:Lm(this,Cm(t.animation),e),timings:n,options:null}}}class Gm{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function $m(t){return!Array.isArray(t)&&"object"==typeof t}function Wm(t){var e;return t?(t=_m(t)).params&&(t.params=(e=t.params)?_m(e):null):t={},t}function Km(t,e,n){return{duration:t,delay:e,easing:n}}function Qm(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Ym{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Xm=new RegExp(":enter","g"),Jm=new RegExp(":leave","g");function Zm(t,e,n,r,i,s={},o={},a,u,c=[]){return(new tg).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class tg{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new Ym;const l=new ng(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),Lm(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[Qm(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?ym(n.duration):null,s=null!=n.delay?ym(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Lm(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=eg);const t=ym(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Lm(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?ym(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),Lm(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return wm(e.params?km(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?ym(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=eg);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),Lm(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;Lm(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const eg={};class ng{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=eg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new rg(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=ym(n.duration)),null!=n.delay&&(r.delay=ym(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=km(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new ng(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=eg,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new ig(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(Xm,"."+this._enterClassName)).replace(Jm,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class rg{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new rg(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Np,this._currentKeyframe[t]=Np}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Np})):bm(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=km(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Np),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=bm(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==Np&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?Dm(t.values()):[],s=e.size?Dm(e.values()):[];if(n){const t=r[0],e=_m(t);t.offset=0,e.offset=1,r=[t,e]}return Qm(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class ig extends rg{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=bm(t[0],!1);a.offset=0,i.push(a);const u=bm(t[0],!1);u.offset=sg(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=bm(t[r],!1);o.offset=sg((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return Qm(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function sg(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class og{}class ag extends og{normalizePropertyName(t,e){return Rm(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(ug[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const ug=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function cg(t,e,n,r,i,s,o,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const lg={};class hg{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||lg,d=this.buildStyles(n,o&&o.params||lg,l),f=a&&a.params||lg,p=this.buildStyles(r,f,l),m=new Set,g=new Map,y=new Map,v="void"===r,w={params:Object.assign(Object.assign({},h),f)},_=c?[]:Zm(t,e,this.ast.animation,i,s,d,p,w,u,l);let b=0;if(_.forEach(t=>{b=Math.max(t.duration+t.delay,b)}),l.length)return cg(e,this._triggerName,n,r,v,d,p,[],[],g,y,b,l);_.forEach(t=>{const n=t.element,r=Yp(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=Yp(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const E=Dm(m.values());return cg(e,this._triggerName,n,r,v,d,p,_,E,g,y,b)}}class dg{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=_m(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=km(s,r,e)),n[t]=s})}}),n}}class fg{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new dg(t.style,t.options&&t.options.params||{})}),pg(this.states,"true","1"),pg(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new hg(t,e,this.states))}),this.fallbackTransition=new hg(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function pg(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const mg=new Ym;class gg{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=zm(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=$p(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=Zm(this._driver,e,i,hm,dm,{},{},n,mg,r),s.forEach(t=>{const e=Yp(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Np)})});const a=Gp(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=Qp(e,"","","");return Wp(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const yg="ng-animate-queued",vg="ng-animate-disabled",wg=".ng-animate-disabled",_g=[],bg={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Eg={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Sg{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=_m(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Tg="void",Ig=new Sg(Tg);class Cg{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Og(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=Yp(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=Yp(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Og(t,fm),Og(t,"ng-trigger-"+e),a[e]=Ig),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new xg(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(Og(t,fm),Og(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new Sg(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=Ig),u.value!==Tg&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Im(t,n),Tm(t,r)})}return}const c=Yp(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(Og(t,yg),s.onStart(()=>{Pg(t,yg)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,pm,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Tg,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Gp(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,s=this._engine.statesByElement.get(t)[r]||Ig,o=new Sg(Tg),a=new xg(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:s,toState:o,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==bg||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Og(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=Qp(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,Wp(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Ag{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Cg(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(kg(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!kg(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Og(t,vg)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Pg(t,vg))}removeNode(t,e,n,r){if(kg(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return kg(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,pm,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,gm,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Gp(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=bg,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,wg)&&this.markElementAsDisabled(t,!1),this.driver.query(t,wg,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Og(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Gp(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new Ym,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Rg(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=hm+p++;f.set(e,n),t.forEach(t=>Og(t,n))});const m=[],g=new Set,y=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){const t=this.collectedLeaveElements[D],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,w=Rg(h,Array.from(g));w.forEach((t,e)=>{const n=dm+p++;v.set(e,n),t.forEach(t=>Og(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>Pg(t,n))}),w.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Pg(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const _=[],b=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)b.push(p);else{if(c)return e.onStart(()=>Im(i,p.fromStyles)),e.onDestroy(()=>Tm(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Im(i,p.fromStyles)),e.onDestroy(()=>Tm(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>Yp(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(b.length){const t=[];b.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,S=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Yp(E,e,[]).push(t),t.destroy()})});const T=m.filter(t=>Fg(t,a,u)),I=new Map;Ng(I,this.driver,y,u,Np).forEach(t=>{Fg(t,a,u)&&T.push(t)});const C=new Map;d.forEach((t,e)=>{Ng(C,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=I.get(t),n=C.get(t);I.set(t,Object.assign(Object.assign({},e),n))});const A=[],x=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>Tm(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=k;if(S.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>S.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,E,i,C,I);if(s.setRealPlayer(n),t===k)A.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=Gp(e)),r.push(s)}}else Im(e,o.fromStyles),s.onDestroy(()=>Tm(e,o.toStyles)),x.push(s),c.has(e)&&r.push(s)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=Gp(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let D=0;D<m.length;D++){const t=m[D],e=t.__ng_removed;if(Pg(t,dm),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,gm,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Lg(this,t,r):this.processLeaveNode(t)}return m.length=0,A.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),A}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==Tg;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=Yp(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Im(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Bp(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof zp?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||_g).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=s.get(h),y=$p(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new xg(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{Yp(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Og(t,mm));const d=Gp(h);return d.onDestroy(()=>{c.forEach(t=>Pg(t,mm)),Tm(a,e.toStyles)}),l.forEach(t=>{Yp(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Bp(t.duration,t.delay)}}class xg{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Bp,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Wp(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Yp(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function kg(t){return t&&1===t.nodeType}function Dg(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Ng(t,e,n,r,i){const s=[];n.forEach(t=>s.push(Dg(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Eg,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>Dg(t,s[a++])),o}function Rg(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let s=i.get(e);if(s)return s;const o=e.parentNode;return s=n.has(o)?o:r.has(o)?1:t(o),i.set(e,s),s}(t);1!==e&&n.get(e).push(t)}),n}function Og(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Pg(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Lg(t,e,n){Gp(n).onDone(()=>t.processLeaveNode(e))}function Fg(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Mg{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Ag(t,e,n),this._timelineEngine=new gg(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=zm(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new fg(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=Xp(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=Xp(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Vg(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=Ug(e[0]),e.length>1&&(r=Ug(e[e.length-1]))):e&&(n=Ug(e)),n||r?new jg(t,n,r):null}let jg=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Tm(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Tm(this._element,this._initialStyles),this._endStyles&&(Tm(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Im(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Im(this._element,this._endStyles),this._endStyles=null),Tm(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function Ug(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];qg(i)&&(e=e||{},e[i]=t[i])}return e}function qg(t){return"display"===t||"position"===t}const Bg="animation",zg="animationend";class Hg{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Yg(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),Qg(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Kg(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Gg(this._element,this._name,"paused")}resume(){Gg(this._element,this._name,"running")}setPosition(t){const e=$g(this._element,this._name);this._position=t*this._duration,Qg(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Kg(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Yg(t,"").split(","),r=Wg(n,e);r>=0&&(n.splice(r,1),Qg(t,"",n.join(",")))}(this._element,this._name))}}function Gg(t,e,n){Qg(t,"PlayState",n,$g(t,e))}function $g(t,e){const n=Yg(t,"");return n.indexOf(",")>0?Wg(n.split(","),e):Wg([n],e)}function Wg(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Kg(t,e,n){n?t.removeEventListener(zg,e):t.addEventListener(zg,e)}function Qg(t,e,n,r){const i=Bg+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function Yg(t,e){return t.style[Bg+e]}class Xg{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Hg(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Fm(this.element,n))})}this.currentSnapshot=t}}class Jg extends Bp{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=um(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Zg{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return im(t)}matchesElement(t,e){return sm(t,e)}containsElement(t,e){return om(t,e)}query(t,e,n){return am(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>um(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){o&&this._notifyFaultyScrubber();const a=s.filter(t=>t instanceof Xg),u={};Om(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Pm(t,e,u));if(0==n)return new Jg(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=Vg(t,e),f=new Xg(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class ty{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Fm(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class ey{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ny().toString()),this._cssKeyframesDriver=new Zg}validateStyleProperty(t){return im(t)}matchesElement(t,e){return sm(t,e)}containsElement(t,e){return om(t,e)}query(t,e,n){return am(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof ty);Om(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=Vg(t,e=Pm(t,e=e.map(t=>bm(t,!1)),u));return new ty(t,e,a,l)}}function ny(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let ry=(()=>{class t extends Dp{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:ce.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Pp(t):t;return oy(this._renderer,null,e,"register",[n]),new iy(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(Kt(jo),Kt(Uu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class iy extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new sy(this._id,t,e||{},this._renderer)}}class sy{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return oy(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function oy(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const ay="@",uy="@.disabled";let cy=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new ly("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new hy(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(Kt(jo),Kt(Mg),Kt(cu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class ly{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==ay&&e==uy?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class hy extends ly{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==ay?"."==e.charAt(1)&&e==uy?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==ay){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=ay&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let dy=(()=>{class t extends Mg{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(Kt(Uu),Kt(lm),Kt(og))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const fy=new Mt("AnimationModuleType"),py=[{provide:lm,useFactory:function(){return"function"==typeof ny()?new ey:new Zg}},{provide:fy,useValue:"BrowserAnimations"},{provide:Dp,useClass:ry},{provide:og,useFactory:function(){return new ag}},{provide:Mg,useClass:dy},{provide:jo,useFactory:function(t,e,n){return new cy(t,e,n)},deps:[hl,Mg,cu]}];let my=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:py,imports:[Sl]}),t})(),gy=(()=>{class t{}return t.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",t.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",t.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",t.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",t})(),yy=(()=>{class t{}return t.COMPLEX="375ms",t.ENTERING="225ms",t.EXITING="195ms",t})();const vy=new Ho("10.2.7"),wy=new Mt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let _y,by=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getDocument(){const t=this._document||document;return"object"==typeof t&&t?t:null}_getWindow(){const t=this._getDocument(),e=(null==t?void 0:t.defaultView)||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return vr()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){const t=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),e=this._getDocument();t&&e&&!e.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){const t=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,e=this._getDocument();if(t||!e||!e.body||"function"!=typeof getComputedStyle)return;const n=e.createElement("div");n.classList.add("mat-theme-loaded-marker"),e.body.appendChild(n);const r=getComputedStyle(n);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.body.removeChild(n)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&vy.full!==kp.full&&console.warn("The Angular Material version ("+vy.full+") does not match the Angular CDK version ("+kp.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Kt(Ip),Kt(wy,8),Kt(Uu,8))},imports:[[xp],xp]}),t})();function Ey(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=ip(t)}}}function Sy(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),e&&this._elementRef.nativeElement.classList.add("mat-"+e),this._color=e)}}}function Ty(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ip(t)}}}function Iy(t){return class extends t{constructor(...t){super(...t),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new v(t=>{this._isInitialized?this._notifySubscriber(t):this._pendingSubscribers.push(t)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(t){t.next(),t.complete()}}}try{_y="undefined"!=typeof Intl}catch(WE){_y=!1}class Cy{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ay={enterDuration:450,exitDuration:400},xy=hp({passive:!0}),ky=["mousedown","touchstart"],Dy=["mouseup","mouseleave","touchend","touchcancel"];class Ny{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=sp(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},Ay),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const s=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),o=t-r.left,a=e-r.top,u=i.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=o-s+"px",c.style.top=a-s+"px",c.style.height=2*s+"px",c.style.width=2*s+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=u+"ms",this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const l=new Cy(this,c,n);return l.state=0,this._activeRipples.add(l),n.persistent||(this._mostRecentTransientRipple=l),this._runTimeoutOutsideZone(()=>{const t=l===this._mostRecentTransientRipple;l.state=1,n.persistent||t&&this._isPointerDown||l.fadeOut()},u),l}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},Ay),t.config.animation);n.style.transitionDuration=r.exitDuration+"ms",n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=sp(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(ky))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Dy),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=yp(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,xy)})})}_removeTriggerEvents(){this._triggerElement&&(ky.forEach(t=>{this._triggerElement.removeEventListener(t,this,xy)}),this._pointerUpEventsRegistered&&Dy.forEach(t=>{this._triggerElement.removeEventListener(t,this,xy)}))}}const Ry=new Mt("mat-ripple-global-options");let Oy=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Ny(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(Ms(Mo),Ms(cu),Ms(cp),Ms(Ry,8),Ms(fy,8))},t.\u0275dir=we({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&uo("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),Py=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},imports:[[by,lp],by]}),t})();const Ly=["mat-sort-header",""];function Fy(t,e){if(1&t){const t=Ws();qs(0,"div",3),Ys("@arrowPosition.start",(function(){return ln(t),Zs()._disableViewStateAnimation=!0}))("@arrowPosition.done",(function(){return ln(t),Zs()._disableViewStateAnimation=!1})),zs(1,"div",4),qs(2,"div",5),zs(3,"div",6),zs(4,"div",7),zs(5,"div",8),Bs(),Bs()}if(2&t){const t=Zs();js("@arrowOpacity",t._getArrowViewState())("@arrowPosition",t._getArrowViewState())("@allowChildren",t._getArrowDirectionState()),Mr(2),js("@indicator",t._getArrowDirectionState()),Mr(1),js("@leftPointer",t._getArrowDirectionState()),Mr(1),js("@rightPointer",t._getArrowDirectionState())}}const My=["*"];class Vy{}const jy=Iy(Ey(Vy));let Uy=(()=>{class t extends jy{constructor(){super(...arguments),this.sortables=new Map,this._stateChanges=new S,this.start="asc",this._direction="",this.sortChange=new Ea}get direction(){return this._direction}set direction(t){this._direction=t}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=ip(t)}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){if(!t)return"";let e=function(t,e){let n=["asc","desc"];return"desc"==t&&n.reverse(),e||n.push(""),n}(t.start||this.start,null!=t.disableClear?t.disableClear:this.disableClear),n=e.indexOf(this.direction)+1;return n>=e.length&&(n=0),e[n]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return qy(e||t)},t.\u0275dir=we({type:t,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"],active:["matSortActive","active"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[Ss,je]}),t})();const qy=hr(Uy),By=yy.ENTERING+" "+gy.STANDARD_CURVE,zy={indicator:Rp("indicator",[Fp("active-asc, asc",Lp({transform:"translateY(0px)"})),Fp("active-desc, desc",Lp({transform:"translateY(10px)"})),Vp("active-asc <=> active-desc",Op(By))]),leftPointer:Rp("leftPointer",[Fp("active-asc, asc",Lp({transform:"rotate(-45deg)"})),Fp("active-desc, desc",Lp({transform:"rotate(45deg)"})),Vp("active-asc <=> active-desc",Op(By))]),rightPointer:Rp("rightPointer",[Fp("active-asc, asc",Lp({transform:"rotate(45deg)"})),Fp("active-desc, desc",Lp({transform:"rotate(-45deg)"})),Vp("active-asc <=> active-desc",Op(By))]),arrowOpacity:Rp("arrowOpacity",[Fp("desc-to-active, asc-to-active, active",Lp({opacity:1})),Fp("desc-to-hint, asc-to-hint, hint",Lp({opacity:.54})),Fp("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",Lp({opacity:0})),Vp("* => asc, * => desc, * => active, * => hint, * => void",Op("0ms")),Vp("* <=> *",Op(By))]),arrowPosition:Rp("arrowPosition",[Vp("* => desc-to-hint, * => desc-to-active",Op(By,Mp([Lp({transform:"translateY(-25%)"}),Lp({transform:"translateY(0)"})]))),Vp("* => hint-to-desc, * => active-to-desc",Op(By,Mp([Lp({transform:"translateY(0)"}),Lp({transform:"translateY(25%)"})]))),Vp("* => asc-to-hint, * => asc-to-active",Op(By,Mp([Lp({transform:"translateY(25%)"}),Lp({transform:"translateY(0)"})]))),Vp("* => hint-to-asc, * => active-to-asc",Op(By,Mp([Lp({transform:"translateY(0)"}),Lp({transform:"translateY(-25%)"})]))),Fp("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",Lp({transform:"translateY(0)"})),Fp("hint-to-desc, active-to-desc, desc",Lp({transform:"translateY(-25%)"})),Fp("hint-to-asc, active-to-asc, asc",Lp({transform:"translateY(25%)"}))]),allowChildren:Rp("allowChildren",[Vp("* <=> *",[Up("@*",jp(),{optional:!0})])])};let Hy=(()=>{class t{constructor(){this.changes=new S,this.sortButtonLabel=t=>"Change sorting for "+t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:function(){return new t},token:t,providedIn:"root"}),t})();const Gy={provide:Hy,deps:[[new rt,new st,Hy]],useFactory:function(t){return t||new Hy}};class $y{}const Wy=Ey($y);let Ky=(()=>{class t extends Wy{constructor(t,e,n,r,i,s){super(),this._intl=t,this._sort=n,this._columnDef=r,this._focusMonitor=i,this._elementRef=s,this._showIndicatorHint=!1,this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this._rerenderSubscription=G(n.sortChange,n._stateChanges,t.changes).subscribe(()=>{this._isSorted()&&this._updateArrowDirection(),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),e.markForCheck()})}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=ip(t)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>this._setIndicatorHintVisible(!!t))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(t){this._isDisabled()&&t||(this._showIndicatorHint=t,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(t){this._viewState=t,this._disableViewStateAnimation&&(this._viewState={toState:t.toState})}_toggleOnInteraction(){this._sort.sort(this),"hint"!==this._viewState.toState&&"active"!==this._viewState.toState||(this._disableViewStateAnimation=!0);const t=this._isSorted()?{fromState:this._arrowDirection,toState:"active"}:{fromState:"active",toState:this._arrowDirection};this._setAnimationTransitionState(t),this._showIndicatorHint=!1}_handleClick(){this._isDisabled()||this._toggleOnInteraction()}_handleKeydown(t){this._isDisabled()||32!==t.keyCode&&13!==t.keyCode||(t.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const t=this._viewState.fromState;return(t?t+"-to-":"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}}return t.\u0275fac=function(e){return new(e||t)(Ms(Hy),Ms(ns),Ms(Uy,8),Ms("MAT_SORT_HEADER_COLUMN_DEF",8),Ms(_p),Ms(Mo))},t.\u0275cmp=fe({type:t,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(t,e){1&t&&Ys("click",(function(){return e._handleClick()}))("keydown",(function(t){return e._handleKeydown(t)}))("mouseenter",(function(){return e._setIndicatorHintVisible(!0)}))("mouseleave",(function(){return e._setIndicatorHintVisible(!1)})),2&t&&(Ps("aria-sort",e._getAriaSortAttribute()),uo("mat-sort-header-disabled",e._isDisabled()))},inputs:{disabled:"disabled",arrowPosition:"arrowPosition",disableClear:"disableClear",id:["mat-sort-header","id"],start:"start"},exportAs:["matSortHeader"],features:[Ss],attrs:Ly,ngContentSelectors:My,decls:4,vars:6,consts:[["role","button",1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(t,e){1&t&&(eo(),qs(0,"div",0),qs(1,"div",1),no(2),Bs(),Fs(3,Fy,6,6,"div",2),Bs()),2&t&&(uo("mat-sort-header-sorted",e._isSorted())("mat-sort-header-position-before","before"==e.arrowPosition),Ps("tabindex",e._isDisabled()?null:0),Mr(3),js("ngIf",e._renderArrow()))},directives:[Bc],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}\n"],encapsulation:2,data:{animation:[zy.indicator,zy.leftPointer,zy.rightPointer,zy.arrowOpacity,zy.arrowPosition,zy.allowChildren]},changeDetection:0}),t})(),Qy=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[Gy],imports:[[$c]]}),t})();function Yy(t){return t&&"function"==typeof t.connect}class Xy{applyChanges(t,e,n,r,i){t.forEachOperation((t,r,s)=>{let o,a;if(null==t.previousIndex){const i=n(t,r,s);o=e.createEmbeddedView(i.templateRef,i.context,i.index),a=1}else null==s?(e.remove(r),a=3):(o=e.get(r),e.move(o,s),a=2);i&&i({context:null==o?void 0:o.context,operation:a,record:t})})}detach(){}}const Jy=new Mt("_ViewRepeater");function Zy(t){return e=>e.lift(new tv(t))}class tv{constructor(t){this.notifier=t}call(t,e){const n=new ev(t),r=j(this.notifier,new M(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class ev extends V{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let nv=1;const rv=(()=>Promise.resolve())(),iv={};function sv(t){return t in iv&&(delete iv[t],!0)}const ov={setImmediate(t){const e=nv++;return iv[e]=!0,rv.then(()=>sv(e)&&t()),e},clearImmediate(t){sv(t)}};class av extends fp{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=ov.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(ov.clearImmediate(e),t.scheduled=void 0)}}class uv extends mp{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const cv=new uv(av);class lv extends fp{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}class hv extends mp{}const dv=new hv(lv);let fv=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Tl(this.value);case"E":return t=this.error,new v(e=>e.error(t));case"C":return Ll()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function pv(t,e=0){return function(n){return n.lift(new mv(t,e))}}class mv{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new gv(t,this.scheduler,this.delay))}}class gv extends p{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(gv.dispatch,this.delay,new yv(t,this.destination)))}_next(t){this.scheduleMessage(fv.createNext(t))}_error(t){this.scheduleMessage(fv.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(fv.createComplete()),this.unsubscribe()}}class yv{constructor(t,e){this.notification=t,this.destination=e}}let vv=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)}}),t})(),wv=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},imports:[[xp,lp,vv],xp,vv]}),t})();const _v=[[["caption"]],[["colgroup"],["col"]]],bv=["caption","colgroup, col"];function Ev(t){return class extends t{constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=ip(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}}}const Sv=new Mt("CDK_TABLE");let Tv=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ms(aa))},t.\u0275dir=we({type:t,selectors:[["","cdkCellDef",""]]}),t})(),Iv=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ms(aa))},t.\u0275dir=we({type:t,selectors:[["","cdkHeaderCellDef",""]]}),t})(),Cv=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ms(aa))},t.\u0275dir=we({type:t,selectors:[["","cdkFooterCellDef",""]]}),t})();class Av{}const xv=Ev(Av);let kv=(()=>{class t extends xv{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const e=this._stickyEnd;this._stickyEnd=ip(t),this._hasStickyChanged=e!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=["cdk-column-"+this.cssClassFriendlyName]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return t.\u0275fac=function(e){return new(e||t)(Ms(Sv,8))},t.\u0275dir=we({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,e,n){var r;1&t&&(Ma(n,Tv,!0),Ma(n,Iv,!0),Ma(n,Cv,!0)),2&t&&(Oa(r=Va())&&(e.cell=r.first),Oa(r=Va())&&(e.headerCell=r.first),Oa(r=Va())&&(e.footerCell=r.first))},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[Oo([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),Ss]}),t})();class Dv{constructor(t,e){const n=e.nativeElement.classList;for(const r of t._columnCssClassName)n.add(r)}}let Nv=(()=>{class t extends Dv{constructor(t,e){super(t,e)}}return t.\u0275fac=function(e){return new(e||t)(Ms(kv),Ms(Mo))},t.\u0275dir=we({type:t,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[Ss]}),t})(),Rv=(()=>{class t extends Dv{constructor(t,e){super(t,e)}}return t.\u0275fac=function(e){return new(e||t)(Ms(kv),Ms(Mo))},t.\u0275dir=we({type:t,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:["role","gridcell",1,"cdk-cell"],features:[Ss]}),t})();class Ov{constructor(){this.tasks=[],this.endTasks=[]}}const Pv=new Mt("_COALESCED_STYLE_SCHEDULER");let Lv=(()=>{class t{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new S}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new Ov,this._getScheduleObservable().pipe(Zy(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new Ov;for(const e of t.tasks)e();for(const e of t.endTasks)e()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?F(Promise.resolve(void 0)):this._ngZone.onStable.pipe(eh(1))}}return t.\u0275fac=function(e){return new(e||t)(Kt(cu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Fv=(()=>{class t{constructor(t,e){this.template=t,this._differs=e}ngOnChanges(t){if(!this._columnsDiffer){const e=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(e).create(),this._columnsDiffer.diff(e)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof jv?t.headerCell.template:this instanceof Bv?t.footerCell.template:t.cell.template}}return t.\u0275fac=function(e){return new(e||t)(Ms(aa),Ms(na))},t.\u0275dir=we({type:t,features:[je]}),t})();class Mv extends Fv{}const Vv=Ev(Mv);let jv=(()=>{class t extends Vv{constructor(t,e,n){super(t,e),this._table=n}ngOnChanges(t){super.ngOnChanges(t)}}return t.\u0275fac=function(e){return new(e||t)(Ms(aa),Ms(na),Ms(Sv,8))},t.\u0275dir=we({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[Ss,je]}),t})();class Uv extends Fv{}const qv=Ev(Uv);let Bv=(()=>{class t extends qv{constructor(t,e,n){super(t,e),this._table=n}ngOnChanges(t){super.ngOnChanges(t)}}return t.\u0275fac=function(e){return new(e||t)(Ms(aa),Ms(na),Ms(Sv,8))},t.\u0275dir=we({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[Ss,je]}),t})(),zv=(()=>{class t extends Fv{constructor(t,e,n){super(t,e),this._table=n}}return t.\u0275fac=function(e){return new(e||t)(Ms(aa),Ms(na),Ms(Sv,8))},t.\u0275dir=we({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[Ss]}),t})(),Hv=(()=>{class t{constructor(e){this._viewContainer=e,t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}}return t.\u0275fac=function(e){return new(e||t)(Ms(ca))},t.\u0275dir=we({type:t,selectors:[["","cdkCellOutlet",""]]}),t.mostRecentCellOutlet=null,t})(),Gv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,e){1&t&&$s(0,0)},directives:[Hv],encapsulation:2}),t})(),$v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,e){1&t&&$s(0,0)},directives:[Hv],encapsulation:2}),t})(),Wv=(()=>{class t{constructor(t){this.templateRef=t}}return t.\u0275fac=function(e){return new(e||t)(Ms(aa))},t.\u0275dir=we({type:t,selectors:[["ng-template","cdkNoDataRow",""]]}),t})();const Kv=["top","bottom","left","right"];class Qv{constructor(t,e,n,r,i=!0,s=!0){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=n,this._coalescedStyleScheduler=r,this._isBrowser=i,this._needsPositionStickyOnElement=s}clearStickyPositioning(t,e){const n=[];for(const r of t)if(r.nodeType===r.ELEMENT_NODE){n.push(r);for(let t=0;t<r.children.length;t++)n.push(r.children[t])}this._scheduleStyleChanges(()=>{for(const t of n)this._removeStickyStyle(t,e)})}updateStickyColumns(t,e,n){if(!t.length||!this._isBrowser||!e.some(t=>t)&&!n.some(t=>t))return;const r=t[0],i=r.children.length,s=this._getCellWidths(r),o=this._getStickyStartColumnPositions(s,e),a=this._getStickyEndColumnPositions(s,n);this._scheduleStyleChanges(()=>{const r="rtl"===this.direction,s=r?"right":"left",u=r?"left":"right";for(const c of t)for(let t=0;t<i;t++){const r=c.children[t];e[t]&&this._addStickyStyle(r,s,o[t]),n[t]&&this._addStickyStyle(r,u,a[t])}})}stickRows(t,e,n){if(!this._isBrowser)return;const r="bottom"===n?t.slice().reverse():t,i="bottom"===n?e.slice().reverse():e,s=[],o=[];for(let a=0,u=0;a<r.length;a++){if(s[a]=u,!i[a])continue;const t=r[a];o[a]=this._isNativeHtmlTable?Array.from(t.children):[t],a!==r.length-1&&(u+=t.getBoundingClientRect().height)}this._scheduleStyleChanges(()=>{for(let t=0;t<r.length;t++){if(!i[t])continue;const e=s[t];for(const r of o[t])this._addStickyStyle(r,n,e)}})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const n=t.querySelector("tfoot");this._scheduleStyleChanges(()=>{e.some(t=>!t)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0)})}_removeStickyStyle(t,e){for(const n of e)t.style[n]="";Kv.some(n=>-1===e.indexOf(n)&&t.style[n])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,n){t.classList.add(this._stickCellCss),t.style[e]=n+"px",t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let n=0;for(const r of Kv)t.style[r]&&(n+=e[r]);return n?""+n:""}_getCellWidths(t){const e=[],n=t.children;for(let r=0;r<n.length;r++)e.push(n[r].getBoundingClientRect().width);return e}_getStickyStartColumnPositions(t,e){const n=[];let r=0;for(let i=0;i<t.length;i++)e[i]&&(n[i]=r,r+=t[i]);return n}_getStickyEndColumnPositions(t,e){const n=[];let r=0;for(let i=t.length;i>0;i--)e[i]&&(n[i]=r,r+=t[i]);return n}_scheduleStyleChanges(t){this._coalescedStyleScheduler?this._coalescedStyleScheduler.schedule(t):t()}}let Yv=(()=>{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(Ms(ca),Ms(Mo))},t.\u0275dir=we({type:t,selectors:[["","rowOutlet",""]]}),t})(),Xv=(()=>{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(Ms(ca),Ms(Mo))},t.\u0275dir=we({type:t,selectors:[["","headerRowOutlet",""]]}),t})(),Jv=(()=>{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(Ms(ca),Ms(Mo))},t.\u0275dir=we({type:t,selectors:[["","footerRowOutlet",""]]}),t})(),Zv=(()=>{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(Ms(ca),Ms(Mo))},t.\u0275dir=we({type:t,selectors:[["","noDataRowOutlet",""]]}),t})(),tw=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this._differs=t,this._changeDetectorRef=e,this._elementRef=n,this._dir=i,this._platform=o,this._viewRepeater=a,this._coalescedStyleScheduler=u,this._onDestroy=new S,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this.viewChange=new Il({start:0,end:Number.MAX_VALUE}),r||this._elementRef.nativeElement.setAttribute("role","grid"),this._document=s,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=ip(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,e)=>this.trackBy?this.trackBy(e.dataIndex,e.data):e)}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const t=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():t&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){this._rowOutlet.viewContainer.clear(),this._noDataRowOutlet.viewContainer.clear(),this._headerRowOutlet.viewContainer.clear(),this._footerRowOutlet.viewContainer.clear(),this._cachedRenderRowsMap.clear(),this._onDestroy.next(),this._onDestroy.complete(),Yy(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return void this._updateNoDataRow();const e=this._rowOutlet.viewContainer;this._viewRepeater?this._viewRepeater.applyChanges(t,e,(t,e,n)=>this._getEmbeddedViewArgs(t.item,n),t=>t.item.data,t=>{1===t.operation&&t.context&&this._renderCellTemplateForItem(t.record.item.rowDef,t.context)}):t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const e=t.item;this._renderRow(this._rowOutlet,e.rowDef,r,{$implicit:e.data})}else if(null==r)e.remove(n);else{const t=e.get(n);e.move(t,r)}}),this._updateRowIndexContext(),t.forEachIdentityChange(t=>{e.get(t.currentIndex).context.$implicit=t.item.data}),this._updateNoDataRow(),this.updateStickyColumnStyles()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),e=this._elementRef.nativeElement.querySelector("thead");e&&(e.style.display=t.length?"":"none");const n=this._headerRowDefs.map(t=>t.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,n,"top"),this._headerRowDefs.forEach(t=>t.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),e=this._elementRef.nativeElement.querySelector("tfoot");e&&(e.style.display=t.length?"":"none");const n=this._footerRowDefs.map(t=>t.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,n,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,n),this._footerRowDefs.forEach(t=>t.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),e=this._getRenderedRows(this._rowOutlet),n=this._getRenderedRows(this._footerRowOutlet);this._stickyStyler.clearStickyPositioning([...t,...e,...n],["left","right"]),t.forEach((t,e)=>{this._addStickyColumnStyles([t],this._headerRowDefs[e])}),this._rowDefs.forEach(t=>{const n=[];for(let r=0;r<e.length;r++)this._renderRows[r].rowDef===t&&n.push(e[r]);this._addStickyColumnStyles(n,t)}),n.forEach((t,e)=>{this._addStickyColumnStyles([t],this._footerRowDefs[e])}),Array.from(this._columnDefsByName.values()).forEach(t=>t.resetStickyChanged())}_getAllRenderRows(){const t=[],e=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let n=0;n<this._data.length;n++){let r=this._data[n];const i=this._getRenderRowsForData(r,n,e.get(r));this._cachedRenderRowsMap.has(r)||this._cachedRenderRowsMap.set(r,new WeakMap);for(let e=0;e<i.length;e++){let n=i[e];const r=this._cachedRenderRowsMap.get(n.data);r.has(n.rowDef)?r.get(n.rowDef).push(n):r.set(n.rowDef,[n]),t.push(n)}}return t}_getRenderRowsForData(t,e,n){return this._getRowDefs(t,e).map(r=>{const i=n&&n.has(r)?n.get(r):[];if(i.length){const t=i.shift();return t.dataIndex=e,t}return{data:t,rowDef:r,dataIndex:e}})}_cacheColumnDefs(){this._columnDefsByName.clear(),ew(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(t=>{this._columnDefsByName.has(t.name),this._columnDefsByName.set(t.name,t)})}_cacheRowDefs(){this._headerRowDefs=ew(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=ew(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=ew(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(t=>!t.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(t,e)=>t||!!e.getColumnsDiff(),e=this._rowDefs.reduce(t,!1);e&&this._forceRenderDataRows();const n=this._headerRowDefs.reduce(t,!1);n&&this._forceRenderHeaderRows();const r=this._footerRowDefs.reduce(t,!1);return r&&this._forceRenderFooterRows(),e||n||r}_switchDataSource(t){this._data=[],Yy(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;var e;Yy(this.dataSource)?t=this.dataSource.connect(this):(e=this.dataSource)&&(e instanceof v||"function"==typeof e.lift&&"function"==typeof e.subscribe)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=Tl(this.dataSource)),this._renderChangeSubscription=t.pipe(Zy(this._onDestroy)).subscribe(t=>{this._data=t||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,e)=>this._renderRow(this._headerRowOutlet,t,e)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,e)=>this._renderRow(this._footerRowOutlet,t,e)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,e){const n=Array.from(e.columns||[]).map(t=>this._columnDefsByName.get(t)),r=n.map(t=>t.sticky),i=n.map(t=>t.stickyEnd);this._stickyStyler.updateStickyColumns(t,r,i)}_getRenderedRows(t){const e=[];for(let n=0;n<t.viewContainer.length;n++){const r=t.viewContainer.get(n);e.push(r.rootNodes[0])}return e}_getRowDefs(t,e){if(1==this._rowDefs.length)return[this._rowDefs[0]];let n=[];if(this.multiTemplateDataRows)n=this._rowDefs.filter(n=>!n.when||n.when(e,t));else{let r=this._rowDefs.find(n=>n.when&&n.when(e,t))||this._defaultRowDef;r&&n.push(r)}return n}_getEmbeddedViewArgs(t,e){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:e}}_renderRow(t,e,n,r={}){const i=t.viewContainer.createEmbeddedView(e.template,r,n);return this._renderCellTemplateForItem(e,r),i}_renderCellTemplateForItem(t,e){for(let n of this._getCellTemplates(t))Hv.mostRecentCellOutlet&&Hv.mostRecentCellOutlet._viewContainer.createEmbeddedView(n,e);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let e=0,n=t.length;e<n;e++){const r=t.get(e).context;r.count=n,r.first=0===e,r.last=e===n-1,r.even=e%2==0,r.odd=!r.even,this.multiTemplateDataRows?(r.dataIndex=this._renderRows[e].dataIndex,r.renderIndex=e):r.index=this._renderRows[e].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,e=>{const n=this._columnDefsByName.get(e);return t.extractCellTemplate(n)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),e=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const n of e){const e=this._document.createElement(n.tag);e.setAttribute("role","rowgroup");for(const t of n.outlets)e.appendChild(t.elementRef.nativeElement);t.appendChild(e)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(t,e)=>t||e.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&this.updateStickyColumnStyles()}_setupStickyStyler(){this._stickyStyler=new Qv(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement),(this._dir?this._dir.change:Tl()).pipe(Zy(this._onDestroy)).subscribe(t=>{this._stickyStyler.direction=t,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(t=>!t._table||t._table===this)}_updateNoDataRow(){if(this._noDataRow){const t=0===this._rowOutlet.viewContainer.length;if(t!==this._isShowingNoDataRow){const e=this._noDataRowOutlet.viewContainer;t?e.createEmbeddedView(this._noDataRow.templateRef):e.clear(),this._isShowingNoDataRow=t}}}}return t.\u0275fac=function(e){return new(e||t)(Ms(na),Ms(ns),Ms(Mo),Vs("role"),Ms(Ap,8),Ms(Uu),Ms(cp),Ms(Jy,8),Ms(Pv,8))},t.\u0275cmp=fe({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,e,n){var r;1&t&&(Ma(n,Wv,!0),Ma(n,kv,!0),Ma(n,zv,!0),Ma(n,jv,!0),Ma(n,Bv,!0)),2&t&&(Oa(r=Va())&&(e._noDataRow=r.first),Oa(r=Va())&&(e._contentColumnDefs=r),Oa(r=Va())&&(e._contentRowDefs=r),Oa(r=Va())&&(e._contentHeaderRowDefs=r),Oa(r=Va())&&(e._contentFooterRowDefs=r))},viewQuery:function(t,e){var n;1&t&&(Pa(Yv,!0),Pa(Xv,!0),Pa(Jv,!0),Pa(Zv,!0)),2&t&&(Oa(n=Va())&&(e._rowOutlet=n.first),Oa(n=Va())&&(e._headerRowOutlet=n.first),Oa(n=Va())&&(e._footerRowOutlet=n.first),Oa(n=Va())&&(e._noDataRowOutlet=n.first))},hostAttrs:[1,"cdk-table"],inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows"},exportAs:["cdkTable"],features:[Oo([{provide:Sv,useExisting:t},{provide:Jy,useClass:Xy},{provide:Pv,useClass:Lv}])],ngContentSelectors:bv,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,e){1&t&&(eo(_v),no(0),no(1,1),$s(2,0),$s(3,1),$s(4,2),$s(5,3))},directives:[Xv,Yv,Zv,Jv],encapsulation:2}),t})();function ew(t,e){return t.concat(Array.from(e))}let nw=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},imports:[[wv]]}),t})();const rw=[[["caption"]],[["colgroup"],["col"]]],iw=["caption","colgroup, col"];let sw=(()=>{class t extends tw{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return t.\u0275fac=function(e){return ow(e||t)},t.\u0275cmp=fe({type:t,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],exportAs:["matTable"],features:[Oo([{provide:Jy,useClass:Xy},{provide:tw,useExisting:t},{provide:Sv,useExisting:t},{provide:Pv,useClass:Lv}]),Ss],ngContentSelectors:iw,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,e){1&t&&(eo(rw),no(0),no(1,1),$s(2,0),$s(3,1),$s(4,2),$s(5,3))},directives:[Xv,Yv,Zv,Jv],styles:['mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-row::after,mat-header-row::after,mat-footer-row::after{display:inline-block;min-height:inherit;content:""}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:-webkit-sticky;position:sticky}\n'],encapsulation:2}),t})();const ow=hr(sw);let aw=(()=>{class t extends Tv{}return t.\u0275fac=function(e){return uw(e||t)},t.\u0275dir=we({type:t,selectors:[["","matCellDef",""]],features:[Oo([{provide:Tv,useExisting:t}]),Ss]}),t})();const uw=hr(aw);let cw=(()=>{class t extends Iv{}return t.\u0275fac=function(e){return lw(e||t)},t.\u0275dir=we({type:t,selectors:[["","matHeaderCellDef",""]],features:[Oo([{provide:Iv,useExisting:t}]),Ss]}),t})();const lw=hr(cw);let hw=(()=>{class t extends kv{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push("mat-column-"+this.cssClassFriendlyName)}}return t.\u0275fac=function(e){return dw(e||t)},t.\u0275dir=we({type:t,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[Oo([{provide:kv,useExisting:t},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),Ss]}),t})();const dw=hr(hw);let fw=(()=>{class t extends Nv{}return t.\u0275fac=function(e){return pw(e||t)},t.\u0275dir=we({type:t,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[Ss]}),t})();const pw=hr(fw);let mw=(()=>{class t extends Rv{}return t.\u0275fac=function(e){return gw(e||t)},t.\u0275dir=we({type:t,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[Ss]}),t})();const gw=hr(mw);let yw=(()=>{class t extends jv{}return t.\u0275fac=function(e){return vw(e||t)},t.\u0275dir=we({type:t,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[Oo([{provide:jv,useExisting:t}]),Ss]}),t})();const vw=hr(yw);let ww=(()=>{class t extends zv{}return t.\u0275fac=function(e){return _w(e||t)},t.\u0275dir=we({type:t,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[Oo([{provide:zv,useExisting:t}]),Ss]}),t})();const _w=hr(ww);let bw=(()=>{class t extends Gv{}return t.\u0275fac=function(e){return Ew(e||t)},t.\u0275cmp=fe({type:t,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[Oo([{provide:Gv,useExisting:t}]),Ss],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,e){1&t&&$s(0,0)},directives:[Hv],encapsulation:2}),t})();const Ew=hr(bw);let Sw=(()=>{class t extends $v{}return t.\u0275fac=function(e){return Tw(e||t)},t.\u0275cmp=fe({type:t,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[Oo([{provide:$v,useExisting:t}]),Ss],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,e){1&t&&$s(0,0)},directives:[Hv],encapsulation:2}),t})();const Tw=hr(Sw);let Iw=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},imports:[[nw,by],by]}),t})();class Cw extends class{}{constructor(t=[]){super(),this._renderData=new Il([]),this._filter=new Il(""),this._internalPageChanges=new S,this._renderChangesSubscription=h.EMPTY,this.sortingDataAccessor=(t,e)=>{const n=t[e];if(function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(n)){const t=Number(n);return t<9007199254740991?t:n}return n},this.sortData=(t,e)=>{const n=e.active,r=e.direction;return n&&""!=r?t.sort((t,e)=>{let i=this.sortingDataAccessor(t,n),s=this.sortingDataAccessor(e,n);const o=typeof i,a=typeof s;o!==a&&("number"===o&&(i+=""),"number"===a&&(s+=""));let u=0;return null!=i&&null!=s?i>s?u=1:i<s&&(u=-1):null!=i?u=1:null!=s&&(u=-1),u*("asc"==r?1:-1)}):t},this.filterPredicate=(t,e)=>{const n=Object.keys(t).reduce((e,n)=>e+t[n]+"\u25ec","").toLowerCase(),r=e.trim().toLowerCase();return-1!=n.indexOf(r)},this._data=new Il(t),this._updateChangeSubscription()}get data(){return this._data.value}set data(t){this._data.next(t)}get filter(){return this._filter.value}set filter(t){this._filter.next(t)}get sort(){return this._sort}set sort(t){this._sort=t,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(t){this._paginator=t,this._updateChangeSubscription()}_updateChangeSubscription(){const t=this._sort?G(this._sort.sortChange,this._sort.initialized):Tl(null),e=this._paginator?G(this._paginator.page,this._internalPageChanges,this._paginator.initialized):Tl(null),n=Dl([this._data,this._filter]).pipe(C(([t])=>this._filterData(t))),r=Dl([n,t]).pipe(C(([t])=>this._orderData(t))),i=Dl([r,e]).pipe(C(([t])=>this._pageData(t)));this._renderChangesSubscription.unsubscribe(),this._renderChangesSubscription=i.subscribe(t=>this._renderData.next(t))}_filterData(t){return this.filteredData=this.filter?t.filter(t=>this.filterPredicate(t,this.filter)):t,this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(t){return this.sort?this.sortData(t.slice(),this.sort):t}_pageData(t){if(!this.paginator)return t;const e=this.paginator.pageIndex*this.paginator.pageSize;return t.slice(e,e+this.paginator.pageSize)}_updatePaginator(t){Promise.resolve().then(()=>{const e=this.paginator;if(e&&(e.length=t,e.pageIndex>0)){const t=Math.ceil(e.length/e.pageSize)-1||0,n=Math.min(e.pageIndex,t);n!==e.pageIndex&&(e.pageIndex=n,this._internalPageChanges.next())}})}connect(){return this._renderData}disconnect(){}}class Aw extends v{constructor(t,e=0,n=cv){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,(!(!u(r=e)&&r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=cv)}static create(t,e=0,n=cv){return new Aw(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(Aw.dispatch,this.delayTime,{source:this.source,subscriber:t})}}class xw{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new Aw(e,this.delay,this.scheduler).subscribe(t)}}var kw=n("Wcq6"),Dw=n.n(kw);function Nw(){}class Rw{constructor(t,e=dv){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class Ow{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Nw,{},Nw,Nw)),e.pipe(ph({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Pw{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Rw(Zone.current)),this.insideAngular=t.run(()=>new Rw(Zone.current,gp))}}const Lw=new Mt("angularfire2.app.options"),Fw=new Mt("angularfire2.app.nameOrConfig"),Mw=new Ho("6.0.4");function Vw(t,e,n){const r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",Dw.a.apps.filter(t=>t&&t.name===r.name)[0]||e.runOutsideAngular(()=>Dw.a.initializeApp(t,r))}const jw={provide:class{},useFactory:Vw,deps:[Lw,cu,[new rt,Fw]]};let Uw=(()=>{class t{constructor(t){Dw.a.registerVersion("angularfire",Mw.full,t.toString()),Dw.a.registerVersion("angular",Go.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:Lw,useValue:e},{provide:Fw,useValue:n}]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Kt(Ka))},providers:[jw]}),t})();function qw(t,e){return function(t,e=gp){return new v(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot(n)}):r=t.onSnapshot(n),()=>{null!=r&&r()}})}(t,e)}function Bw(t,e){return qw(t,e).pipe(C(t=>({payload:t,type:"query"})))}function zw(t,e){return Bw(t,e).pipe(C(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function Hw(t,e,n){return Bw(t,n).pipe(C(t=>t.payload.docChanges()),sh((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e),[]),C(t=>t.map(t=>({type:t.type,payload:t}))))}function Gw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}n("GsTq");class $w{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?zw(this.query,this.afs.schedulers.outsideAngular).pipe(C(e=>e.filter(e=>t.indexOf(e.type)>-1)),Vl(t=>t.length>0),this.afs.keepUnstableUntilFirst):zw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(sh((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Gw(t);return Hw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Bw(this.query,this.afs.schedulers.outsideAngular).pipe(C(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return F(this.query.get(t)).pipe(pv(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Ww(this.ref.doc(t),this.afs)}}class Ww{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Zw(n,e);return new $w(r,i,this.afs)}snapshotChanges(){return qw(this.ref,this.afs.schedulers.outsideAngular).pipe(C(t=>({payload:t,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(C(t=>t.payload.data()))}get(t){return F(this.ref.get(t)).pipe(pv(this.afs.schedulers.insideAngular))}}class Kw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?zw(this.query,this.afs.schedulers.outsideAngular).pipe(C(e=>e.filter(e=>t.indexOf(e.type)>-1)),Vl(t=>t.length>0),this.afs.keepUnstableUntilFirst):zw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(sh((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Gw(t);return Hw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return Bw(this.query,this.afs.schedulers.outsideAngular).pipe(C(t=>t.payload.docs.map(t=>t.data())),this.afs.keepUnstableUntilFirst)}get(t){return F(this.query.get(t)).pipe(pv(this.afs.schedulers.insideAngular))}}const Qw=n("CCl1"),Yw=new Mt("angularfire2.enableFirestorePersistence"),Xw=new Mt("angularfire2.firestore.persistenceSettings"),Jw=new Mt("angularfire2.firestore.settings");function Zw(t,e=(t=>t)){return{query:e(t),ref:t}}let t_=(()=>{class t{constructor(t,e,n,r,i,s,o){var a;this.schedulers=new Pw(s),this.keepUnstableUntilFirst=(a=this.schedulers,function(t){return(t=t.lift(new Ow(a.ngZone))).pipe(function(t,e=0){return function(n){return n.lift(new xw(t,e))}}(a.outsideAngular),pv(a.insideAngular))}),this.firestore=s.runOutsideAngular(()=>{const n=Vw(t,s,e);"registerFirestore"in Qw&&Qw.registerFirestore(Dw.a);const i=n.firestore();return r&&i.settings(r),i}),this.persistenceEnabled$=n&&!function(t){return"server"===t}(i)?s.runOutsideAngular(()=>{try{return F(this.firestore.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(t){return Tl(!1)}}):Tl(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Zw(n,e),s=this.schedulers.ngZone.run(()=>r);return new $w(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Kw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Ww(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(Kt(Lw),Kt(Fw,8),Kt(Yw,8),Kt(Jw,8),Kt(Ka),Kt(cu),Kt(Xw,8))},t.\u0275prov=ct({factory:function(){return new t(Kt(Lw),Kt(Fw,8),Kt(Yw,8),Kt(Jw,8),Kt(Ka),Kt(cu),Kt(Xw,8))},token:t,providedIn:"any"}),t})(),e_=(()=>{class t{constructor(t){this.afs=t}addEmployee(t,e,n){return this.afs.collection("employees").add({employeeName:t,priceCategory:e,defintion:n})}getEmployees(){return this.afs.collection("employees",t=>t.orderBy("employeeName")).snapshotChanges()}editEmployee(t,e,n,r){return this.afs.collection("employees").doc(t).ref.update({employeeName:e,priceCategory:n,definition:r})}deleteEmployee(t){return this.afs.collection("employees").doc(t).ref.delete()}getEmployee(t){return this.afs.collection("employees").doc(t).ref.get()}editProduct(t,e,n){return this.afs.collection("products").doc(t).ref.update({productName:e,definition:n})}addNewProduct(t,e,n){return this.afs.collection("products").add({productName:t,size:e,definition:n})}deleteProduct(t){return this.afs.collection("products").doc(t).ref.delete()}getPrices(t){return console.log(t),this.afs.collection("prices").snapshotChanges()}editPrice(t,e,n){return this.afs.collection("prices").doc(t).ref.update({price:e,price2:n})}deletePrice(t){return console.log(t),this.afs.collection("prices").doc(t).ref.delete()}addNewPrice(t,e,n,r,i){return this.afs.collection("prices").add({productId:t,price:e,price2:n,price3:r,comments:i})}getProducts(){return this.afs.collection("products",t=>t.orderBy("productName")).snapshotChanges()}getProducts1(){return this.afs.collection("products").get()}getProduct(t){return this.afs.collection("products").doc(t).ref.get()}addNewEntry(t,e,n,r,i){return this.afs.collection("entries").add({productId:e,employeeId:n,quantity:t,dateAdded:r,definition:i})}getProductById(t){return this.afs.collection("products").doc(t).ref.get()}getEmployeeById(t){return this.afs.collection("employees").doc(t).ref.get()}getEntries(){return this.afs.collection("entries").snapshotChanges()}getEntriesCalc(t){return this.afs.collection("entries",e=>e.where("employeeId","==",t)).get()}getPricesCalc(t){return this.afs.collection("prices",e=>e.where("productId","==",t)).get()}getEmployeePriceCat(t){return this.afs.collection("employees").doc(t).ref.get()}getEntry(t){return this.afs.collection("entries").doc(t).ref.get()}deleteEntry(t){return this.afs.collection("entries").doc(t).ref.delete()}GetAssets(){return Tl([{assetId:1,assetName:"Item A",cpuName:"CPU A",hddName:"HDD A"},{assetId:2,assetName:"Item B",cpuName:"CPU B",hddName:"HDD B"},{assetId:3,assetName:"Item C",cpuName:"CPU C",hddName:"HDD C"}])}}return t.\u0275fac=function(e){return new(e||t)(Kt(t_))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function n_(t,e){return new v(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=F(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const r_=new Mt("NgValueAccessor"),i_={provide:r_,useExisting:Et(()=>s_),multi:!0};let s_=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ms(qo),Ms(Mo))},t.\u0275dir=we({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Ys("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[Oo([i_])]}),t})();const o_={provide:r_,useExisting:Et(()=>u_),multi:!0},a_=new Mt("CompositionEventMode");let u_=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=ju()?ju().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Ms(qo),Ms(Mo),Ms(a_,8))},t.\u0275dir=we({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Ys("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[Oo([o_])]}),t})(),c_=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=we({type:t}),t})(),l_=(()=>{class t extends c_{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return h_(e||t)},t.\u0275dir=we({type:t,features:[Ss]}),t})();const h_=hr(l_);class d_ extends c_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){}get asyncValidator(){}}class f_{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let p_=(()=>{class t extends f_{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Ms(d_,2))},t.\u0275dir=we({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&uo("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Ss]}),t})(),m_=(()=>{class t extends f_{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Ms(l_,2))},t.\u0275dir=we({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&uo("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Ss]}),t})();function g_(t){return null==t||0===t.length}function y_(t){return null!=t&&"number"==typeof t.length}const v_=new Mt("NgValidators"),w_=new Mt("NgAsyncValidators"),__=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class b_{static min(t){return e=>{if(g_(e.value)||g_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(g_(e.value)||g_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return g_(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return g_(t.value)||__.test(t.value)?null:{email:!0}}static minLength(t){return e=>g_(e.value)||!y_(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>y_(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return b_.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(g_(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(E_);return 0==e.length?null:function(t){return T_(I_(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(E_);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(u(e))return n_(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return n_(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return n_(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(C(t=>e(...t)))}return n_(t,null)}(I_(t,e).map(S_)).pipe(C(T_))}}}function E_(t){return null!=t}function S_(t){const e=Ks(t)?F(t):t;return Qs(e),e}function T_(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function I_(t,e){return e.map(e=>e(t))}function C_(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const A_={provide:r_,useExisting:Et(()=>x_),multi:!0};let x_=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ms(qo),Ms(Mo))},t.\u0275dir=we({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Ys("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Oo([A_])]}),t})();const k_={provide:r_,useExisting:Et(()=>N_),multi:!0};let D_=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),N_=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(d_),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(Ms(qo),Ms(Mo),Ms(D_),Ms(ws))},t.\u0275dir=we({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Ys("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Oo([k_])]}),t})();const R_={provide:r_,useExisting:Et(()=>O_),multi:!0};let O_=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ms(qo),Ms(Mo))},t.\u0275dir=we({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Ys("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Oo([R_])]}),t})();const P_={provide:r_,useExisting:Et(()=>F_),multi:!0};function L_(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let F_=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=L_(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(Ms(qo),Ms(Mo))},t.\u0275dir=we({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Ys("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Oo([P_])]}),t})(),M_=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(L_(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Ms(Mo),Ms(qo),Ms(F_,9))},t.\u0275dir=we({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const V_={provide:r_,useExisting:Et(()=>U_),multi:!0};function j_(t,e){return null==t?""+e:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let U_=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(Ms(qo),Ms(Mo))},t.\u0275dir=we({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Ys("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Oo([V_])]}),t})(),q_=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(j_(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(j_(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Ms(Mo),Ms(qo),Ms(U_,9))},t.\u0275dir=we({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function B_(t,e){t.validator=b_.compose([t.validator,e.validator]),t.asyncValidator=b_.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&z_(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&z_(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function z_(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function H_(t,e){t.validator=b_.compose([t.validator,e.validator]),t.asyncValidator=b_.composeAsync([t.asyncValidator,e.asyncValidator])}function G_(t){return null!=t?b_.compose(C_(t)):null}function $_(t){return null!=t?b_.composeAsync(C_(t)):null}const W_=[s_,O_,x_,F_,U_,N_],K_="VALID",Q_="INVALID",Y_="PENDING",X_="DISABLED";function J_(t){return(nb(t)?t.validators:t)||null}function Z_(t){return Array.isArray(t)?G_(t):t||null}function tb(t,e){return(nb(e)?e.asyncValidators:t)||null}function eb(t){return Array.isArray(t)?$_(t):t||null}function nb(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class rb{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Z_(this._rawValidators),this._composedAsyncValidatorFn=eb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===K_}get invalid(){return this.status===Q_}get pending(){return this.status==Y_}get disabled(){return this.status===X_}get enabled(){return this.status!==X_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Z_(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=eb(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Y_,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=X_,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=K_,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==K_&&this.status!==Y_||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?X_:K_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Y_,this._hasOwnPendingAsyncValidator=!0;const e=S_(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof sb?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof ob&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Ea,this.statusChanges=new Ea}_calculateStatus(){return this._allControlsDisabled()?X_:this.errors?Q_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Y_)?Y_:this._anyControlsHaveStatus(Q_)?Q_:K_}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){nb(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class ib extends rb{constructor(t=null,e,n){super(J_(e),tb(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class sb extends rb{constructor(t,e,n){super(J_(e),tb(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof ib?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class ob extends rb{constructor(t,e,n){super(J_(e),tb(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof ib?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let ab=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=we({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const ub=new Mt("NgModelWithFormControlWarning"),cb={provide:l_,useExisting:Et(()=>lb)};let lb=(()=>{class t extends l_{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Ea}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return B_(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){!function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);H_(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);H_(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&B_(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=G_(this._validators);this.form.validator=b_.compose([this.form.validator,t]);const e=$_(this._asyncValidators);this.form.asyncValidator=b_.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(Ms(v_,10),Ms(w_,10))},t.\u0275dir=we({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&Ys("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Oo([cb]),Ss,je]}),t})();const hb={provide:d_,useExisting:Et(()=>db)};let db=(()=>{class t extends d_{constructor(t,e,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new Ea,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===u_?n=t:(e=t,W_.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,r)}set isDisabled(t){}ngOnChanges(e){var n,r;this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(e,this.viewModel)&&(n=t,this,r=this._ngModelWarningConfig,vr()&&"never"!==r&&((null!==r&&"once"!==r||n._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return G_(this._rawValidators)}get asyncValidator(){return $_(this._rawAsyncValidators)}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(Ms(l_,13),Ms(v_,10),Ms(w_,10),Ms(r_,10),Ms(ub,8))},t.\u0275dir=we({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Oo([hb]),Ss,je]}),t._ngModelWarningSentOnce=!1,t})(),fb=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)}}),t})(),pb=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,s=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,s=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new sb(n,{asyncValidators:i,updateOn:s,validators:r})}control(t,e,n){return new ib(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new ob(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof ib||t instanceof sb||t instanceof ob?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),mb=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[D_],imports:[fb]}),t})(),gb=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:ub,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[pb,D_],imports:[fb]}),t})();function yb(t,e){if(1&t&&(qs(0,"option",50),po(1),Bs()),2&t){const t=e.$implicit;ro("value",t.docId),Mr(1),go(" ",t.data.employeeName," ")}}function vb(t,e){1&t&&(qs(0,"th",51),po(1,"Date"),Bs())}function wb(t,e){if(1&t&&(qs(0,"td",52),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.date)}}function _b(t,e){1&t&&(qs(0,"th",51),po(1,"Product"),Bs())}function bb(t,e){if(1&t&&(qs(0,"td",52),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.productName)}}function Eb(t,e){1&t&&(qs(0,"th",51),po(1,"Quantity"),Bs())}function Sb(t,e){if(1&t&&(qs(0,"td",52),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.quantity)}}function Tb(t,e){1&t&&(qs(0,"th",51),po(1,"Rate"),Bs())}function Ib(t,e){if(1&t&&(qs(0,"td",52),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.rate)}}function Cb(t,e){1&t&&(qs(0,"th",51),po(1,"Row Total"),Bs())}function Ab(t,e){if(1&t&&(qs(0,"td",52),po(1),_a(2,"number"),Bs()),2&t){const t=e.$implicit;Mr(1),mo(ba(2,1,t.rowTotal))}}function xb(t,e){1&t&&zs(0,"tr",53)}function kb(t,e){1&t&&zs(0,"tr",54)}let Db=(()=>{class t{constructor(t,e){this.contService=t,this.fb=e,this.displayedColumns=["date","productName","quantity","rate","rowTotal"],this.success=!1,this.entries=[],this.employees=[],this.sorted=[],this.prices=[],this.finalEntries=[],this.productName=[],this.finalPrices=[],this.totalCalc=0,this.dataAvailable=!1}ngOnInit(){this.dataSource&&(console.log("touched"),this.dataSource.sort=this.matSort),this.getEmployees(),Date.now();var t=new Date;Sc(t,"dd/MM/yyyy","en-US"),this.thisMonth=t.getMonth()+1,this.thisYear=t.getFullYear().toString(),this.thisMonth=this.thisMonth.length>1?this.thisMonth.substring(1,3):("0"+((new Date).getMonth()+1)).toString(),this.fg=this.fb.group({selectedMonth:this.thisMonth,selectedYear:this.thisYear,employeeId:[""]})}getEmployees(){this.employees=[],this.contService.getEmployees().subscribe(t=>{t.forEach(t=>{this.employees.push({data:t.payload.doc.data(),docId:t.payload.doc.id})})})}getPrices(t){return rp(this,void 0,void 0,(function*(){this.prices=[],this.finalPrices=[],this.contService.getPrices(t).subscribe(t=>{t.forEach(t=>{this.finalPrices.push({data:t.payload.doc.data(),docId:t.payload.doc.id})}),this.createFinalData()})}))}changeMonth(){}changeYear(){}getEntries(){this.entries=[],this.finalEntries=[],this.totalCalc=0;const t=this.fg.get("selectedMonth").value+"/"+this.fg.get("selectedYear").value,e=this.fg.get("employeeId").value;this.contService.getEntriesCalc(e).subscribe(n=>{n.forEach(n=>{n.data().dateAdded.substring(3,10)==t&&this.contService.getEmployeePriceCat(e).then(t=>{this.priceCategory=t.data().priceCategory,this.contService.getPricesCalc(n.data().productId).subscribe(e=>{e.forEach(e=>{"1"==t.data().priceCategory&&this.contService.getProductById(n.data().productId).then(t=>{this.rowCalc=e.data().price*n.data().quantity,this.finalEntries.push({date:n.data().dateAdded,rate:e.data().price,quantity:n.data().quantity,productName:t.data().productName,rowTotal:this.rowCalc}),this.totalCalc=this.totalCalc+this.rowCalc}),"2"==t.data().priceCategory&&this.contService.getProductById(n.data().productId).then(t=>{this.rowCalc=e.data().price2*n.data().quantity,this.finalEntries.push({date:n.data().dateAdded,rate:e.data().price2,quantity:n.data().quantity,productName:t.data().productName,rowTotal:this.rowCalc}),this.totalCalc=this.totalCalc+this.rowCalc})})})})})}),this.dataAvailable=!0,this.dataSource=null,this.dataSource=new Cw(this.finalEntries),this.dataSource.sort=this.matSort}ngAfterViewInit(){this.dataSource&&(console.log("touched"),this.dataSource.sort=this.matSort)}createFinalData(){console.log(this.dataSource)}}return t.\u0275fac=function(e){return new(e||t)(Ms(e_),Ms(pb))},t.\u0275cmp=fe({type:t,selectors:[["app-calculate"]],viewQuery:function(t,e){var n;1&t&&La(Uy,!0),2&t&&Oa(n=Va())&&(e.matSort=n.first)},decls:101,vars:9,consts:[[1,"container",2,"background-color","skyblue","padding","1px"],[1,"container",2,"background-color","skyblue","padding","1px","width","70%"],[1,"heading"],["name","productForm",1,"form-inline","mt-2","mt-md-0",3,"formGroup","ngSubmit"],["formControlName","selectedMonth",2,"padding","3px","margin-left","0px"],["value","01"],["value","02"],["value","03"],["value","04"],["value","05"],["value","06"],["value","07"],["value","08"],["value","09"],["value","10"],["value","11"],["value","12"],["formControlName","selectedYear",2,"padding","3px","margin-left","10px"],["value","2022"],["value","2023"],["value","2024"],["value","2025"],["value","2026"],["value","2027"],["value","2028"],["value","2029"],["value","2030"],["value","2031"],["value","2032"],["value","2033"],["value","2034"],["value","2035"],["value","2036"],["value","2037"],["value","2038"],["formControlName","employeeId",1,"form-select"],[3,"selected"],[3,"value",4,"ngFor","ngForOf"],["type","submit","value","Submit",1,"nice-button"],[1,"container"],["mat-table","","matSort","",1,"mat-elevation-z8",2,"width","735px",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","productName"],["matColumnDef","quantity"],["matColumnDef","rate"],["matColumnDef","rowTotal"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(qs(0,"div",0),qs(1,"div",1),qs(2,"div",2),po(3,"Choose date and employee"),Bs(),qs(4,"form",3),Ys("ngSubmit",(function(){return e.getEntries()})),qs(5,"select",4),qs(6,"option",5),po(7,"January"),Bs(),qs(8,"option",6),po(9,"February"),Bs(),qs(10,"option",7),po(11,"March"),Bs(),qs(12,"option",8),po(13,"April"),Bs(),qs(14,"option",9),po(15,"May"),Bs(),qs(16,"option",10),po(17,"June"),Bs(),qs(18,"option",11),po(19,"July"),Bs(),qs(20,"option",12),po(21,"August"),Bs(),qs(22,"option",13),po(23,"September"),Bs(),qs(24,"option",14),po(25,"October"),Bs(),qs(26,"option",15),po(27,"November"),Bs(),qs(28,"option",16),po(29,"December"),Bs(),Bs(),qs(30,"select",17),qs(31,"option",18),po(32,"2022"),Bs(),qs(33,"option",19),po(34,"2023"),Bs(),qs(35,"option",20),po(36,"2024"),Bs(),qs(37,"option",21),po(38,"2025"),Bs(),qs(39,"option",22),po(40,"2026"),Bs(),qs(41,"option",23),po(42,"2027"),Bs(),qs(43,"option",24),po(44,"2028"),Bs(),qs(45,"option",25),po(46,"2029"),Bs(),qs(47,"option",26),po(48,"2030"),Bs(),qs(49,"option",27),po(50,"2031"),Bs(),qs(51,"option",28),po(52,"2032"),Bs(),qs(53,"option",29),po(54,"2033"),Bs(),qs(55,"option",30),po(56,"2034"),Bs(),qs(57,"option",31),po(58,"2035"),Bs(),qs(59,"option",32),po(60,"2036"),Bs(),qs(61,"option",33),po(62,"2037"),Bs(),qs(63,"option",34),po(64,"2038"),Bs(),Bs(),qs(65,"select",35),qs(66,"option",36),po(67,"Select employee"),Bs(),Fs(68,yb,2,2,"option",37),Bs(),zs(69,"input",38),Bs(),Bs(),Bs(),zs(70,"br"),qs(71,"div",39),qs(72,"table",40),Hs(73,41),Fs(74,vb,2,0,"th",42),Fs(75,wb,2,1,"td",43),Gs(),Hs(76,44),Fs(77,_b,2,0,"th",42),Fs(78,bb,2,1,"td",43),Gs(),Hs(79,45),Fs(80,Eb,2,0,"th",42),Fs(81,Sb,2,1,"td",43),Gs(),Hs(82,46),Fs(83,Tb,2,0,"th",42),Fs(84,Ib,2,1,"td",43),Gs(),Hs(85,47),Fs(86,Cb,2,0,"th",42),Fs(87,Ab,3,3,"td",43),Gs(),Fs(88,xb,1,0,"tr",48),Fs(89,kb,1,0,"tr",49),Bs(),qs(90,"table"),qs(91,"tr"),zs(92,"td"),zs(93,"td"),qs(94,"td"),qs(95,"b"),po(96,"Total"),Bs(),Bs(),qs(97,"td"),qs(98,"b"),po(99),_a(100,"number"),Bs(),Bs(),Bs(),Bs(),Bs()),2&t&&(Mr(4),js("formGroup",e.fg),Mr(62),js("selected",!0),Mr(2),js("ngForOf",e.employees),Mr(4),js("dataSource",e.dataSource),Mr(16),js("matHeaderRowDef",e.displayedColumns),Mr(1),js("matRowDefColumns",e.displayedColumns),Mr(10),go(" ",ba(100,7,e.totalCalc),""))},directives:[ab,m_,lb,F_,p_,db,M_,q_,Uc,sw,Uy,hw,cw,aw,yw,ww,fw,Ky,mw,bw,Sw],pipes:[Gc],styles:[""]}),t})();function Nb(t,e){1&t&&(qs(0,"div",21),po(1,"Employee successfully added!"),Bs())}function Rb(t,e){if(1&t){const t=Ws();qs(0,"div",22),qs(1,"form",2),Ys("ngSubmit",(function(){return ln(t),Zs().editEmployee()})),qs(2,"table"),qs(3,"tr"),qs(4,"th"),po(5,"Employee Name"),Bs(),qs(6,"th"),po(7,"Price Category"),Bs(),qs(8,"th"),po(9,"Definition"),Bs(),Bs(),qs(10,"tr"),zs(11,"input",23),qs(12,"td"),zs(13,"input",24),Bs(),qs(14,"td"),qs(15,"select",25),qs(16,"option",6),po(17,"1"),Bs(),qs(18,"option",7),po(19,"2"),Bs(),qs(20,"option",8),po(21,"3"),Bs(),qs(22,"option",9),po(23,"4"),Bs(),Bs(),Bs(),qs(24,"td"),zs(25,"input",26),Bs(),Bs(),qs(26,"tr"),qs(27,"td"),qs(28,"tr"),qs(29,"td"),zs(30,"input",27),Bs(),qs(31,"td"),qs(32,"input",28),Ys("click",(function(){return ln(t),Zs().editEmployeeForm=!1})),Bs(),Bs(),Bs(),Bs(),Bs(),Bs(),Bs(),Bs()}if(2&t){const t=Zs();Mr(1),js("formGroup",t.fEdit)}}function Ob(t,e){if(1&t){const t=Ws();qs(0,"tr",29),qs(1,"td",30),qs(2,"span",31),po(3),Bs(),Bs(),qs(4,"td",32),po(5),Bs(),qs(6,"td"),qs(7,"input",33),Ys("click",(function(){ln(t);const n=e.$implicit;return Zs().preEditEmployee(n.docId,n.data.employeeName,n.data.priceCategory,n.data.definition)})),Bs(),qs(8,"input",34),Ys("click",(function(){ln(t);const n=e.$implicit;return Zs().deleteEmployee(n.docId)})),Bs(),Bs(),Bs()}if(2&t){const t=e.$implicit;Mr(3),go(" ",t.data.employeeName,""),Mr(2),go(" ",t.data.priceCategory," ")}}let Pb=(()=>{class t{constructor(t,e){this.contService=t,this.fb=e,this.success=!1,this.employees=[],this.sorted=[],this.editSuccess=!1,this.editEmployeeForm=!1,this.deleteSuccess=!1}ngOnInit(){this.getEmployees(),this.fg=this.fb.group({employeeName:["",b_.required],priceCategory:["0"],definition:[""]})}addNewEmployee(){const t=this.fg.get("employeeName").value,e=this.fg.get("definition").value,n=this.fg.get("priceCategory").value;this.contService.addEmployee(t,n,e).then(t=>{this.success=!0})}preEditEmployee(t,e,n,r){this.fEdit=this.fb.group({employeeId:t,employeeName:e,definition:r,priceCategory:n}),this.editEmployeeForm=!0}editEmployee(){const t=this.fEdit.get("employeeId").value,e=this.fEdit.get("employeeName").value,n=this.fEdit.get("priceCategory").value,r=this.fEdit.get("definition").value;this.contService.editEmployee(t,e,n,r).then(t=>{this.editSuccess=!0,this.editEmployeeForm=!1})}deleteEmployee(t){confirm("Sure to delete?")&&this.contService.deleteEmployee(t).then(t=>{this.deleteSuccess=!0})}getEmployees(){this.employees=[],this.contService.getEmployees().subscribe(t=>{t.forEach(t=>{this.employees.push({data:t.payload.doc.data(),docId:t.payload.doc.id})})}),this.sorted=this.employees.sort((t,e)=>t.employeeName-e.employeeName)}}return t.\u0275fac=function(e){return new(e||t)(Ms(e_),Ms(pb))},t.\u0275cmp=fe({type:t,selectors:[["app-employee-master"]],viewQuery:function(t,e){var n;1&t&&La(Uy,!0),2&t&&Oa(n=Va())&&(e.sort=n.first)},decls:36,vars:5,consts:[[1,"container",2,"width","1050px"],[1,"heading"],["name","productForm",1,"form-inline","mt-2","mt-md-0",3,"formGroup","ngSubmit"],["type","text","formControlName","employeeName","placeholder","Employee Name",1,"form-control",2,"width","300px","padding","3px","margin","3px"],["formControlName","priceCategory",1,"form-control",2,"width","300px","padding","3px","margin","3px"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["type","text","formControlName","definition","placeholder","Definition",1,"form-control",2,"width","300px","padding","3px","margin","3px"],[2,"text-align","right","margin-top","5px","width","312px"],["type","submit","name","btn","value","Add",3,"disabled"],["class","notifier",4,"ngIf"],["class","container","style","background-color: whitesmoke;",4,"ngIf"],[1,"container",2,"background-color","rgb(235, 231, 231)","padding","1px","border-radius","8px"],[1,"table-heading",2,"width","960px","padding","3px","background-color","rgb(163, 159, 159)"],[2,"border","0px solid gray","background-color","lightgray","color","rgb(77, 75, 75)","padding","3px"],["width","250px"],[1,"ml-3"],["style","color:rgb(39, 39, 39); border-bottom: 1px solid rgb(136, 134, 134); padding: 3px; background-color: white;",4,"ngFor","ngForOf"],[1,"notifier"],[1,"container",2,"background-color","whitesmoke"],["type","hidden","formControlName","employeeId",1,"form-control",2,"width","100px","padding","3px","margin","3px"],["type","text","formControlName","employeeName",1,"form-control",2,"width","400px","padding","3px","margin","3px"],["formControlName","priceCategory",1,"form-control"],["type","text","formControlName","definition",1,"form-control",2,"width","100px","padding","3px","margin","3px"],["type","submit","name","btn","value","Submit",1,"nice-button",2,"margin-left","5px"],["type","button","name","btn","value","Cancel",1,"nice-button",2,"margin-left","5px","background-color","red","border","1px solid rgb(77, 5, 5)","padding","3px","color","snow",3,"click"],[2,"color","rgb(39, 39, 39)","border-bottom","1px solid rgb(136, 134, 134)","padding","3px","background-color","white"],["width","250px",2,"margin-left","3px"],[2,"margin-left","3px"],["width","150px"],["type","button","value","Edit",1,"nice-button",3,"click"],["type","button","value","Delete",1,"nice-button",3,"click"]],template:function(t,e){1&t&&(qs(0,"div",0),qs(1,"div",1),po(2,"Add new Employee"),Bs(),qs(3,"form",2),Ys("ngSubmit",(function(){return e.addNewEmployee()})),zs(4,"input",3),qs(5,"select",4),qs(6,"option",5),po(7,"Select price category"),Bs(),qs(8,"option",6),po(9,"1"),Bs(),qs(10,"option",7),po(11,"2"),Bs(),qs(12,"option",8),po(13,"3"),Bs(),qs(14,"option",9),po(15,"4"),Bs(),Bs(),zs(16,"input",10),qs(17,"div",11),zs(18,"input",12),Bs(),Bs(),Fs(19,Nb,2,0,"div",13),Bs(),zs(20,"br"),Fs(21,Rb,33,1,"div",14),zs(22,"br"),qs(23,"div",15),qs(24,"div",1),po(25,"Existing Employees "),Bs(),qs(26,"table",16),qs(27,"tr",17),qs(28,"th",18),po(29," Name "),Bs(),qs(30,"th"),po(31," Price Category "),Bs(),qs(32,"th",19),po(33," Actions "),Bs(),Bs(),Fs(34,Ob,9,2,"tr",20),Bs(),Bs(),zs(35,"br")),2&t&&(Mr(3),js("formGroup",e.fg),Mr(15),js("disabled",!e.fg.valid),Mr(1),js("ngIf",e.success),Mr(2),js("ngIf",e.editEmployeeForm),Mr(13),js("ngForOf",e.employees))},directives:[ab,m_,lb,u_,p_,db,F_,M_,q_,Bc,Uc],styles:[""]}),t})();function Lb(t,e){if(1&t&&(qs(0,"option",51),po(1),Bs()),2&t){const t=e.$implicit;ro("value",t.docId),Mr(1),go(" ",t.data.employeeName," ")}}function Fb(t,e){if(1&t&&(qs(0,"option",51),po(1),Bs()),2&t){const t=e.$implicit;ro("value",t.docId),Mr(1),go(" ",t.data.productName," ")}}function Mb(t,e){1&t&&(qs(0,"div",52),po(1,"Loading..."),Bs())}function Vb(t,e){if(1&t){const t=Ws();qs(0,"div",53),po(1,"Entry successfully added! "),qs(2,"button",54),Ys("click",(function(){return ln(t),Zs().addNew()})),po(3,"Add new"),Bs(),Bs()}}function jb(t,e){1&t&&(qs(0,"th",55),po(1,"Date"),Bs())}function Ub(t,e){if(1&t&&(qs(0,"td",56),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.dateAdded)}}function qb(t,e){1&t&&(qs(0,"th",55),po(1,"Employee Name"),Bs())}function Bb(t,e){if(1&t&&(qs(0,"td",56),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.employeeName)}}function zb(t,e){1&t&&(qs(0,"th",55),po(1,"Product"),Bs())}function Hb(t,e){if(1&t&&(qs(0,"td",56),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.productName)}}function Gb(t,e){1&t&&(qs(0,"th",55),po(1,"Quantity"),Bs())}function $b(t,e){if(1&t&&(qs(0,"td",56),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.quantity)}}function Wb(t,e){1&t&&zs(0,"tr",57)}function Kb(t,e){1&t&&zs(0,"tr",58)}let Qb=(()=>{class t{constructor(t,e){this.contService=t,this.fb=e,this.success=!1,this.entries=[],this.finalEnteries=[],this.products=[],this.productsFromDB=[],this.employeesFromDB=[],this.employees=[],this.finalDatas=[],this.test=[],this.displayedColumns=["dateAdded","employeeName","productName","quantity"],this.preDataSource=[],this.loading=!1}ngOnInit(){this.dataSource&&(console.log("touched"),this.dataSource.sort=this.matSort),this.employees=[],this.getEmployees(),this.getProducts(),Date.now();var t=new Date;const e=Sc(new Date(t.getTime()-864e5),"dd/MM/yyyy","en-US");this.selectedMonth=((new Date).getMonth()+1).toString(),this.selectedMonth.length>1?(this.selectedMonth=this.selectedMonth.substring(1,3),console.log(this.selectedMonth)):this.selectedMonth=("0"+((new Date).getMonth()+1)).toString(),this.selectedYear=(new Date).getFullYear().toString(),this.selectedYear=this.selectedYear.substring(2,4),this.getEntries(this.selectedMonth,this.selectedYear),this.fg=this.fb.group({quantity:["",[b_.required,b_.pattern("[0-9]+")]],definition:[""],productId:["0"],employeeId:["0"],dateAdded:e})}getEntries(t,e){this.entries=[],this.finalEnteries=[],this.contService.getEntries().subscribe(t=>{t.forEach(t=>{this.finalEnteries.push(t.payload.doc.data())}),this.createFinalData()})}createFinalData(t,e){this.finalDatas=[],this.finalEnteries.forEach(t=>{if(t.dateAdded){const e=t.dateAdded.substring(3,5),n=t.dateAdded.substring(8,10);this.dateMonthFromDB=e+"/"+n,this.dateMonthRequired=this.selectedMonth+"/"+this.selectedYear,this.quantity=t.quantity,this.dateAddedFromDB=t.dateAdded,this.dateMonthFromDB==this.dateMonthRequired&&(this.products.forEach(e=>{e.docId==t.productId&&(this.productName=e.data.productName,this.productId=e.docId)}),this.employees.forEach(e=>{e.docId==t.employeeId&&(this.employeeName=e.data.employeeName,this.employeeId=e.docId)}),this.finalDatas.push({productName:this.productName,employeeName:this.employeeName,quantity:this.quantity,dateAdded:this.dateAddedFromDB,productId:this.productId,employeeId:this.employeeId}))}}),this.dataSource=null,this.dataSource=new Cw(this.finalDatas),this.dataSource.sort=this.matSort,console.log(this.dataSource)}changeMonth(t){this.selectedMonth=t,this.getEntries(this.selectedMonth,this.selectedYear)}changeYear(t){this.selectedYear=t,this.getEntries(this.selectedMonth,this.selectedYear)}getProducts(){this.products=[],this.contService.getProducts().subscribe(t=>{t.forEach(t=>{this.products.push({data:t.payload.doc.data(),docId:t.payload.doc.id})})})}getEmployees(){this.employees=[],this.contService.getEmployees().subscribe(t=>{t.forEach(t=>{this.employees.push({data:t.payload.doc.data(),docId:t.payload.doc.id})})})}addNewEntry(){this.loading=!0;const t=this.fg.get("quantity").value,e=this.fg.get("definition").value,n=this.fg.get("productId").value,r=this.fg.get("employeeId").value,i=this.fg.get("dateAdded").value;this.contService.addNewEntry(t,n,r,i,e).then(t=>{this.success=!0,this.fg.disable(),this.entries=[],this.loading=!1})}addNew(){this.success=!1,this.fg.enable()}getEmployee(t){this.employees.forEach(e=>{e.docId==t&&(this.employeeName=e.data.employeeName)})}getProduct(t){return rp(this,void 0,void 0,(function*(){this.products.forEach(e=>{e.docId==t&&(this.productName=e.data.productName)})}))}ngAfterViewInit(){this.dataSource&&(console.log("touched"),this.dataSource.sort=this.matSort)}}return t.\u0275fac=function(e){return new(e||t)(Ms(e_),Ms(pb))},t.\u0275cmp=fe({type:t,selectors:[["app-entries"]],viewQuery:function(t,e){var n;1&t&&La(Uy,!0),2&t&&Oa(n=Va())&&(e.matSort=n.first)},decls:89,vars:33,consts:[[1,"container"],[1,"heading"],["name","productForm",1,"form-inline","mt-2","mt-md-0",3,"formGroup","ngSubmit"],["type","text","formControlName","dateAdded",1,"form-control",2,"width","100px","padding","3px","margin","3px"],["formControlName","employeeId","placeholder","dsfsf",1,"form-select"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["formControlName","productId",1,"form-select"],["type","text","formControlName","quantity","placeholder","Quantity",1,"form-control",2,"width","100px","padding","3px","margin","3px"],["type","text","formControlName","definition","placeholder","Definition",1,"form-control",2,"width","300px","padding","3px","margin","3px"],[2,"text-align","right","margin-top","5px","width","312px"],["type","submit","name","btn","value","Add",3,"disabled"],["class","loader",4,"ngIf"],["class","notifier",4,"ngIf"],[1,"container",2,"background-color","skyblue","padding","1px","width","70%"],[1,"heading","ml-5"],["id","month",2,"padding","3px","margin-left","10px",3,"change"],["value","01",3,"selected"],["value","02",3,"selected"],["value","03",3,"selected"],["value","04",3,"selected"],["value","05",3,"selected"],["value","06",3,"selected"],["value","07",3,"selected"],["value","08",3,"selected"],["value","09",3,"selected"],["value","10",3,"selected"],["value","11",3,"selected"],["value","12",3,"selected"],["id","year",2,"padding","3px","margin-left","10px",3,"change"],["value","20",3,"selected"],["value","21",3,"selected"],["value","22",3,"selected"],["value","23",3,"selected"],["value","24",3,"selected"],["value","25",3,"selected"],["value","26",3,"selected"],["value","27",3,"selected"],["value","28",3,"selected"],["value","29",3,"selected"],["value","30",3,"selected"],["value","31",3,"selected"],["mat-table","","matSort","",1,"mat-elevation-z8",2,"width","735px",3,"dataSource"],["matColumnDef","dateAdded"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","productName"],["matColumnDef","quantity"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],[1,"loader"],[1,"notifier"],["value","",1,"nice-button","btn","btn-success",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(qs(0,"div",0),qs(1,"div",1),po(2,"Add new Entry"),Bs(),qs(3,"form",2),Ys("ngSubmit",(function(){return e.addNewEntry()})),zs(4,"input",3),qs(5,"select",4),qs(6,"option",5),po(7,"Select Employee"),Bs(),Fs(8,Lb,2,2,"option",6),Bs(),qs(9,"select",7),qs(10,"option",5),po(11,"Select Product"),Bs(),Fs(12,Fb,2,2,"option",6),Bs(),zs(13,"input",8),zs(14,"input",9),qs(15,"div",10),zs(16,"input",11),Bs(),Bs(),Fs(17,Mb,2,0,"div",12),Fs(18,Vb,4,0,"div",13),Bs(),zs(19,"br"),zs(20,"br"),qs(21,"div",14),qs(22,"div",15),po(23," Existing Entries "),qs(24,"select",16),Ys("change",(function(t){return e.changeMonth(t.target.value)})),qs(25,"option",17),po(26,"January"),Bs(),qs(27,"option",18),po(28,"February"),Bs(),qs(29,"option",19),po(30,"March"),Bs(),qs(31,"option",20),po(32,"April"),Bs(),qs(33,"option",21),po(34,"May"),Bs(),qs(35,"option",22),po(36,"June"),Bs(),qs(37,"option",23),po(38,"July"),Bs(),qs(39,"option",24),po(40,"August"),Bs(),qs(41,"option",25),po(42,"September"),Bs(),qs(43,"option",26),po(44,"October"),Bs(),qs(45,"option",27),po(46,"November"),Bs(),qs(47,"option",28),po(48,"December"),Bs(),Bs(),qs(49,"select",29),Ys("change",(function(t){return e.changeYear(t.target.value)})),qs(50,"option",30),po(51,"2020"),Bs(),qs(52,"option",31),po(53,"2021"),Bs(),qs(54,"option",32),po(55,"2022"),Bs(),qs(56,"option",33),po(57,"2023"),Bs(),qs(58,"option",34),po(59,"2024"),Bs(),qs(60,"option",35),po(61,"2025"),Bs(),qs(62,"option",36),po(63,"2026"),Bs(),qs(64,"option",37),po(65,"2027"),Bs(),qs(66,"option",38),po(67,"2028"),Bs(),qs(68,"option",39),po(69,"2029"),Bs(),qs(70,"option",40),po(71,"2030"),Bs(),qs(72,"option",41),po(73,"2031"),Bs(),Bs(),Bs(),qs(74,"table",42),Hs(75,43),Fs(76,jb,2,0,"th",44),Fs(77,Ub,2,1,"td",45),Gs(),Hs(78,46),Fs(79,qb,2,0,"th",44),Fs(80,Bb,2,1,"td",45),Gs(),Hs(81,47),Fs(82,zb,2,0,"th",44),Fs(83,Hb,2,1,"td",45),Gs(),Hs(84,48),Fs(85,Gb,2,0,"th",44),Fs(86,$b,2,1,"td",45),Gs(),Fs(87,Wb,1,0,"tr",49),Fs(88,Kb,1,0,"tr",50),Bs(),Bs()),2&t&&(Mr(3),js("formGroup",e.fg),Mr(5),js("ngForOf",e.employees),Mr(4),js("ngForOf",e.products),Mr(4),js("disabled",!e.fg.valid),Mr(1),js("ngIf",e.loading),Mr(1),js("ngIf",e.success),Mr(7),js("selected",1==e.selectedMonth),Mr(2),js("selected",2==e.selectedMonth),Mr(2),js("selected",3==e.selectedMonth),Mr(2),js("selected",4==e.selectedMonth),Mr(2),js("selected",5==e.selectedMonth),Mr(2),js("selected",6==e.selectedMonth),Mr(2),js("selected",7==e.selectedMonth),Mr(2),js("selected",8==e.selectedMonth),Mr(2),js("selected",9==e.selectedMonth),Mr(2),js("selected",10==e.selectedMonth),Mr(2),js("selected",11==e.selectedMonth),Mr(2),js("selected",12==e.selectedMonth),Mr(3),js("selected",20==e.selectedYear),Mr(2),js("selected",21==e.selectedYear),Mr(2),js("selected",22==e.selectedYear),Mr(2),js("selected",23==e.selectedYear),Mr(2),js("selected",24==e.selectedYear),Mr(2),js("selected",25==e.selectedYear),Mr(2),js("selected",26==e.selectedYear),Mr(2),js("selected",27==e.selectedYear),Mr(2),js("selected",28==e.selectedYear),Mr(2),js("selected",29==e.selectedYear),Mr(2),js("selected",30==e.selectedYear),Mr(2),js("selected",31==e.selectedYear),Mr(2),js("dataSource",e.dataSource),Mr(13),js("matHeaderRowDef",e.displayedColumns),Mr(1),js("matRowDefColumns",e.displayedColumns))},directives:[ab,m_,lb,u_,p_,db,F_,M_,q_,Uc,Bc,sw,Uy,hw,cw,aw,yw,ww,fw,Ky,mw,bw,Sw],styles:[""]}),t})();function Yb(t,e){if(1&t&&(qs(0,"option",13),po(1),Bs()),2&t){const t=e.$implicit;ro("value",t.docId),Mr(1),go(" ",t.data.productName," ")}}function Xb(t,e){1&t&&(qs(0,"div",14),po(1,"Employee successfully added!"),Bs())}function Jb(t,e){if(1&t){const t=Ws();qs(0,"div",15),qs(1,"form",2),Ys("ngSubmit",(function(){return ln(t),Zs().editPrice()})),qs(2,"table"),qs(3,"tr"),qs(4,"th"),po(5,"Product"),Bs(),qs(6,"th"),po(7,"Price categoty 1"),Bs(),qs(8,"th"),po(9,"Price category 2"),Bs(),Bs(),qs(10,"tr"),zs(11,"input",16),zs(12,"input",17),qs(13,"td"),zs(14,"input",18),Bs(),qs(15,"td"),zs(16,"input",19),Bs(),qs(17,"td"),zs(18,"input",20),Bs(),Bs(),qs(19,"tr"),qs(20,"td"),qs(21,"tr"),qs(22,"td"),zs(23,"input",21),Bs(),qs(24,"td"),qs(25,"input",22),Ys("click",(function(){return ln(t),Zs().editPriceForm=!1})),Bs(),Bs(),Bs(),Bs(),Bs(),Bs(),Bs(),Bs()}if(2&t){const t=Zs();Mr(1),js("formGroup",t.fEdit)}}function Zb(t,e){if(1&t){const t=Ws();qs(0,"tr",26),qs(1,"td"),qs(2,"span",27),po(3),Bs(),Bs(),qs(4,"td"),po(5),Bs(),qs(6,"td"),po(7),Bs(),qs(8,"td"),qs(9,"input",28),Ys("click",(function(){ln(t);const n=e.$implicit;return Zs(2).preEditPrice(n.docId,n.productName,n.price,n.price2)})),Bs(),qs(10,"input",29),Ys("click",(function(){ln(t);const n=e.$implicit;return Zs(2).deletePrice(n.docId)})),Bs(),Bs(),Bs()}if(2&t){const t=e.$implicit;Mr(3),go(" ",t.productName,""),Mr(2),go(" ",t.price," "),Mr(2),go(" ",t.price2," ")}}function tE(t,e){if(1&t&&(qs(0,"table",23),qs(1,"tr",24),qs(2,"th"),po(3,"Product"),Bs(),qs(4,"th"),po(5,"Rate Category 1"),Bs(),qs(6,"th"),po(7,"Rate Category 2"),Bs(),qs(8,"th"),po(9,"Actions"),Bs(),Bs(),Fs(10,Zb,11,3,"tr",25),Bs()),2&t){const t=Zs();Mr(10),js("ngForOf",t.finalData)}}function eE(t,e){1&t&&(qs(0,"div",14),po(1,"Deleted!"),Bs())}let nE=(()=>{class t{constructor(t,e){this.contService=t,this.fb=e,this.success=!1,this.successData=!1,this.editSuccess=!1,this.deleteSuccess=!1,this.editPriceForm=!1,this.products=[],this.prices=[],this.finalPrices=[],this.finalData=[]}ngOnInit(){this.getProducts(),this.getPrices(),this.fg=this.fb.group({productId:[""],price:[""],price2:[""],price3:[""],comments:[""]})}preEditPrice(t,e,n,r){this.fEdit=this.fb.group({productId:this.productId,productName:e,price:n,price2:r,priceId:t}),this.editPriceForm=!0}editPrice(){const t=this.fEdit.get("priceId").value,e=this.fEdit.get("price").value,n=this.fEdit.get("price2").value;this.contService.editPrice(t,e,n).then(t=>{this.editSuccess=!0})}deletePrice(t){confirm("Sure to delete?")&&this.contService.deletePrice(t).then(t=>{this.deleteSuccess=!0})}getPrices(t){return rp(this,void 0,void 0,(function*(){this.prices=[],this.finalPrices=[],this.contService.getPrices(t).subscribe(t=>{console.log(t),t.forEach(t=>{this.finalPrices.push({data:t.payload.doc.data(),docId:t.payload.doc.id})}),this.createFinalData()})}))}createFinalData(){return rp(this,void 0,void 0,(function*(){console.log(this.finalPrices),this.finalData=[],this.finalPrices.forEach(t=>{this.products.forEach(e=>{e.docId==t.data.productId&&(this.productName=e.data.productName,this.productId=e.docId)}),this.finalData.push({productName:this.productName,productId:this.productId,price:t.data.price,price2:t.data.price2,price3:t.data.price3,comments:t.data.comments,docId:t.docId}),this.successData=!0}),console.log(this.finalData)}))}addNewPrice(){const t=this.fg.get("productId").value,e=this.fg.get("price").value,n=this.fg.get("price2").value,r=this.fg.get("comments").value,i=this.fg.get("price3").value;this.contService.addNewPrice(t,e,n,i,r).then(t=>{this.success=!0})}getProducts(){this.products=[],this.contService.getProducts().subscribe(t=>{t.forEach(t=>{this.products.push({data:t.payload.doc.data(),docId:t.payload.doc.id})})})}}return t.\u0275fac=function(e){return new(e||t)(Ms(e_),Ms(pb))},t.\u0275cmp=fe({type:t,selectors:[["app-price"]],decls:18,vars:6,consts:[[1,"container"],[1,"heading"],["name","productForm",1,"form-inline","mt-2","mt-md-0",3,"formGroup","ngSubmit"],["formControlName","productId",1,"form-control",2,"width","300px"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","price","placeholder","Price category 1",1,"form-control",2,"width","150px","padding","3px","margin","3px"],["type","text","formControlName","price2","placeholder","Price category 2",1,"form-control",2,"width","150px","padding","3px","margin","3px"],["type","text","formControlName","price3","placeholder","Price category 3",1,"form-control",2,"width","150px","padding","3px","margin","3px"],["type","text","formControlName","comments","placeholder","Additional info",1,"form-control",2,"width","550px","padding","3px","margin","3px"],["type","submit","name","btn","value","Add",2,"margin-left","15px"],["class","notifier",4,"ngIf"],["class","container","style","background-color: whitesmoke;",4,"ngIf"],["style","width: 700px; padding: 5px; border: 1px solid grey; background-color: rgb(188, 220, 241);",4,"ngIf"],[3,"value"],[1,"notifier"],[1,"container",2,"background-color","whitesmoke"],["type","hidden","formControlName","priceId",1,"form-control",2,"width","100px","padding","3px","margin","3px"],["type","hidden","formControlName","productId",1,"form-control",2,"width","100px","padding","3px","margin","3px"],["type","text","disabled","","formControlName","productName",1,"form-control",2,"width","400px","padding","3px","margin","3px"],["type","text","formControlName","price",1,"form-control",2,"width","100px","padding","3px","margin","3px"],["type","text","formControlName","price2",1,"form-control",2,"width","100px","padding","3px","margin","3px"],["type","submit","name","btn","value","Submit",1,"nice-button",2,"margin-left","5px"],["type","button","name","btn","value","Cancel",1,"nice-button",2,"margin-left","5px","background-color","red","border","1px solid rgb(77, 5, 5)","padding","3px","color","snow",3,"click"],[2,"width","700px","padding","5px","border","1px solid grey","background-color","rgb(188, 220, 241)"],[2,"border","0px solid grey","margin-left","5px","width","70%","color","rgb(75, 73, 73)","background-color","white"],["style","\n        border: 1px solid grey;\n        margin-left: 5px;\n        width: 70%;\n        color: rgb(27, 27, 27);\n      ",4,"ngFor","ngForOf"],[2,"border","1px solid grey","margin-left","5px","width","70%","color","rgb(27, 27, 27)"],[1,"ml-4"],["type","button","value","Edit",1,"nice-button",3,"click"],["type","button","value","Delete",1,"nice-button",3,"click"]],template:function(t,e){1&t&&(qs(0,"div",0),qs(1,"div",1),po(2,"Add new Entry"),Bs(),qs(3,"form",2),Ys("ngSubmit",(function(){return e.addNewPrice()})),qs(4,"select",3),Fs(5,Yb,2,2,"option",4),Bs(),zs(6,"input",5),zs(7,"input",6),zs(8,"input",7),zs(9,"input",8),zs(10,"input",9),Bs(),Fs(11,Xb,2,0,"div",10),Bs(),zs(12,"br"),Fs(13,Jb,26,1,"div",11),zs(14,"br"),qs(15,"div",0),Fs(16,tE,11,1,"table",12),Fs(17,eE,2,0,"div",10),Bs()),2&t&&(Mr(3),js("formGroup",e.fg),Mr(2),js("ngForOf",e.products),Mr(6),js("ngIf",e.success),Mr(2),js("ngIf",e.editPriceForm),Mr(3),js("ngIf",e.successData),Mr(1),js("ngIf",e.deleteSuccess))},directives:[ab,m_,lb,F_,p_,db,Uc,u_,Bc,M_,q_],styles:[""]}),t})();const rE=["mat-button",""],iE=["*"],sE=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class oE{constructor(t){this._elementRef=t}}const aE=Sy(Ey(Ty(oE)));let uE=(()=>{class t extends aE{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of sE)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(Ms(Mo),Ms(_p),Ms(fy,8))},t.\u0275cmp=fe({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){var n;1&t&&La(Oy,!0),2&t&&Oa(n=Va())&&(e.ripple=n.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(Ps("disabled",e.disabled||null),uo("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ss],attrs:rE,ngContentSelectors:iE,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(eo(),qs(0,"span",0),no(1),Bs(),zs(2,"span",1),zs(3,"span",2)),2&t&&(Mr(2),uo("mat-button-ripple-round",e.isRoundButton||e.isIconButton),js("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[Oy],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),cE=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},imports:[[Py,by],by]}),t})();const lE=["editProd"];function hE(t,e){1&t&&(qs(0,"div",18),po(1,"Product successfully added!"),Bs())}function dE(t,e){if(1&t){const t=Ws();qs(0,"div",19,20),qs(2,"form",2),Ys("ngSubmit",(function(){return ln(t),Zs().editProduct()})),qs(3,"table"),qs(4,"tr"),qs(5,"th"),po(6,"Product Name"),Bs(),qs(7,"th"),po(8,"Definition"),Bs(),Bs(),qs(9,"tr"),zs(10,"input",21),qs(11,"td"),zs(12,"input",22),Bs(),qs(13,"td"),zs(14,"input",23),Bs(),Bs(),qs(15,"tr"),qs(16,"td"),qs(17,"tr"),qs(18,"td"),zs(19,"input",24),Bs(),qs(20,"td"),qs(21,"input",25),Ys("click",(function(){return ln(t),Zs().editProductForm=!1})),Bs(),Bs(),Bs(),Bs(),Bs(),Bs(),Bs(),Bs()}if(2&t){const t=Zs();Mr(2),js("formGroup",t.fEdit)}}function fE(t,e){if(1&t){const t=Ws();qs(0,"tr",26),qs(1,"td"),qs(2,"span",15),po(3),Bs(),Bs(),qs(4,"td"),po(5),Bs(),qs(6,"td"),qs(7,"button",27),Ys("click",(function(){ln(t);const n=e.$implicit;return Zs().preEditProduct(n.docId,n.data.productName,n.data.definition)})),po(8,"Edit "),Bs(),qs(9,"button",28),Ys("click",(function(){ln(t);const n=e.$implicit;return Zs().deleteProduct(n.docId)})),po(10," Delete "),Bs(),Bs(),Bs()}if(2&t){const t=e.$implicit;Mr(3),go(" ",t.data.productName,""),Mr(2),go(" ",t.data.definition," ")}}function pE(t,e){if(1&t&&(qs(0,"option",34),po(1),Bs()),2&t){const t=e.$implicit;ro("value",t.docId),Mr(1),go(" ",t.data.employeeName," ")}}function mE(t,e){1&t&&(qs(0,"th",49),po(1,"Date"),Bs())}function gE(t,e){if(1&t&&(qs(0,"td",50),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.dateAdded)}}function yE(t,e){1&t&&(qs(0,"th",49),po(1,"Employee Name"),Bs())}function vE(t,e){if(1&t&&(qs(0,"td",50),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.employeeName)}}function wE(t,e){1&t&&(qs(0,"th",49),po(1,"Product"),Bs())}function _E(t,e){if(1&t&&(qs(0,"td",50),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.productName)}}function bE(t,e){1&t&&(qs(0,"th",49),po(1,"Quantity"),Bs())}function EE(t,e){if(1&t&&(qs(0,"td",50),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.quantity)}}function SE(t,e){1&t&&(qs(0,"th",49),po(1,"Addl. info"),Bs())}function TE(t,e){if(1&t&&(qs(0,"td",50),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),mo(t.definition)}}function IE(t,e){1&t&&(qs(0,"mat-header-cell",51),po(1," Actions "),Bs())}function CE(t,e){if(1&t){const t=Ws();qs(0,"mat-cell"),qs(1,"button",52),Ys("click",(function(){ln(t);const n=e.$implicit;return Zs(2).deleteEntry(n.docId)})),po(2,"Delete"),Bs(),Bs()}}function AE(t,e){1&t&&zs(0,"tr",53)}function xE(t,e){1&t&&zs(0,"tr",54)}function kE(t,e){1&t&&(qs(0,"div",55),po(1,"Entry deleted! "),Bs())}function DE(t,e){if(1&t&&(qs(0,"div"),qs(1,"table",35),Hs(2,36),Fs(3,mE,2,0,"th",37),Fs(4,gE,2,1,"td",38),Gs(),Hs(5,39),Fs(6,yE,2,0,"th",37),Fs(7,vE,2,1,"td",38),Gs(),Hs(8,40),Fs(9,wE,2,0,"th",37),Fs(10,_E,2,1,"td",38),Gs(),Hs(11,41),Fs(12,bE,2,0,"th",37),Fs(13,EE,2,1,"td",38),Gs(),Hs(14,42),Fs(15,SE,2,0,"th",37),Fs(16,TE,2,1,"td",38),Gs(),Hs(17,43),Fs(18,IE,2,0,"mat-header-cell",44),Fs(19,CE,3,0,"mat-cell",45),Gs(),Fs(20,AE,1,0,"tr",46),Fs(21,xE,1,0,"tr",47),Bs(),Fs(22,kE,2,0,"div",48),Bs()),2&t){const t=Zs();Mr(1),js("dataSource",t.dataSource),Mr(19),js("matHeaderRowDef",t.displayedColumns),Mr(1),js("matRowDefColumns",t.displayedColumns),Mr(1),js("ngIf",t.deleted)}}function NE(t,e){1&t&&(qs(0,"th",9),po(1," Id. "),Bs())}function RE(t,e){if(1&t&&(qs(0,"td",10),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),go(" ",t.dateAdded," ")}}function OE(t,e){1&t&&(qs(0,"th",9),po(1," Name "),Bs())}function PE(t,e){if(1&t&&(qs(0,"td",10),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),go(" ",t.employeeName," ")}}function LE(t,e){1&t&&(qs(0,"th",9),po(1," CPU Name "),Bs())}function FE(t,e){if(1&t&&(qs(0,"td",10),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),go(" ",t.productName," ")}}function ME(t,e){1&t&&(qs(0,"th",9),po(1," HDD Name "),Bs())}function VE(t,e){if(1&t&&(qs(0,"td",10),po(1),Bs()),2&t){const t=e.$implicit;Mr(1),go(" ",t.quantity," ")}}function jE(t,e){1&t&&zs(0,"tr",11)}function UE(t,e){1&t&&zs(0,"tr",12)}const qE=[{path:"employee-master",component:Pb},{path:"product-master",component:(()=>{class t{constructor(t,e){this.contService=t,this.fb=e,this.success=!1,this.products=[],this.finalData=[],this.editProductForm=!1,this.editSuccess=!1,this.deleteSuccess=!1}ngOnInit(){this.products=[],this.getproducts(),this.fg=this.fb.group({productName:["",b_.required],definition:[""],size:[""]}),this.fEdit=this.fb.group({productId:[""],productName:[""],definition:[""]})}addNewProduct(){const t=this.fg.get("productName").value,e=this.fg.get("definition").value,n=this.fg.get("size").value;this.contService.addNewProduct(t,n,e).then(t=>{this.success=!0})}preEditProduct(t,e,n){this.fEdit=this.fb.group({productId:t,productName:e,definition:n}),this.editProductForm=!0}editProduct(){const t=this.fEdit.get("productId").value,e=this.fEdit.get("productName").value,n=this.fEdit.get("definition").value;this.contService.editProduct(t,e,n).then(t=>{this.editSuccess=!0,this.editProductForm=!1})}deleteProduct(t){confirm("Sure to delete?")&&this.contService.deleteProduct(t).then(t=>{this.deleteSuccess=!0})}getproducts(){this.products=[],this.contService.getProducts().subscribe(t=>{t.forEach(t=>{this.products.push({data:t.payload.doc.data(),docId:t.payload.doc.id})})})}}return t.\u0275fac=function(e){return new(e||t)(Ms(e_),Ms(pb))},t.\u0275cmp=fe({type:t,selectors:[["app-product-master"]],viewQuery:function(t,e){var n;1&t&&La(lE,!0),2&t&&Oa(n=Va())&&(e.editProds=n.first)},decls:32,vars:6,consts:[[1,"container"],[1,"heading"],["name","productForm",1,"form-inline","mt-2","mt-md-0",3,"formGroup","ngSubmit"],["type","text","formControlName","productName","placeholder","Product Name",1,"form-control",2,"width","300px","padding","3px","margin","3px"],["formControlName","size"],["value","1",3,"selected"],["value","2"],["type","text","formControlName","definition","placeholder","Definition",1,"form-control",2,"width","300px","padding","3px","margin","3px"],[2,"text-align","right","margin-top","5px","width","312px"],["type","submit","name","btn","value","Add",3,"disabled"],["class","notifier",4,"ngIf"],["class","container","style","background-color: whitesmoke;",4,"ngIf"],[1,"container",2,"background-color","rgb(235, 231, 231)","padding","1px","border-radius","8px"],[1,"table-heading",2,"width","960px","padding","3px","background-color","rgb(163, 159, 159)"],[2,"border","0px solid gray","background-color","lightgray","color","rgb(77, 75, 75)","padding","3px"],[2,"margin-left","3px"],[1,"ml-3"],["style","color:rgb(39, 39, 39); border-bottom: 1px solid rgb(136, 134, 134); padding: 3px; background-color: white;",4,"ngFor","ngForOf"],[1,"notifier"],[1,"container",2,"background-color","whitesmoke"],["editProd",""],["type","hidden","formControlName","productId",1,"form-control",2,"width","100px","padding","3px","margin","3px"],["type","text","formControlName","productName",1,"form-control",2,"width","400px","padding","3px","margin","3px"],["type","text","formControlName","definition",1,"form-control",2,"width","100px","padding","3px","margin","3px"],["type","submit","name","btn","value","Submit",1,"nice-button",2,"margin-left","5px"],["type","button","name","btn","value","Cancel",1,"nice-button",2,"margin-left","5px","background-color","red","border","1px solid rgb(77, 5, 5)","padding","3px","color","snow",3,"click"],[2,"color","rgb(39, 39, 39)","border-bottom","1px solid rgb(136, 134, 134)","padding","3px","background-color","white"],["mat-raised-button","","color","accent","value","Edit",2,"margin-right","8px",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(qs(0,"div",0),qs(1,"div",1),po(2,"Add new Product"),Bs(),qs(3,"form",2),Ys("ngSubmit",(function(){return e.addNewProduct()})),zs(4,"input",3),po(5," Size: "),qs(6,"select",4),qs(7,"option",5),po(8,"1"),Bs(),qs(9,"option",6),po(10,"2"),Bs(),Bs(),zs(11,"input",7),qs(12,"div",8),zs(13,"input",9),Bs(),Bs(),Fs(14,hE,2,0,"div",10),Bs(),zs(15,"br"),Fs(16,dE,22,1,"div",11),zs(17,"br"),qs(18,"div",12),qs(19,"div",1),po(20,"Existing Products "),Bs(),qs(21,"table",13),qs(22,"tr",14),qs(23,"th"),qs(24,"span",15),po(25," Product Name"),Bs(),Bs(),qs(26,"th"),po(27," Definition "),Bs(),qs(28,"th",16),po(29," Actions "),Bs(),Bs(),Fs(30,fE,11,2,"tr",17),Bs(),Bs(),zs(31,"br")),2&t&&(Mr(3),js("formGroup",e.fg),Mr(4),js("selected",!0),Mr(6),js("disabled",!e.fg.valid),Mr(1),js("ngIf",e.success),Mr(2),js("ngIf",e.editProductForm),Mr(14),js("ngForOf",e.products))},directives:[ab,m_,lb,u_,p_,db,F_,M_,q_,Bc,Uc,uE],styles:[""]}),t})()},{path:"entries",component:Qb},{path:"search",component:(()=>{class t{constructor(t,e){this.contService=t,this.fb=e,this.success=!1,this.entries=[],this.finalEnteries=[],this.products=[],this.productsFromDB=[],this.employeesFromDB=[],this.employees=[],this.finalData=[],this.deleted=!1,this.displayedColumns=["dateAdded","employeeName","productName","quantity","definition","actions"]}ngOnInit(){this.dataSource&&(console.log("touched"),this.dataSource.sort=this.matSort),this.getEmployees(),this.getProducts();var t=new Date;const e=Date.now();this.thisMonth=(t.getMonth()+1).toString(),this.thisMonth=this.thisMonth.length>1?this.thisMonth.substring(1,3):("0"+((new Date).getMonth()+1)).toString(),this.thisYear=t.getFullYear().toString(),this.thisYear=this.thisYear.substring(2,4),console.log(this.thisMonth+"/"+this.thisYear);const n=Sc(e,"dd/MM/yyyy","en-US");this.fg=this.fb.group({employeeId:["0"],monthRequired:this.thisMonth,yearRequired:this.thisYear,dateAdded:n})}deleteEntry(t){confirm("Sure to delete?")&&(this.contService.deleteEntry(t).then(t=>{this.deleted=!0}),console.log(t))}getProducts(){this.products=[],this.contService.getProducts().subscribe(t=>{t.forEach(t=>{this.products.push({data:t.payload.doc.data(),docId:t.payload.doc.id})})})}getEntries(){return rp(this,void 0,void 0,(function*(){const t=this.fg.get("monthRequired").value,e=this.fg.get("yearRequired").value,n=this.fg.get("employeeId").value;this.entries=[],this.finalEnteries=[],this.contService.getEntries().subscribe(r=>{r.forEach(t=>{this.finalEnteries.push({data:t.payload.doc.data(),docId:t.payload.doc.id})}),this.createFinalData(t,e,n)})}))}createFinalData(t,e,n){return rp(this,void 0,void 0,(function*(){this.finalData=[],this.finalEnteries.forEach(r=>{const i=r.data.dateAdded.substring(3,5),s=r.data.dateAdded.substring(8,10);this.dateMonthFromDB=i+"/"+s,this.dateMonthRequired=t+"/"+e,this.quantity=r.data.quantity,this.dateAddedFromDB=r.data.dateAdded,this.dateMonthFromDB==this.dateMonthRequired&&r.data.employeeId==n&&(this.products.forEach(t=>{t.docId==r.data.productId&&(this.productName=t.data.productName,this.productId=t.docId)}),this.employees.forEach(t=>{t.docId==r.data.employeeId&&(this.employeeName=t.data.employeeName,this.employeeId=t.docId)}),this.finalData.push({productName:this.productName,employeeName:this.employeeName,quantity:this.quantity,dateAdded:this.dateAddedFromDB,productId:this.productId,employeeId:this.employeeId,docId:r.docId,definition:r.data.definition}))}),this.dataSource=null,this.dataSource=new Cw(this.finalData),this.dataSource.sort=this.matSort,this.success=!0}))}getEmployees(){this.employees=[],this.contService.getEmployees().subscribe(t=>{t.forEach(t=>{this.employees.push({data:t.payload.doc.data(),docId:t.payload.doc.id})})})}ngAfterViewInit(){this.dataSource&&(console.log("touched"),this.dataSource.sort=this.matSort)}}return t.\u0275fac=function(e){return new(e||t)(Ms(e_),Ms(pb))},t.\u0275cmp=fe({type:t,selectors:[["app-search"]],viewQuery:function(t,e){var n;1&t&&La(Uy,!0),2&t&&Oa(n=Va())&&(e.matSort=n.first)},decls:68,vars:3,consts:[[1,"container"],[1,"heading"],["name","productForm",1,"form-inline","mt-2","mt-md-0",3,"formGroup","ngSubmit"],["formControlName","employeeId",1,"form-control",2,"padding","3px","margin-left","10px"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["formControlName","monthRequired",1,"form-control",2,"padding","3px","margin-left","10px"],["value","01"],["value","02"],["value","03"],["value","04"],["value","05"],["value","06"],["value","07"],["value","08"],["value","09"],["value","10"],["value","11"],["value","12"],["formControlName","yearRequired",1,"form-control",2,"padding","3px","margin-left","10px"],["value","20"],["value","21"],["value","22"],["value","23"],["value","24"],["value","25"],["value","26"],["value","27"],["value","28"],["value","29"],["value","30"],["value","31"],["type","submit","name","btn","value","Search",1,"form-control",2,"padding","3px","margin-left","10px","color","whitesmoke","background-color","rgb(10, 18, 88)"],[4,"ngIf"],[3,"value"],["mat-table","","matSort","",1,"mat-elevation-z8",2,"width","90%",3,"dataSource"],["matColumnDef","dateAdded"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","productName"],["matColumnDef","quantity"],["matColumnDef","definition"],["matColumnDef","actions"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","notifier",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-sort-header",""],["mat-raised-button","","color","warn","size","small",3,"click"],["mat-header-row",""],["mat-row",""],[1,"notifier"]],template:function(t,e){1&t&&(qs(0,"div",0),qs(1,"div",1),po(2,"Search Entries"),Bs(),qs(3,"form",2),Ys("ngSubmit",(function(){return e.getEntries()})),qs(4,"table"),qs(5,"tr"),qs(6,"td"),qs(7,"select",3),qs(8,"option",4),po(9,"Select employee"),Bs(),Fs(10,pE,2,2,"option",5),Bs(),Bs(),qs(11,"td"),qs(12,"select",6),qs(13,"option",7),po(14,"January"),Bs(),qs(15,"option",8),po(16,"February"),Bs(),qs(17,"option",9),po(18,"March"),Bs(),qs(19,"option",10),po(20,"April"),Bs(),qs(21,"option",11),po(22,"May"),Bs(),qs(23,"option",12),po(24,"June"),Bs(),qs(25,"option",13),po(26,"July"),Bs(),qs(27,"option",14),po(28,"August"),Bs(),qs(29,"option",15),po(30,"September"),Bs(),qs(31,"option",16),po(32,"October"),Bs(),qs(33,"option",17),po(34,"November"),Bs(),qs(35,"option",18),po(36,"December"),Bs(),Bs(),Bs(),qs(37,"td"),qs(38,"select",19),qs(39,"option",20),po(40,"2020"),Bs(),qs(41,"option",21),po(42,"2021"),Bs(),qs(43,"option",22),po(44,"2022"),Bs(),qs(45,"option",23),po(46,"2023"),Bs(),qs(47,"option",24),po(48,"2024"),Bs(),qs(49,"option",25),po(50,"2025"),Bs(),qs(51,"option",26),po(52,"2026"),Bs(),qs(53,"option",27),po(54,"2027"),Bs(),qs(55,"option",28),po(56,"2028"),Bs(),qs(57,"option",29),po(58,"2029"),Bs(),qs(59,"option",30),po(60,"2030"),Bs(),qs(61,"option",31),po(62,"2031"),Bs(),Bs(),Bs(),qs(63,"td"),zs(64,"input",32),Bs(),Bs(),Bs(),Bs(),zs(65,"br"),zs(66,"br"),Fs(67,DE,23,4,"div",33),Bs()),2&t&&(Mr(3),js("formGroup",e.fg),Mr(7),js("ngForOf",e.employees),Mr(57),js("ngIf",e.success))},directives:[ab,m_,lb,F_,p_,db,M_,q_,Uc,Bc,sw,Uy,hw,cw,aw,yw,ww,fw,Ky,mw,uE,bw,Sw],styles:[""]}),t})()},{path:"price",component:nE},{path:"test",component:(()=>{class t{constructor(t){this.congService=t,this.displayedColumns=["dateAdded","employeeName","productName","quantity"],this.myArray=[{id:1,name:"aaaa"},{id:12,name:"zzzz"},{id:31,name:"cccc"},{id:4,name:"gggg"}]}ngOnInit(){this.assetGrid(),console.log(this.dataSource)}assetGrid(){console.log(this.myArray),console.log(this.myArray.sort((t,e)=>t.name>e.name?1:t.name<e.name?-1:0))}}return t.\u0275fac=function(e){return new(e||t)(Ms(e_))},t.\u0275cmp=fe({type:t,selectors:[["app-test"]],decls:15,vars:3,consts:[["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","dateAdded"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","productName"],["matColumnDef","quantity"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(qs(0,"table",0),Hs(1,1),Fs(2,NE,2,0,"th",2),Fs(3,RE,2,1,"td",3),Gs(),Hs(4,4),Fs(5,OE,2,0,"th",2),Fs(6,PE,2,1,"td",3),Gs(),Hs(7,5),Fs(8,LE,2,0,"th",2),Fs(9,FE,2,1,"td",3),Gs(),Hs(10,6),Fs(11,ME,2,0,"th",2),Fs(12,VE,2,1,"td",3),Gs(),Fs(13,jE,1,0,"tr",7),Fs(14,UE,1,0,"tr",8),Bs()),2&t&&(js("dataSource",e.dataSource),Mr(13),js("matHeaderRowDef",e.displayedColumns),Mr(1),js("matRowDefColumns",e.displayedColumns))},directives:[sw,Uy,hw,cw,aw,yw,ww,fw,Ky,mw,bw,Sw],styles:[""]}),t})()},{path:"calculate",component:Db}];let BE=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},imports:[[Kf.forRoot(qE)],Kf]}),t})(),zE=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-nav"]],decls:19,vars:0,consts:[[1,"d-flex","flex-column","flex-md-row","align-items-center","pb-3","mb-4","border-bottom"],["href","/",1,"d-flex","align-items-center","text-dark","text-decoration-none"],["xmlns","http://www.w3.org/2000/svg","width","40","height","32","viewBox","0 0 118 94","role","img",1,"me-2"],["fill-rule","evenodd","clip-rule","evenodd","d","M24.509 0c-6.733 0-11.715 5.893-11.492 12.284.214 6.14-.064 14.092-2.066 20.577C8.943 39.365 5.547 43.485 0 44.014v5.972c5.547.529 8.943 4.649 10.951 11.153 2.002 6.485 2.28 14.437 2.066 20.577C12.794 88.106 17.776 94 24.51 94H93.5c6.733 0 11.714-5.893 11.491-12.284-.214-6.14.064-14.092 2.066-20.577 2.009-6.504 5.396-10.624 10.943-11.153v-5.972c-5.547-.529-8.934-4.649-10.943-11.153-2.002-6.484-2.28-14.437-2.066-20.577C105.214 5.894 100.233 0 93.5 0H24.508zM80 57.863C80 66.663 73.436 72 62.543 72H44a2 2 0 01-2-2V24a2 2 0 012-2h18.437c9.083 0 15.044 4.92 15.044 12.474 0 5.302-4.01 10.049-9.119 10.88v.277C75.317 46.394 80 51.21 80 57.863zM60.521 28.34H49.948v14.934h8.905c6.884 0 10.68-2.772 10.68-7.727 0-4.643-3.264-7.207-9.012-7.207zM49.948 49.2v16.458H60.91c7.167 0 10.964-2.876 10.964-8.281 0-5.406-3.903-8.178-11.425-8.178H49.948z","fill","currentColor"],[1,"d-inline-flex","mt-2","mt-mdz-0","ms-md-auto"],["href","product-master",1,"me-3","py-2","text-dark","text-decoration-none"],["href","employee-master",1,"me-3","py-2","text-dark","text-decoration-none"],["href","entries",1,"me-3","py-2","text-dark","text-decoration-none"],["href","search",1,"me-3","py-2","text-dark","text-decoration-none"],["href","price",1,"me-3","py-2","text-dark","text-decoration-none"],["href","calculate",1,"me-3","py-2","text-dark","text-decoration-none"]],template:function(t,e){1&t&&(qs(0,"div",0),qs(1,"a",1),on.lFrame.currentNamespace=He,qs(2,"svg",2),qs(3,"title"),po(4,"Bootstrap"),Bs(),zs(5,"path",3),Bs(),Bs(),on.lFrame.currentNamespace=null,qs(6,"nav",4),qs(7,"a",5),po(8,"Products"),Bs(),qs(9,"a",6),po(10,"Employees"),Bs(),qs(11,"a",7),po(12,"Enteries"),Bs(),qs(13,"a",8),po(14,"Search"),Bs(),qs(15,"a",9),po(16,"Pricing"),Bs(),qs(17,"a",10),po(18,"Calculate"),Bs(),Bs(),Bs())},styles:[""]}),t})(),HE=(()=>{class t{constructor(){this.title="contratual"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){1&t&&(zs(0,"app-nav"),zs(1,"router-outlet"))},directives:[zE,Vf],styles:[""]}),t})();const GE={apiKey:"AIzaSyDod4I8TQ_3FX7ScbIkVxkzuJJtxwOP5Mw",authDomain:"contractual-e220f.firebaseapp.com",projectId:"contractual-e220f",storageBucket:"contractual-e220f.appspot.com",messagingSenderId:"506601902944",appId:"1:506601902944:web:24d06b93b9ef8281178405",measurementId:"G-PBB05C5SEW"};let $E=(()=>{class t{}return t.\u0275mod=ye({type:t,bootstrap:[HE]}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[],imports:[[Sl,BE,gb,Uw.initializeApp(GE),my,Iw,Qy,mb,cE]]}),t})();(function(){if(yr)throw new Error("Cannot enable prod mode after platform setup.");gr=!1})(),bl().bootstrapModule($E).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);